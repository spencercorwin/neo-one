self.webpackChunk([17],{106:function(e,t,a){"use strict";var n=a(1481);a.o(n,"createEndpoint")&&a.d(t,"createEndpoint",function(){return n.createEndpoint}),a.o(n,"getEndpointConfig")&&a.d(t,"getEndpointConfig",function(){return n.getEndpointConfig});var s=a(1482);a.o(s,"createEndpoint")&&a.d(t,"createEndpoint",function(){return s.createEndpoint}),a.o(s,"getEndpointConfig")&&a.d(t,"getEndpointConfig",function(){return s.getEndpointConfig});var r=a(1483);a.o(r,"createEndpoint")&&a.d(t,"createEndpoint",function(){return r.createEndpoint}),a.o(r,"getEndpointConfig")&&a.d(t,"getEndpointConfig",function(){return r.getEndpointConfig});var i=a(1484);a.o(i,"createEndpoint")&&a.d(t,"createEndpoint",function(){return i.createEndpoint}),a.o(i,"getEndpointConfig")&&a.d(t,"getEndpointConfig",function(){return i.getEndpointConfig});var o=a(1485);a.o(o,"createEndpoint")&&a.d(t,"createEndpoint",function(){return o.createEndpoint}),a.o(o,"getEndpointConfig")&&a.d(t,"getEndpointConfig",function(){return o.getEndpointConfig});var c=a(1486);a.o(c,"createEndpoint")&&a.d(t,"createEndpoint",function(){return c.createEndpoint}),a.o(c,"getEndpointConfig")&&a.d(t,"getEndpointConfig",function(){return c.getEndpointConfig});var d=a(1487);a.o(d,"createEndpoint")&&a.d(t,"createEndpoint",function(){return d.createEndpoint}),a.o(d,"getEndpointConfig")&&a.d(t,"getEndpointConfig",function(){return d.getEndpointConfig})},107:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return c}),a.d(t,"b",function(){return Q});a(94),a(142),a(85);var n=a(831),s=a(122),r=a.n(s),i=a(101),o=a(114);const c=Object(n.a)("INVALID_FORMAT",e=>"Invalid format".concat(void 0===e?".":": ".concat(e))),d=e=>"0x".concat(e),u=e=>e.startsWith("0x")?e.substring(2):e,l=t=>{const a=e.allocUnsafe(t.length);for(let e=0,n=t.length-1;e<=n;e+=1,n-=1)a[e]=t[n],a[n]=t[e];return a},h=t=>t instanceof e&&20===t.length,f=e=>{if(h(e))return e;throw new c("Invalid UInt160")},b=f,p=e=>d(l(e).toString("hex")),g=t=>f("string"==typeof t?l(e.from(u(t),"hex")):t),y=g,m=e.alloc(20,0),v=e.alloc(32,0),w=t=>t instanceof e&&32===t.length,S=e=>{if(w(e))return e;throw new c("Invalid UInt256")},I=S,T=e=>d(l(e).toString("hex")),x=t=>I("string"==typeof t?l(e.from(u(t),"hex")):t),E=e=>"string"==typeof e?x(e):e,k=x,B=e.from([0]),A=t=>t instanceof e&&(33===t.length||t.equals(B)),O=e=>{if(A(e))return e;throw new c("Invalid ECPoint")},N=O,U=e=>"string"==typeof e?e:e.toString("hex"),C=t=>N("string"==typeof t?e.from(t,"hex"):t),H=C,z=t=>t instanceof e&&32===t.length,P=e=>{if(z(e))return e;throw new c("Invalid Private Key, found: ".concat(e))},R=P,M=e=>"string"==typeof e?e:e.toString("hex"),V=t=>R("string"==typeof t?e.from(t,"hex"):t),_=V,D=(e,t)=>{if(e instanceof i.BN)return e;const a=new i.BN(10**t);if("number"==typeof e)return new i.BN(e).mul(a);const n="string"==typeof e?new r.a(e):e,s=new r.a(a.toString(10));return new i.BN(n.times(s).toString(),10)},L=new i.BN(1e8),K=e=>D(e,8),G=(e,t)=>{const a=new r.a(10**t);return new r.a(e.toString(10)).div(a)},W=new i.BN(-1),F=K(10),j=K(100),Y=K(400),J=K(500),q=K(1e3),Z=K(5e3),X=K(1e4),$=K(1e8),Q={D8:L,NEO_ADDRESS_VERSION:23,NEO_PRIVATE_KEY_VERSION:128,ECPOINT_BUFFER_BYTES:33,ECPOINT_INFINITY:B,ECPOINT_INFINITY_BYTE:0,PRIVATE_KEY_BUFFER_BYTES:32,UINT160_BUFFER_BYTES:20,UINT256_BUFFER_BYTES:32,ZERO_UINT160:m,ZERO_UINT256:v,NEGATIVE_SATOSHI_FIXED8:W,TEN_FIXED8:F,ONE_HUNDRED_FIXED8:j,FOUR_HUNDRED_FIXED8:Y,FIVE_HUNDRED_FIXED8:J,ONE_THOUSAND_FIXED8:q,FIVE_THOUSAND_FIXED8:Z,TEN_THOUSAND_FIXED8:X,ONE_HUNDRED_MILLION_FIXED8:$,NEO_ASSET_HASH:"0xc56f33fc6ecfcd0c225c4ab356fee59390af8560be0e930faebe74a6daff7c9b",GAS_ASSET_HASH:"0x602c79718b16e442de58778e148d0b1084e3b2dffd5de6b7b16cee7969282de7",uInt160ToBuffer:e=>"string"==typeof e?g(e):e,asUInt160:f,uInt160ToHex:p,hexToUInt160:g,uInt160ToString:e=>"string"==typeof e?e:p(e),stringToUInt160:y,uInt160Equal:(e,t)=>e.equals(t),isUInt160:h,bufferToUInt160:b,isUInt256:w,asUInt256:S,isECPoint:A,asECPoint:O,uInt256ToBuffer:E,bufferToUInt256:I,uInt256ToHex:T,hexToUInt256:x,uInt256ToString:e=>"string"==typeof e?e:T(e),stringToUInt256:k,uInt256Equal:(e,t)=>e.equals(t),toUInt32LE:e=>new i.BN(E(e).slice(0,4),"le").toNumber(),ecPointToBuffer:e=>"string"==typeof e?C(e):e,bufferToECPoint:N,ecPointToHex:U,hexToECPoint:C,ecPointToString:e=>"string"==typeof e?e:U(e),ecPointCompare:(e,t)=>{const a=U(e),n=U(t);return a<n?-1:a>n?1:0},stringToECPoint:H,ecPointEqual:(e,t)=>e.equals(t),ecPointIsInfinity:e=>e.equals(B),privateKeyToHex:M,hexToPrivateKey:V,privateKeyToBuffer:e=>"string"==typeof e?V(e):e,bufferToPrivateKey:R,privateKeyToString:e=>"string"==typeof e?e:M(e),stringToPrivateKey:_,isPrivateKey:z,asPrivateKey:P,fixed8FromDecimal:K,fixed8ToDecimal:e=>G(e,8),fixedFromDecimal:D,fixedToDecimal:G,reverse:l,paramTo:(t,a)=>{if(void 0===t)return a.undefined();if(Array.isArray(t))return a.array(t);if(t instanceof Map)return a.map(t);if(h(t))return a.uInt160(t);if(w(t))return a.uInt256(t);if(A(t))return a.ecPoint(t);if("number"==typeof t||i.BN.isBN(t))return a.number(t);if("string"==typeof t)return a.string(t);if("boolean"==typeof t)return a.boolean(t);if(t instanceof e)return a.buffer(t);if("object"==typeof t)return a.object(t);throw new o.p(typeof t)}}}).call(this,a(92).Buffer)},112:function(e,t,a){"use strict";a.d(t,"E",function(){return s}),a.d(t,"C",function(){return r}),a.d(t,"i",function(){return i}),a.d(t,"j",function(){return o}),a.d(t,"n",function(){return c}),a.d(t,"k",function(){return d}),a.d(t,"t",function(){return u}),a.d(t,"b",function(){return l}),a.d(t,"a",function(){return h}),a.d(t,"u",function(){return f}),a.d(t,"p",function(){return b}),a.d(t,"l",function(){return p}),a.d(t,"e",function(){return g}),a.d(t,"D",function(){return y}),a.d(t,"y",function(){return m}),a.d(t,"x",function(){return v}),a.d(t,"w",function(){return w}),a.d(t,"m",function(){return S}),a.d(t,"o",function(){return I}),a.d(t,"g",function(){return T}),a.d(t,"h",function(){return x}),a.d(t,"d",function(){return E}),a.d(t,"r",function(){return k}),a.d(t,"A",function(){return B}),a.d(t,"q",function(){return A}),a.d(t,"z",function(){return O}),a.d(t,"c",function(){return N}),a.d(t,"F",function(){return U}),a.d(t,"B",function(){return C}),a.d(t,"f",function(){return H}),a.d(t,"s",function(){return z}),a.d(t,"v",function(){return P});a(94);var n=a(831);const s=Object(n.a)("UNKNOWN_NETWORK",e=>"Unknown network ".concat(e)),r=Object(n.a)("UNKNOWN_ACCOUNT",e=>"Unknown account ".concat(e)),i=Object(n.a)("INVALID_ARGUMENT",(e,t,a,n)=>"Expected ".concat(e," for ").concat(t,", found ").concat(String(a)).concat(void 0===n?"":". ".concat(n))),o=Object(n.a)("INVALID_CONTRACT_ARGUMENT_COUNT",(e,t)=>"Expected ".concat(e," parameters, found ").concat(t,".")),c=Object(n.a)("INVOCATION_CALL",e=>e),d=Object(n.a)("INVALID_EVENT",e=>e),u=Object(n.a)("NO_ACCOUNT",()=>"No account exists."),l=Object(n.a)("CANNOT_SEND_TO_CONTRACT",e=>"Contract ".concat(e," does not accept native assets")),h=Object(n.a)("CANNOT_SEND_FROM_CONTRACT",e=>"Contract ".concat(e," does not allow sending native assets")),f=Object(n.a)("NO_CONTRACT_DEPLOYED",e=>"Contract has not been deployed to network ".concat(e)),b=Object(n.a)("JSON_RPC",e=>"".concat(e.message,":").concat(e.code)),p=Object(n.a)("INVALID_RPC_RESPONSE",()=>"Did not receive valid rpc response"),g=Object(n.a)("HTTP",(e,t)=>void 0===t?"HTTP Error ".concat(e):"HTTP Error ".concat(e,": ").concat(t)),y=Object(n.a)("UNKNOWN_BLOCK",()=>"Unknown block"),m=Object(n.a)("NOTHING_TO_SEND",()=>"Nothing to send."),v=Object(n.a)("NOTHING_TO_REFUND",()=>"Nothing to refund."),w=Object(n.a)("NEO_NOTHING_TO_CLAIM",e=>"Address ".concat(e.address," on network ").concat(e.network," has nothing to claim.")),S=Object(n.a)("INVALID_TRANSACTION",e=>e),I=Object(n.a)("INVOKE",e=>e),T=Object(n.a)("INSUFFICIENT_FUNDS",(e,t)=>"Found ".concat(e.toString()," funds, required: ").concat(t.toString(),".")),x=Object(n.a)("INSUFFICIENT_SYSTEM_FEE",(e,t)=>"Found ".concat(e.toString()," allowed system fee, required: ").concat(t.toString(),".")),E=Object(n.a)("FUNDS_IN_USE",(e,t,a)=>"Found ".concat(e.toString()," funds, required: ").concat(t.toString(),"; You have ").concat(a," input(s) on the current block, try transfer again on the next")),k=Object(n.a)("MISSING_TRANSACTION_DATA",e=>"Missing transaction data for transaction ".concat(e)),B=Object(n.a)("RELAY_TRANSACTION",e=>e),A=Object(n.a)("LOCKED_ACCOUNT",e=>"Account ".concat(e," is locked")),O=(Object(n.a)("PASSWORD_REQUIRED",()=>"A password is required when creating accounts on the MainNet."),Object(n.a)("NOTHING_TO_TRANSFER",()=>"Nothing to transfer.")),N=(Object(n.a)("LEDGER_NOT_SUPPORTED",()=>"Ledger not supported by your machine."),Object(n.a)("LEDGER_NOT_DETECTED",()=>"Ledger not detected by your machine."),Object(n.a)("BAD_LEDGER_STATUS_CODE",e=>"Received unknown status code ".concat(e," from ledger.")),Object(n.a)("LEDGER_MESSAGE_OVERSIZED",()=>"Ledger signing failed, message too large. [CODE: 6d08]"),Object(n.a)("LEDGER_NEO_APP_ERROR",()=>"Ledger NEO App error, check ledger. [CODE: 6e00]"),Object(n.a)("LEDGER_TRANSACTION_DENIED",()=>"Ledger transaction denied. [CODE: 6985]"),Object(n.a)("LEDGER_PARSE_ERROR",()=>"Ledger transaction parsing error. [CODE: 6d07]"),Object(n.a)("DELETE_USER_ACCOUNT_UNSUPPORTED",e=>"Deleting the user account with network ".concat(e.network," and address ").concat(e.address," is not supported"))),U=Object(n.a)("UPDATE_USER_ACCOUNT_NAME_UNSUPPORTED",e=>"Updating the name of user account with network ".concat(e.network," and address ").concat(e.address," is not supported")),C=Object(n.a)("TRANSFER_ARGUMENT_EXPECTED",()=>"Expected to find a transfer argument"),H=Object(n.a)("HASH_ARGUMENT_EXPECTED",()=>"Expected to find a hash argument"),z=Object(n.a)("INVALID_SET_RPC_URL_CALL",()=>"Cannot set rpcURL for NEOONEOneDataProvider"),P=(Object(n.a)("INVALID_HD_ACCOUNT_PERMISSION",e=>"Invalid permission for account at path: ".concat(e)),Object(n.a)("UNDISCOVERABLE_WALLET",e=>"Invalid access to discover wallet at index: ".concat(e)),Object(n.a)("UNDISCOVERABLE_CHAIN",e=>"Invalid access to discover chain at index: ".concat(e)),Object(n.a)("HD_MASTER_DUPLICATE_ERROR",()=>"Storage returned multiple master keys"),Object(n.a)("INVALID_HD_STORED_PATH",e=>"Storage returned an invalid key-path: ".concat(e)),Object(n.a)("INVALID_HD_MASTER_PATH",e=>"Invalid masterPath returned by HDStore: ".concat(e)),Object(n.a)("NOT_IMPLEMENTED",e=>"".concat(e," not implemented for this provider.")))},114:function(e,t,a){"use strict";a.d(t,"B",function(){return r}),a.d(t,"l",function(){return i}),a.d(t,"a",function(){return o}),a.d(t,"b",function(){return c}),a.d(t,"A",function(){return d}),a.d(t,"o",function(){return u}),a.d(t,"q",function(){return l}),a.d(t,"r",function(){return h}),a.d(t,"w",function(){return f}),a.d(t,"z",function(){return b}),a.d(t,"p",function(){return p}),a.d(t,"d",function(){return g}),a.d(t,"c",function(){return y}),a.d(t,"v",function(){return m}),a.d(t,"u",function(){return v}),a.d(t,"t",function(){return w}),a.d(t,"n",function(){return S}),a.d(t,"m",function(){return I}),a.d(t,"e",function(){return T}),a.d(t,"f",function(){return x}),a.d(t,"x",function(){return E}),a.d(t,"y",function(){return k}),a.d(t,"s",function(){return B}),a.d(t,"k",function(){return A}),a.d(t,"h",function(){return O}),a.d(t,"g",function(){return N}),a.d(t,"i",function(){return U}),a.d(t,"j",function(){return C});a(94);var n=a(831),s=a(107);const r=Object(n.a)("UNKNOWN_OP",e=>"Unknown op: ".concat(e)),i=Object(n.a)("INVALID_CONTRACT_PARAMETER",(e,t)=>"Expected one of ".concat(JSON.stringify(t)," ")+"ContractParameterTypes, found ".concat(e.type)),o=Object(n.a)("BASE_58_CHECK",e=>"Base58 Check Decode Error on decoding: ".concat(e)),c=Object(n.a)("INVALID_ADDRESS",e=>"Invalid Address: ".concat(e)),d=Object(n.a)("TOO_MANY_PUBLIC_KEYS",e=>"Too many public keys. Found: ".concat(e,", Max: 1024")),u=Object(n.a)("INVALID_NUMBER_OF_KEYS",(e,t)=>"invalid number of keys. Found: ".concat(e," keys, must be between 1 and ").concat(t," (number of public keys).")),l=Object(n.a)("INVALID_PRIVATE_KEY",e=>"Invalid Private Key, found: ".concat(s.b.privateKeyToString(e))),h=Object(n.a)("INVALID_SIGNATURE",e=>"Invalid Signature length. Found: ".concat(e,", Max: 64")),f=Object(n.a)("INVALID_SYS_CALL_NAME",e=>"Expected sys call name, found: ".concat(e)),b=Object(n.a)("INVALID_VM_STATE",e=>"Invalid VM State: ".concat(e)),p=Object(n.a)("INVALID_PARAM",e=>"Invalid Param".concat(void 0===e?".":": ".concat(e))),g=Object(n.a)("INVALID_ASSET_TYPE_JSON",e=>"Invalid AssetType: ".concat(e)),y=Object(n.a)("INVALID_ASSET_TYPE",e=>"Expected asset type, found: ".concat(e.toString(16))),m=Object(n.a)("INVALID_STORAGE_FLAGS_JSON",e=>"Invalid StorageFlags: ".concat(e)),v=Object(n.a)("INVALID_STORAGE_FLAGS",e=>"Expected StorageFlags, found: ".concat(e.toString(16))),w=Object(n.a)("INVALID_STATE_DESCRIPTOR_TYPE",e=>"Expected StateDescriptorType, found: ".concat(e.toString(16))),S=Object(n.a)("INVALID_CONTRACT_PARAMETER_TYPE_JSON",e=>"Invalid ContractParameterType: ".concat(e)),I=Object(n.a)("INVALID_CONTRACT_PARAMETER_TYPE",e=>"Expected contract parameter type, found: ".concat(e.toString(16))),T=Object(n.a)("INVALID_ATTRIBUTE_USAGE",e=>"Expected transaction attribute usage, found: ".concat(e.toString(16))),x=Object(n.a)("INVALID_ATTRIBUTE_USAGE_JSON",e=>"Expected transaction attribute usage, found: ".concat(e)),E=Object(n.a)("INVALID_TRANSACTION_TYPE",e=>"Expected transaction type, found: ".concat(e.toString(16))),k=Object(n.a)("INVALID_VM_OP_CODE",e=>"Expected VM OpCode, received: ".concat(e,"}")),B=Object(n.a)("INVALID_SIGNATURES",(e,t)=>"Expected ".concat(e," unique signatures, found: ").concat(t,".")),A=Object(n.a)("INVALID_BIP32_KEY_VERSION",(e,t)=>"Expected key-version ".concat(t,"; got ").concat(e)),O=Object(n.a)("INVALID_BIP32_EXTENDED_KEY",e=>"Invalid Extended Key: ".concat(e)),N=Object(n.a)("INVALID_BIP32_CHILD_INDEX",e=>"Index must be less than ".concat(2147483648,"; got ",e)),U=Object(n.a)("INVALID_BIP32_HARDENED_CALL",()=>"Cannot derive a hardened child key from a public key."),C=Object(n.a)("INVALID_BIP32_PRIVATE_SERIALIZATION",()=>"Cannot serialize a private extended key from a public node.")},125:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return p});a(94);var n=a(122),s=a.n(n),r=a(101);const i=new r.BN(65535),o=i.addn(1),c=new r.BN(4294967295),d=new r.BN(0),u=new r.BN(1),l=new r.BN(-1),h=new r.BN(1e8),f=new r.BN(1024),b=e=>0===e.length?d:new r.BN(e,"le").fromTwos(8*e.length);const p={FD:new r.BN(253),FFFF:new r.BN(65535),FFFFFFFF:new r.BN(4294967295),ZERO:d,ONE:u,TWO:new r.BN(2),NEGATIVE_ONE:l,INT_MAX_VALUE:new r.BN(2147483647),SATOSHI:u,NEGATIVE_SATOSHI:l,USHORT_MAX_NUMBER:65535,USHORT_MAX_NUMBER_PLUS_ONE:65536,USHORT_MAX:i,USHORT_MAX_PLUS_ONE:o,UINT_MAX_NUMBER:4294967295,UINT_MAX:c,ONE_HUNDRED_MILLION:h,ONE_THOUSAND_TWENTY_FOUR:f,EIGHT:new r.BN(8),TEN:new r.BN(10),SIXTEEN:new r.BN(16),ZERO_BIG_NUMBER:new s.a(0),NEGATIVE_ONE_BIG_NUMBER:new s.a(-1),toSignedBuffer:t=>{if(t.isNeg()){const a=t.toTwos(8*t.byteLength()).toArrayLike(e,"le"),n=b(a),s=t.toTwos(8*(t.byteLength()+1)).toArrayLike(e,"le");return t.eq(n)?a:s}const a=t.toArrayLike(e,"le"),n=b(a),s=t.toArrayLike(e,"le",a.length+1),r=b(s);return n.eq(r)?a:s},fromSignedBuffer:b,bigNumberToBN:(e,t)=>{const a=new s.a(10**t);return new r.BN(e.times(a).toString(),10)},lazy:function(e){let t;return()=>(void 0===t&&(t=e()),t)},randomUInt:()=>Math.floor(4294967295*Math.random())}}).call(this,a(92).Buffer)},126:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(90),s=a(860);class r{constructor(){this.serializeWire=Object(n.createSerializeWire)(this.serializeWireBase.bind(this))}static deserializeContractParameterBaseWireBase(e){let{reader:t}=e;return{type:t.readUInt8()}}static deserializeWireBase(e){throw new Error("Not Implemented")}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new s.a(e.buffer)})}asBuffer(){throw new Error("Unimplemented.")}asBoolean(){return this.asBuffer().some(e=>0!==e)}serializeWireBase(e){e.writeUInt8(this.type)}serializeJSON(e){throw new Error("Not Implemented")}}},127:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(159);const s=e=>()=>{const t=new n.a;return e(t),t.toBuffer()}},128:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i});a(94);var n,s=a(831);!function(e){e[e.ByteArray=0]="ByteArray",e[e.Boolean=1]="Boolean",e[e.Integer=2]="Integer",e[e.InteropInterface=64]="InteropInterface",e[e.Array=128]="Array",e[e.Struct=129]="Struct",e[e.Map=130]="Map"}(n||(n={}));const r=Object(s.a)("INVALID_STACK_ITEM_TYPE",e=>"Expected StackItemType, found: ".concat(e.toString(16))),i=e=>{if((e=>void 0!==n[e])(e))return e;throw new r(e)}},129:function(e,t,a){"use strict";a.d(t,"a",function(){return d});a(94),a(85);var n=a(107),s=a(159),r=a(859),i=a(165),o=a(140),c=a(128);class d{constructor(){this.mutableCount=0}get referenceCount(){return this.mutableCount}increment(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return e.has(this)?1:(e.add(this),this.mutableCount+=1,this.mutableCount>1?1:this.incrementInternal(e)+1)}decrement(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return e.has(this)?-1:(e.add(this),this.mutableCount-=1,this.mutableCount>=1?-1:this.decrementInternal(e)-1)}toStructuralKey(){return this.asBuffer().toString("hex")}equals(e){if(void 0===e)return!1;if(this===e)return!0;if(e instanceof d){const t=this.asBufferMaybe(),a=e.asBufferMaybe();return void 0!==t&&void 0!==a&&t.equals(a)}return!1}serialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;if(e.has(this))throw new o.c;const t=new Set(e);return t.add(this),this.serializeInternal(t)}asArray(){throw new o.g}asBigInteger(e){if(void 0===e||e<i.a)return this.asBigIntegerUnsafe();const t=this.asBuffer();if(t.length>i.j)throw new o.b;return r.a.fromSignedBuffer(t)}asBigIntegerUnsafe(){return r.a.fromSignedBuffer(this.asBuffer())}asBuffer(){throw new Error("Unimplemented.")}asBufferMaybe(){try{return this.asBuffer()}catch(e){return}}asBoolean(){return this.asBuffer().some(e=>0!==e)}asUInt160(){return n.b.bufferToUInt160(this.asBuffer())}asUInt160Maybe(){try{return this.asUInt160()}catch(e){return}}asUInt256(){return n.b.bufferToUInt256(this.asBuffer())}asUInt256Maybe(){try{return this.asUInt256()}catch(e){return}}asECPoint(){return n.b.bufferToECPoint(this.asBuffer())}asECPointMaybe(){try{return this.asECPoint()}catch(e){return}}asString(){return r.a.toUTF8(this.asBuffer())}asHeader(){throw new o.p}asBlockBase(){throw new o.k}asBlock(){throw new o.l}asTransaction(){throw new o.v}asWitness(){throw new o.x}asAttribute(){throw new o.i}asAttributeStackItem(){throw new o.j}asInput(){throw new o.q}asOutput(){throw new o.t}asAccount(){throw new o.f}asAsset(){throw new o.h}asContract(){throw new o.n}asValidator(){throw new o.w}asMapStackItem(){throw new o.s}asEnumerator(){throw new o.o}asIterator(){throw new o.r}asStorageContextStackItem(e){throw new o.u}isArray(){return!1}isMap(){return!1}toContractParameter(){throw new Error("Not Implemented")}get size(){return this.asBuffer().length}toString(){return JSON.stringify(this.convertJSON())}convertJSON(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;if(e.has(this))return"<circular>";const t=new Set(e);return t.add(this),this.convertJSONInternal(t)}incrementInternal(e){return 0}decrementInternal(e){return 0}incrementInternalArray(e,t){return e.reduce((e,a)=>e+a.increment(t),0)}decrementInternalArray(e,t){return e.reduce((e,a)=>e+a.decrement(t),0)}serializeInternal(e){const t=new s.a;return t.writeUInt8(c.a.ByteArray),t.writeVarBytesLE(this.asBuffer()),t.toBuffer()}convertJSONInternal(e){try{return this.asBuffer().toString("hex")}catch(e){return"UNKNOWN"}}}},134:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(127);class s{constructor(){this.serializeWire=Object(n.a)(this.serializeWireBase.bind(this))}serializeWireBase(e){e.writeUInt8(this.usage)}}},140:function(e,t,a){"use strict";a.d(t,"g",function(){return s}),a.d(t,"a",function(){return r}),a.d(t,"m",function(){return i}),a.d(t,"o",function(){return o}),a.d(t,"p",function(){return c}),a.d(t,"l",function(){return d}),a.d(t,"k",function(){return u}),a.d(t,"v",function(){return l}),a.d(t,"x",function(){return h}),a.d(t,"i",function(){return f}),a.d(t,"j",function(){return b}),a.d(t,"q",function(){return p}),a.d(t,"s",function(){return g}),a.d(t,"t",function(){return y}),a.d(t,"f",function(){return m}),a.d(t,"h",function(){return v}),a.d(t,"n",function(){return w}),a.d(t,"w",function(){return S}),a.d(t,"r",function(){return I}),a.d(t,"u",function(){return T}),a.d(t,"z",function(){return x}),a.d(t,"d",function(){return E}),a.d(t,"e",function(){return k}),a.d(t,"y",function(){return B}),a.d(t,"c",function(){return A}),a.d(t,"b",function(){return O});var n=a(831);const s=Object(n.a)("INVALID_VALUE_ARRAY",()=>"Invalid Value. Expected Array"),r=Object(n.a)("CIRCULAR_REFERENCE_ERROR",()=>"Circular Reference Error"),i=Object(n.a)("INVALID_VALUE_BUFFER",()=>"Invalid Value. Expected Buffer"),o=Object(n.a)("INVALID_VALUE_ENUMERATOR",()=>"Invalid Value. Expected Enumerator"),c=Object(n.a)("INVALID_VALUE_HEADER",()=>"Invalid Value. Expected Header"),d=Object(n.a)("INVALID_VALUE_BLOCK",()=>"Invalid Value. Expected Block"),u=Object(n.a)("INVALID_VALUE_BLOCK_BASE",()=>"Invalid Value. Expected BlockBase"),l=Object(n.a)("INVALID_VALUE_TRANSACTION",()=>"Invalid Value. Expected Transaction"),h=Object(n.a)("INVALID_VALUE_WITNESS",()=>"Invalid Value. Expected Witness"),f=Object(n.a)("INVALID_VALUE_ATTRIBUTE",()=>"Invalid Value. Expected Attribute"),b=Object(n.a)("INVALID_VALUE_ATTRIBUTE_STACK_ITEM",()=>"Invalid Value. Expected AttributeStackItem"),p=Object(n.a)("INVALID_VALUE_INPUT",()=>"Invalid Value. Expected Input"),g=Object(n.a)("INVALID_VALUE_MAP_STACK_ITEM",()=>"Invalid Value. Expected MapStackItem"),y=Object(n.a)("INVALID_VALUE_OUTPUT",()=>"Invalid Value. Expected Output"),m=Object(n.a)("INVALID_VALUE_ACCOUNT",()=>"Invalid Value. Expected Account"),v=Object(n.a)("INVALID_VALUE_ASSET",()=>"Invalid Value. Expected Asset"),w=Object(n.a)("INVALID_VALUE_CONTRACT",()=>"Invalid Value. Expected Contract"),S=Object(n.a)("INVALID_VALUE_VALIDATOR",()=>"Invalid Value. Expected Validator"),I=Object(n.a)("INVALID_VALUE_ITERATOR",()=>"Invalid Value. Expected Iterator"),T=Object(n.a)("INVALID_VALUE_STORAGE_CONTEXT_STACK_ITEM",()=>"Invalid Value. Expected StorageContextStackItem"),x=Object(n.a)("UNSUPPORTED_STACK_ITEM_SERDE",()=>"Unsupported StackItem serde."),E=Object(n.a)("INVALID_STORAGE_STACK_ITEM_ENUMERATOR",()=>"Current is not set. The enumerator has been fully consumed or has not been initialized"),k=Object(n.a)("INVALID_STORAGE_STACK_ITEM_ITERATOR",()=>"Current is not set. The iterator has been fully consumed or has not been initialized"),B=Object(n.a)("MISSING_STACK_ITEM_KEY",()=>"Map does not contain key."),A=Object(n.a)("INVALID_RECURSIVE_SERIALIZE",()=>"Attempted to serialize a recursive structure."),O=Object(n.a)("INTEGER_TOO_LARGE",()=>"Integer too large. Max size is 256 bits.")},1402:function(e,t,a){"use strict";a.d(t,"a",function(){return c});a(85);var n=a(90),s=a(107),r=a(199),i=a(859),o=a(860);class c extends n.InputModel{constructor(){super(...arguments),this.equals=i.a.equals(c,this,e=>s.b.uInt256Equal(this.hash,e.hash)&&e.index===this.index),this.toKeyString=i.a.toKeyString(c,()=>"".concat(this.hashHex,":").concat(this.index))}static deserializeWireBase(e){let{reader:t}=e;return new this({hash:t.readUInt256(),index:t.readUInt16LE()})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new o.a(e.buffer)})}serializeJSON(e){return{txid:r.a.writeUInt256(this.hash),vout:this.index}}}},1403:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s});a(85);const n=e=>{const t=new Set(e.map(e=>e.toKeyString()));return e.length!==t.size},s=(e,t)=>{const a=new Set(e.map(e=>e.toKeyString()));return t.some(e=>a.has(e.toKeyString()))}},1404:function(e,t,a){"use strict";a.d(t,"a",function(){return p});a(36),a(85);var n=a(162),s=a(107),r=a(152),i=a(771),o=a(2293),c=a(184),d=a(870),u=a(710),l=a(2294),h=a(90),f=a(859),b=a(860);class p extends i.a{constructor(e){let{version:t,previousHash:a,timestamp:s,index:r,consensusData:i,nextConsensus:c,script:u,hash:l,transactions:h,merkleRoot:b=o.a.computeRoot(h.map(e=>e.hash))}=e;super({version:t,previousHash:a,merkleRoot:b,timestamp:s,index:r,consensusData:i,nextConsensus:c,script:u,hash:l}),this.sizeExclusive=f.a.lazy(()=>n.a.sizeOfArray(this.transactions,e=>e.size)),this.headerInternal=f.a.lazy(()=>new d.a({version:this.version,previousHash:this.previousHash,merkleRoot:this.merkleRoot,timestamp:this.timestamp,index:this.index,consensusData:this.consensusData,nextConsensus:this.nextConsensus,script:this.script})),this.transactions=h}static async calculateNetworkFee(e,t){return(await Promise.all(t.map(async t=>t.getNetworkFee(e)))).reduce((e,t)=>e.add(t),f.a.ZERO)}static deserializeWireBase(e){const{reader:t}=e,a=super.deserializeBlockBaseWireBase(e),n=t.readArray(()=>Object(l.b)(e),65536);if(0===n.length)throw new s.a("Expected at least one transcaction in the block");const r=o.a.computeRoot(n.map(e=>e.hash));if(!s.b.uInt256Equal(r,a.merkleRoot))throw new s.a("Invalid merkle root");return new this({version:a.version,previousHash:a.previousHash,merkleRoot:a.merkleRoot,timestamp:a.timestamp,index:a.index,consensusData:a.consensusData,nextConsensus:a.nextConsensus,script:a.script,transactions:n})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new b.a(e.buffer)})}get header(){return this.headerInternal()}clone(e){let{transactions:t,script:a}=e;return new p({version:this.version,previousHash:this.previousHash,merkleRoot:this.merkleRoot,timestamp:this.timestamp,index:this.index,consensusData:this.consensusData,nextConsensus:this.nextConsensus,transactions:t,script:a})}async getNetworkFee(e){return p.calculateNetworkFee(e,this.transactions)}getSystemFee(e){return this.transactions.reduce((t,a)=>t.add(a.getSystemFee(e)),f.a.ZERO)}async verify(e){const{completely:t=!1}=e;if(0===this.transactions.length||this.transactions[0].type!==h.TransactionTypeModel.Miner||this.transactions.slice(1).some(e=>e.type===h.TransactionTypeModel.Miner))throw new c.f("Invalid miner transaction in block.");await Promise.all([this.verifyBase(e),t?this.verifyComplete(e):Promise.resolve()])}serializeWireBase(e){super.serializeWireBase(e),e.writeArray(this.transactions,t=>t.serializeWireBase(e))}async serializeJSON(e){const t=super.serializeBlockBaseJSON(e);return{version:t.version,hash:t.hash,previousblockhash:t.previousblockhash,merkleroot:t.merkleroot,time:t.time,index:t.index,nonce:t.nonce,nextconsensus:t.nextconsensus,script:t.script,tx:await Promise.all(this.transactions.map(t=>t.serializeJSON(e))),size:t.size,confirmations:t.confirmations}}async verifyBase(e){let{genesisBlock:t,tryGetBlock:a,tryGetHeader:n,verifyScript:r}=e;if(s.b.uInt256Equal(this.hash,t.hash))return;if(void 0!==await a({hashOrIndex:this.hash}))return;const i=await n({hashOrIndex:this.previousHash});if(void 0===i)throw new c.f("Previous header does not exist.");if(i.index+1!==this.index)throw new c.f("Previous index + 1 does not match index.");if(i.timestamp>=this.timestamp)throw new c.f("Previous timestamp is greater than block.");const{failureMessage:o}=await r({scriptContainer:{type:u.a.Block,value:this},hash:i.nextConsensus,witness:this.script});if(void 0!==o)throw new c.f(o)}async verifyComplete(e){await Promise.all([this.verifyConsensus(e),this.verifyTransactions(e),this.verifyNetworkFee(e)])}async verifyConsensus(e){let{getValidators:t}=e;const a=await t(this.transactions);if(!s.b.uInt160Equal(this.nextConsensus,r.a.getConsensusAddress(a)))throw new c.f("Invalid next consensus address")}async verifyTransactions(e){const t=(await Promise.all(this.transactions.map(async t=>t.verify({isSpent:e.isSpent,getAsset:e.getAsset,getOutput:e.getOutput,tryGetAccount:e.tryGetAccount,calculateClaimAmount:e.calculateClaimAmount,standbyValidators:e.standbyValidators,getAllValidators:e.getAllValidators,verifyScript:e.verifyScript,currentHeight:e.currentHeight,governingToken:e.governingToken,utilityToken:e.utilityToken,fees:e.fees,registerValidatorFee:e.registerValidatorFee})))).filter(e=>e.some(e=>{let{failureMessage:t}=e;return void 0!==t}));if(t.length>0){const e=t[0].find(e=>{let{failureMessage:t}=e;return void 0!==t});if(void 0!==e&&void 0!==e.failureMessage)throw new c.f(e.failureMessage)}}async verifyNetworkFee(e){const t=await this.getNetworkFee({getOutput:e.getOutput,governingToken:e.governingToken,utilityToken:e.utilityToken,fees:e.fees,registerValidatorFee:e.registerValidatorFee}),a=this.transactions.find(e=>e.type===h.TransactionTypeModel.Miner);if(void 0===a)throw new c.f("Missing miner transaction");const n=a.outputs.reduce((e,t)=>e.add(t.value),f.a.ZERO);if(!t.eq(n))throw new c.f("Miner output does not equal network fee.")}}},1405:function(e,t,a){"use strict";a.d(t,"d",function(){return s}),a.d(t,"b",function(){return r}),a.d(t,"c",function(){return i}),a.d(t,"a",function(){return o});var n=a(107);const s=e=>n.b.uInt256ToBuffer(e),r=e=>n.b.bufferToUInt256(e),i=e=>n.b.uInt256ToBuffer(e),o=e=>n.b.bufferToUInt256(e)},1406:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(107),s=a(90),r=a(162),i=a(859),o=a(860);class c{constructor(e){let{hash:t,lastGlobalTransactionIndex:a,lastGlobalActionIndex:o,systemFee:d}=e;this.equals=i.a.equals(c,this,e=>n.b.uInt256Equal(this.hash,e.hash)),this.serializeWire=Object(s.createSerializeWire)(this.serializeWireBase.bind(this)),this.hash=t,this.hashHex=n.b.uInt256ToHex(t),this.lastGlobalTransactionIndex=a,this.lastGlobalActionIndex=o,this.systemFee=d,this.sizeInternal=i.a.lazy(()=>r.a.sizeOfUInt256+r.a.sizeOfFixed8)}static deserializeWireBase(e){let{reader:t}=e;const a=t.readUInt256(),n=t.readInt64LE(),s=t.readInt64LE();return new this({hash:a,systemFee:t.readFixed8(),lastGlobalTransactionIndex:n,lastGlobalActionIndex:s})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new o.a(e.buffer)})}get size(){return this.sizeInternal()}serializeWireBase(e){e.writeUInt256(this.hash),e.writeInt64LE(this.lastGlobalTransactionIndex),e.writeInt64LE(this.lastGlobalActionIndex),e.writeFixed8(this.systemFee)}}},1407:function(e,t,a){"use strict";a.d(t,"a",function(){return h});a(36),a(85);var n=a(1400),s=a.n(n),r=a(107),i=a(162),o=a(199),c=a(393),d=a(90),u=a(859),l=a(860);class h extends c.a{constructor(e){let{version:t,hash:a,isFrozen:n=!1,votes:s=[],balances:o={}}=e;super({version:t}),this.equals=u.a.equals(h,this,e=>r.b.uInt160Equal(this.hash,e.hash)),this.toKeyString=u.a.toKeyString(h,()=>this.hashHex),this.serializeWire=Object(d.createSerializeWire)(this.serializeWireBase.bind(this)),this.hash=a,this.hashHex=r.b.uInt160ToHex(a),this.isFrozen=n,this.votes=s,this.balances=o,this.sizeInternal=u.a.lazy(()=>i.a.sizeOfUInt8+i.a.sizeOfUInt160+i.a.sizeOfBoolean+i.a.sizeOfArray(this.votes,e=>i.a.sizeOfECPoint(e))+i.a.sizeOfObject(this.balances,()=>i.a.sizeOfUInt256+i.a.sizeOfFixed8))}static deserializeWireBase(e){const{reader:t}=e,a=t.readUInt8(),n=t.readUInt160(),s=t.readBoolean(),i=t.readArray(()=>t.readECPoint()),o=t.readObject(()=>{return{key:r.b.uInt256ToHex(t.readUInt256()),value:t.readFixed8()}});return new h({version:a,hash:n,isFrozen:s,votes:i,balances:o})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new l.a(e.buffer)})}get size(){return this.sizeInternal()}isDeletable(){const e=Object.values(this.balances);return!this.isFrozen&&0===this.votes.length&&(0===e.length||e.every(e=>void 0!==e&&e.lte(u.a.ZERO)))}getBalance(e){const t=this.balances[e];return void 0===t?u.a.ZERO:t}update(e){let{isFrozen:t=this.isFrozen,votes:a=this.votes,balances:n=this.balances}=e;return new h({hash:this.hash,isFrozen:t,votes:a,balances:n})}serializeWireBase(e){e.writeUInt8(this.version),e.writeUInt160(this.hash),e.writeBoolean(this.isFrozen),e.writeArray(this.votes,t=>{e.writeECPoint(t)});const t=s()(this.balances,e=>void 0!==e&&e.gt(u.a.ZERO));e.writeObject(t,(t,a)=>{e.writeUInt256(r.b.stringToUInt256(t)),e.writeFixed8(a)})}async serializeJSON(e){const[t,a]=await Promise.all([e.getUnspent(this.hash),e.getUnclaimed(this.hash)]);return{version:this.version,script_hash:o.a.writeUInt160(this.hash),frozen:this.isFrozen,votes:this.votes.map(e=>o.a.writeECPoint(e)),balances:Object.entries(this.balances).map(e=>{let[t,a]=e;return{asset:o.a.writeUInt256(t),value:o.a.writeFixed8(a)}}),unspent:t.map(t=>t.serializeJSON(e)),unclaimed:a.map(t=>t.serializeJSON(e))}}}},1408:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(772);class s extends n.a{}},1409:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(772);class s extends n.a{}},141:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(860);function s(e){return t=>e({context:t.context,reader:new n.a(t.buffer)})}},1410:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(199),s=a(90),r=a(860);class i{constructor(e){let{type:t,version:a,index:n,scriptHash:r}=e;this.serializeWire=Object(s.createSerializeWire)(this.serializeWireBase.bind(this)),this.type=t,this.version=void 0===a?this.constructor.VERSION:a,this.index=n,this.scriptHash=r}static deserializeWireBase(e){throw new Error("Not Implemented")}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new r.a(e.buffer)})}serializeWireBase(e){e.writeUInt8(this.type),e.writeUInt8(this.version),e.writeUInt64LE(this.index),e.writeUInt160(this.scriptHash)}serializeActionBaseJSON(e){return{version:this.version,index:n.a.writeUInt64(this.index),scriptHash:n.a.writeUInt160(this.scriptHash)}}}i.VERSION=0,i.deserializeActionBaseWireBase=e=>{let{reader:t}=e;return{type:t.readUInt8(),version:t.readUInt8(),index:t.readUInt64LE(),scriptHash:t.readUInt160()}}},1411:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return f});var n=a(107),s=a(162),r=a(199),i=a(152),o=a(393),c=a(831),d=a(90),u=a(859),l=a(860);const h=Object(c.a)("INVALID_ASSET",e=>e);class f extends o.a{constructor(e){let{version:t,hash:a,type:r,name:i,amount:o,available:c=u.a.ZERO,precision:l,feeMode:h=0,fee:p=u.a.ZERO,feeAddress:g=n.b.ZERO_UINT160,owner:y,admin:m,issuer:v,expiration:w,isFrozen:S=!1}=e;super({version:t}),this.equals=u.a.equals(f,this,e=>n.b.uInt256Equal(this.hash,e.hash)),this.toKeyString=u.a.toKeyString(f,()=>this.hashHex),this.serializeWire=Object(d.createSerializeWire)(this.serializeWireBase.bind(this)),b({name:i,type:r,amount:o,precision:l}),this.hash=a,this.hashHex=n.b.uInt256ToHex(a),this.type=r,this.name=i,this.amount=o,this.available=c,this.precision=l,this.feeMode=h,this.fee=p,this.feeAddress=g,this.owner=y,this.admin=m,this.issuer=v,this.expiration=w,this.isFrozen=S,this.sizeInternal=u.a.lazy(()=>s.a.sizeOfUInt8+s.a.sizeOfUInt256+s.a.sizeOfUInt8+s.a.sizeOfVarString(this.name)+s.a.sizeOfFixed8+s.a.sizeOfFixed8+s.a.sizeOfUInt8+s.a.sizeOfUInt8+s.a.sizeOfFixed8+s.a.sizeOfUInt160+s.a.sizeOfECPoint(this.owner)+s.a.sizeOfUInt160+s.a.sizeOfUInt160+s.a.sizeOfUInt32LE+s.a.sizeOfBoolean)}static deserializeWireBase(e){let{reader:t}=e;const a=t.readUInt8(),n=t.readUInt256(),s=Object(d.assertAssetType)(t.readUInt8()),r=t.readVarString(),i=t.readFixed8(),o=t.readFixed8(),c=t.readUInt8();t.readUInt8();const u=t.readFixed8(),l=t.readUInt160(),h=t.readECPoint(),b=t.readUInt160(),p=t.readUInt160(),g=t.readUInt32LE(),y=t.readBoolean();return new f({version:a,hash:n,type:s,name:r,amount:i,available:o,precision:c,fee:u,feeAddress:l,owner:h,admin:b,issuer:p,expiration:g,isFrozen:y})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new l.a(e.buffer)})}get size(){return this.sizeInternal()}update(e){let{available:t=this.available,expiration:a=this.expiration,isFrozen:n=this.isFrozen}=e;return new f({hash:this.hash,type:this.type,name:this.name,amount:this.amount,precision:this.precision,fee:this.fee,feeAddress:this.feeAddress,owner:this.owner,admin:this.admin,issuer:this.issuer,available:t,expiration:a,isFrozen:n})}serializeWireBase(e){e.writeUInt8(this.version),e.writeUInt256(this.hash),e.writeUInt8(this.type),e.writeVarString(this.name),e.writeFixed8(this.amount),e.writeFixed8(this.available),e.writeUInt8(this.precision),e.writeUInt8(this.feeMode),e.writeFixed8(this.fee),e.writeUInt160(this.feeAddress),e.writeECPoint(this.owner),e.writeUInt160(this.admin),e.writeUInt160(this.issuer),e.writeUInt32LE(this.expiration),e.writeBoolean(this.isFrozen)}serializeJSON(e){let t=this.name;try{t=JSON.parse(t)}catch(e){}return{version:this.version,id:r.a.writeUInt256(this.hash),type:Object(d.toJSONAssetType)(this.type),name:t,amount:r.a.writeFixed8(this.amount),available:r.a.writeFixed8(this.available),precision:this.precision,owner:r.a.writeECPoint(this.owner),admin:i.a.scriptHashToAddress({addressVersion:e.addressVersion,scriptHash:this.admin}),issuer:i.a.scriptHashToAddress({addressVersion:e.addressVersion,scriptHash:this.issuer}),expiration:this.expiration,frozen:this.isFrozen}}}const b=t=>{let{name:a,type:s,amount:r,precision:i}=t;if(s===d.AssetTypeModel.CreditFlag||s===d.AssetTypeModel.DutyFlag)throw new h("Asset type cannot be CREDIT_FLAG or DUTY_FLAG, received: ".concat(s));const o=e.from(a,"utf8");if(o.length>1024)throw new h("Name too long. Max: ".concat(1024,", Received: ").concat(o.length));if(r.lte(u.a.ZERO)&&!r.eq(n.b.NEGATIVE_SATOSHI_FIXED8))throw new h("Amount must be greater than 0. (received ".concat(r,")"));if(s===d.AssetTypeModel.Invoice&&!r.eq(n.b.NEGATIVE_SATOSHI_FIXED8))throw new h("Invoice assets must have unlimited amount.");if(i>8)throw new h("Max precision is 8. Received: ".concat(i));if(!r.eq(u.a.NEGATIVE_SATOSHI)&&!r.mod(u.a.TEN.pow(u.a.EIGHT.subn(i))).eq(u.a.ZERO))throw new h("Invalid precision for amount.")}}).call(this,a(92).Buffer)},1412:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(162),s=a(393),r=a(90),i=a(859),o=a(860);class c extends s.a{constructor(e){let{version:t,hash:a,blockHash:s,startHeight:o,index:c,globalIndex:d,endHeights:u={},claimed:l={}}=e;super({version:t}),this.serializeWire=Object(r.createSerializeWire)(this.serializeWireBase.bind(this)),this.hash=a,this.blockHash=s,this.startHeight=o,this.index=c,this.globalIndex=d,this.endHeights=u,this.claimed=l,this.sizeInternal=i.a.lazy(()=>n.a.sizeOfUInt8+n.a.sizeOfUInt256+n.a.sizeOfUInt32LE+n.a.sizeOfObject(this.endHeights,()=>n.a.sizeOfUInt32LE+n.a.sizeOfUInt32LE)+n.a.sizeOfObject(this.claimed,()=>n.a.sizeOfUInt32LE+n.a.sizeOfBoolean))}static deserializeWireBase(e){let{reader:t}=e;return new this({version:t.readUInt8(),hash:t.readUInt256(),blockHash:t.readUInt256(),startHeight:t.readUInt32LE(),index:t.readUInt32LE(),globalIndex:t.readUInt64LE(),endHeights:t.readObject(()=>{return{key:t.readUInt32LE(),value:t.readUInt32LE()}}),claimed:t.readObject(()=>{return{key:t.readUInt32LE(),value:t.readBoolean()}})})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new o.a(e.buffer)})}get size(){return this.sizeInternal()}update(e){let{endHeights:t=this.endHeights,claimed:a=this.claimed}=e;return new c({version:this.version,hash:this.hash,blockHash:this.blockHash,startHeight:this.startHeight,index:this.index,globalIndex:this.globalIndex,endHeights:t,claimed:a})}serializeWireBase(e){e.writeUInt8(this.version),e.writeUInt256(this.hash),e.writeUInt256(this.blockHash),e.writeUInt32LE(this.startHeight),e.writeUInt32LE(this.index),e.writeUInt64LE(this.globalIndex),e.writeObject(this.endHeights,(t,a)=>{e.writeUInt32LE(t),e.writeUInt32LE(a)}),e.writeObject(this.claimed,(t,a)=>{e.writeUInt32LE(t),e.writeBoolean(a)})}}},1413:function(e,t,a){"use strict";a.d(t,"a",function(){return d});a(181);var n=a(107),s=a(162),r=a(199),i=a(90),o=a(859),c=a(860);class d{constructor(e){let{hash:t,key:a,value:r,flags:c}=e;this.equals=o.a.equals(d,this,e=>n.b.uInt160Equal(this.hash,e.hash)&&this.key.equals(e.key)&&this.value.equals(e.value)&&this.flags===e.flags),this.serializeWire=Object(i.createSerializeWire)(this.serializeWireBase.bind(this)),this.hash=t,this.key=a,this.value=r,this.flags=c,this.sizeInternal=o.a.lazy(()=>s.a.sizeOfUInt160+s.a.sizeOfVarBytesLE(this.key)+s.a.sizeOfVarBytesLE(this.value)+s.a.sizeOfUInt8)}static deserializeWireBase(e){let{reader:t}=e;return new this({hash:t.readUInt160(),key:t.readVarBytesLE(),value:t.readVarBytesLE(),flags:t.readUInt8()})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new c.a(e.buffer)})}get size(){return this.sizeInternal()}update(e){let{value:t,flags:a}=e;return new d({hash:this.hash,key:this.key,value:t,flags:a})}serializeWireBase(e){e.writeUInt160(this.hash),e.writeVarBytesLE(this.key),e.writeVarBytesLE(this.value),e.writeUInt8(this.flags)}serializeJSON(e){return{hash:r.a.writeUInt160(this.hash),key:r.a.writeBuffer(this.key),value:r.a.writeBuffer(this.value),flags:Object(i.toJSONStorageFlags)(this.flags)}}}},1414:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(107),s=a(162),r=a(199),i=a(393),o=a(90),c=a(859),d=a(860);class u extends i.a{constructor(e){let{version:t,publicKey:a,registered:r=!1,votes:i=c.a.ZERO}=e;super({version:t}),this.equals=c.a.equals(u,this,e=>n.b.ecPointEqual(this.publicKey,e.publicKey)),this.toKeyString=c.a.toKeyString(u,()=>n.b.ecPointToString(this.publicKey)),this.serializeWire=Object(o.createSerializeWire)(this.serializeWireBase.bind(this)),this.publicKey=a,this.registered=r,this.votes=i,this.sizeInternal=c.a.lazy(()=>s.a.sizeOfECPoint(this.publicKey)+s.a.sizeOfBoolean+s.a.sizeOfFixed8)}static deserializeWireBase(e){let{reader:t}=e;return new this({version:t.readUInt8(),publicKey:t.readECPoint(),registered:t.readBoolean(),votes:t.readFixed8()})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new d.a(e.buffer)})}get size(){return this.sizeInternal()}update(e){let{votes:t=this.votes,registered:a=this.registered}=e;return new u({version:this.version,publicKey:this.publicKey,registered:a,votes:t})}serializeWireBase(e){e.writeUInt8(this.version),e.writeECPoint(this.publicKey),e.writeBoolean(this.registered),e.writeFixed8(this.votes)}serializeJSON(e){return{version:this.version,publicKey:r.a.writeECPoint(this.publicKey),registered:this.registered,votes:r.a.writeFixed8(this.votes)}}}},1415:function(e,t,a){"use strict";a.d(t,"a",function(){return u});a(85);var n=a(162),s=a(107),r=a(2300),i=a(90),o=a(2301),c=a(859),d=a(860);class u{constructor(e){let{hash:t,assetHash:a,contractHashes:s,deletedContractHashes:r,migratedContractHashes:o,voteUpdates:d,blockIndex:u,transactionIndex:l,actionIndexStart:h,actionIndexStop:f,result:b,storageChanges:p}=e;this.serializeWire=Object(i.createSerializeWire)(this.serializeWireBase.bind(this)),this.hash=t,this.assetHash=a,this.contractHashes=s,this.deletedContractHashes=r,this.migratedContractHashes=o,this.voteUpdates=d,this.blockIndex=u,this.transactionIndex=l,this.actionIndexStart=h,this.actionIndexStop=f,this.result=b,this.storageChanges=p,this.sizeInternal=c.a.lazy(()=>n.a.sizeOfUInt256+n.a.sizeOfUInt256+n.a.sizeOfArray(this.contractHashes,()=>n.a.sizeOfUInt160)+n.a.sizeOfArray(this.deletedContractHashes,()=>n.a.sizeOfUInt160)+n.a.sizeOfArray(this.migratedContractHashes,()=>n.a.sizeOfUInt160)+n.a.sizeOfArray(this.voteUpdates,e=>n.a.sizeOfUInt160+n.a.sizeOfArray(e[1],e=>n.a.sizeOfECPoint(e)))+n.a.sizeOfUInt32LE+n.a.sizeOfUInt32LE+n.a.sizeOfUInt64LE+n.a.sizeOfUInt64LE+this.result.size)}static deserializeWireBase(e){const{reader:t}=e,a=t.readUInt256(),n=t.readUInt256(),i=t.readArray(()=>t.readUInt160()),c=t.readArray(()=>t.readUInt160()),d=t.readArray(()=>{return[t.readUInt160(),t.readUInt160()]}),u=t.readArray(()=>{return[t.readUInt160(),t.readArray(()=>t.readECPoint())]}),l=t.readUInt32LE(),h=t.readUInt32LE(),f=t.readUInt64LE(),b=t.readUInt64LE(),p=Object(r.a)(e),g=t.readArray(()=>Object(o.a)(e));return new this({hash:a,assetHash:s.b.uInt256Equal(n,s.b.ZERO_UINT256)?void 0:n,contractHashes:i,deletedContractHashes:c,migratedContractHashes:d,voteUpdates:u,blockIndex:l,transactionIndex:h,actionIndexStart:f,actionIndexStop:b,result:p,storageChanges:g})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new d.a(e.buffer)})}get size(){return this.sizeInternal()}serializeWireBase(e){e.writeUInt256(this.hash),e.writeUInt256(void 0===this.assetHash?s.b.ZERO_UINT256:this.assetHash),e.writeArray(this.contractHashes,t=>{e.writeUInt160(t)}),e.writeArray(this.deletedContractHashes,t=>{e.writeUInt160(t)}),e.writeArray(this.migratedContractHashes,t=>{let[a,n]=t;e.writeUInt160(a),e.writeUInt160(n)}),e.writeArray(this.voteUpdates,t=>{let[a,n]=t;e.writeUInt160(a),e.writeArray(n,t=>{e.writeECPoint(t)})}),e.writeUInt32LE(this.blockIndex),e.writeUInt32LE(this.transactionIndex),e.writeUInt64LE(this.actionIndexStart),e.writeUInt64LE(this.actionIndexStop),this.result.serializeWireBase(e),e.writeArray(this.storageChanges,t=>{t.serializeWireBase(e)})}}},1416:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(125),s=a(162),r=a(90),i=a(2299),o=a(860);class c{constructor(e){let{state:t,gasConsumed:a,gasCost:i,stack:o}=e;this.serializeWire=Object(r.createSerializeWire)(this.serializeWireBase.bind(this)),this.state=t,this.gasConsumed=a,this.gasCost=i,this.stack=o,this.sizeExclusive=()=>0,this.sizeInternal=n.a.lazy(()=>this.sizeExclusive()+s.a.sizeOfUInt8+s.a.sizeOfFixed8+s.a.sizeOfFixed8+s.a.sizeOfArray(this.stack,e=>e.size))}static deserializeInvocationResultWireBase(e){const{reader:t}=e,a=t.readUInt8(),n=t.readFixed8(),s=t.readFixed8(),o=t.readArray(()=>Object(i.a)(e));return{state:Object(r.assertVMState)(a),gasConsumed:n,gasCost:s,stack:o}}static deserializeWireBase(e){throw new Error("Not Implemented")}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new o.a(e.buffer)})}get size(){return this.sizeInternal()}serializeWireBase(e){e.writeUInt8(this.state),e.writeFixed8(this.gasConsumed),e.writeFixed8(this.gasCost),e.writeArray(this.stack,t=>t.serializeWireBase(e))}}},1417:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(1418);class s extends n.a{constructor(e){let{type:t,hash:a,key:n,value:s}=e;super({type:t,hash:a,key:n}),this.value=s}static deserializeStorageChangeAddModifyWireBase(e){const{type:t,hash:a,key:n}=super.deserializeStorageChangeWireBase(e),{reader:s}=e;return{type:t,hash:a,key:n,value:s.readVarBytesLE()}}serializeWireBase(e){super.serializeWireBase(e),e.writeVarBytesLE(this.value)}}},1418:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(125),s=a(162),r=a(90),i=a(860),o=a(711);class c{constructor(e){let{type:t,hash:a,key:i}=e;this.serializeWire=Object(r.createSerializeWire)(this.serializeWireBase.bind(this)),this.type=t,this.hash=a,this.key=i,this.sizeExclusive=()=>0,this.sizeInternal=n.a.lazy(()=>this.sizeExclusive()+s.a.sizeOfUInt8+s.a.sizeOfUInt160+s.a.sizeOfVarBytesLE(this.key))}static deserializeStorageChangeWireBase(e){const{reader:t}=e,a=t.readUInt8(),n=t.readUInt160(),s=t.readVarBytesLE();return{type:Object(o.b)(a),hash:n,key:s}}static deserializeWireBase(e){throw new Error("Not Implemented")}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new i.a(e.buffer)})}get size(){return this.sizeInternal()}serializeWireBase(e){e.writeUInt8(this.type),e.writeUInt160(this.hash),e.writeVarBytesLE(this.key)}}},1419:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(90),s=a(125),r=a(162),i=a(393),o=a(860);class c extends i.a{constructor(){let{version:e,votes:t=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super({version:e}),this.serializeWire=Object(n.createSerializeWire)(this.serializeWireBase.bind(this)),this.votes=t,this.sizeInternal=s.a.lazy(()=>r.a.sizeOfUInt8+r.a.sizeOfArray(this.votes,()=>r.a.sizeOfFixed8))}static deserializeWireBase(e){const{reader:t}=e;return new this({version:t.readUInt8(),votes:t.readArray(()=>t.readFixed8())})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new o.a(e.buffer)})}get size(){return this.sizeInternal()}update(e){let{votes:t=this.votes}=e;return new c({version:this.version,votes:t})}serializeWireBase(e){e.writeUInt8(this.version),e.writeArray(this.votes,t=>{e.writeFixed8(void 0===t?s.a.ZERO:t)})}}},1425:function(e,t,a){"use strict";a.d(t,"a",function(){return y}),a.d(t,"b",function(){return m});a(36),a(85);var n=a(875),s=a.n(n),r=a(280),i=a.n(r),o=a(107),c=a(859),d=a(860),u=a(1414),l=a(1419),h=a(90),f=a(1884),b=a(101),p=a(1936);const g=async(e,t,a)=>{let n=await Promise.all(a.inputs.map(async t=>{return{output:await e.output.get(t),negative:!0}}));n=n.concat(a.outputs.map(e=>({output:e,negative:!1}))),await Promise.all(n.map(async a=>{let{output:n,negative:s}=a;return(async(e,t,a,n)=>{let{value:s}=a;n&&(s=s.neg());const[r]=await Promise.all([t.getAccount(a.address),t.updateAccountBalance(a.address,a.asset,s)]);o.b.uInt256Equal(a.asset,e.settings.governingToken.hash)&&r.votes.length>0&&await Promise.all([Promise.all(r.votes.map(async e=>t.updateValidatorVotes(e,s))),t.updateValidatorsCountVotes(r.votes.length-1,s)])})(e,t,n,s)}));const s=[...new Set(n.map(e=>{let{output:t}=e;return o.b.uInt160ToHex(t.address)}))].map(e=>o.b.hexToUInt160(e)),r=await Promise.all(s.map(async e=>{return(await t.getAccount(e)).votes})),i=[...new Set(r.reduce((e,t)=>e.concat(t.map(e=>o.b.ecPointToHex(e))),[]))].map(e=>o.b.hexToECPoint(e));await Promise.all(i.map(async e=>{const a=await t.getValidator(e);!a.registered&&a.votes.eq(c.a.ZERO)&&await t.deleteValidator(e)}))},y=async e=>{let{transactions:t,getAccount:a,governingTokenHash:n}=e;const s={},r={},u={},l=[],h=t.reduce((e,t)=>e.concat(t.descriptors),[]),f=h.filter(e=>64===e.type),b=Object.entries(i()(f,e=>o.b.uInt160ToHex(o.b.bufferToUInt160(e.key))));await Promise.all(b.map(async e=>{let[t,i]=e;const u=await a(o.b.hexToUInt160(t)),h=u.getBalance(n);for(const e of u.votes){const t=o.b.ecPointToHex(e);r[t]=(void 0===r[t]?c.a.ZERO:r[t]).sub(h)}const f=i[i.length-1],b=new d.a(f.value),p=b.readArray(()=>b.readECPoint());p.length!==u.votes.length&&(u.votes.length>0&&(l[u.votes.length-1]=(void 0===l[u.votes.length-1]?c.a.ZERO:l[u.votes.length-1]).sub(h)),p.length>0&&(l[p.length-1]=(void 0===l[p.length-1]?c.a.ZERO:l[p.length-1]).add(h))),s[t]=p;for(const e of p){const t=o.b.ecPointToHex(e);r[t]=(void 0===r[t]?c.a.ZERO:r[t]).add(h)}}));const p=h.filter(e=>72===e.type);for(const e of p){const t=o.b.bufferToECPoint(e.key);u[o.b.ecPointToHex(t)]=e.value.some(e=>0!==e)}const g={};for(const[e,t]of Object.entries(r))g[e]={votes:t};for(const[e,t]of Object.entries(u)){const a=void 0===g[e]?{}:g[e];g[e]={registered:t,votes:a.votes}}return{accountChanges:s,validatorChanges:g,validatorsCountChanges:l}},m=async(e,t)=>{const a=new p.a(e);await Promise.all(t.map(async t=>g(e,a,t)));const{validatorChanges:n,validatorsCountChanges:r}=await y({transactions:t.filter(e=>e.type===h.TransactionTypeModel.State&&e instanceof f.a),getAccount:async e=>a.getAccount(e),governingTokenHash:e.settings.governingToken.hashHex});await(async e=>{let{validatorChanges:t,validatorsCountChanges:a,tryGetValidatorsCount:n,addValidatorsCount:s,updateValidatorsCount:r,tryGetValidator:i,addValidator:d,deleteValidator:h,updateValidator:f}=e;const b=await n(),p=void 0===b?[]:[...b.votes];[...a.entries()].forEach(e=>{let[t,a]=e;p[t]=a}),await Promise.all([Promise.all(Object.entries(t).map(async e=>{let[t,{registered:a,votes:n}]=e;const s=o.b.hexToECPoint(t),r=await i({publicKey:s});void 0===r?await d(new u.a({publicKey:s,registered:a,votes:n})):(void 0!==a&&!a||void 0===a&&!r.registered)&&(void 0!==n&&n.eq(c.a.ZERO)||void 0===n&&r.votes.eq(c.a.ZERO))?await h({publicKey:r.publicKey}):await f(r,{votes:n,registered:a})})),void 0===b?s(new l.a({votes:p})):r(b,{votes:p})])})({validatorChanges:n,validatorsCountChanges:r,tryGetValidatorsCount:async()=>a.getValidatorsCount(),addValidatorsCount:async e=>a.addValidatorsCount(e),updateValidatorsCount:async e=>{await a.updateValidatorsCount(e)},tryGetValidator:async e=>a.getValidator(e.publicKey),addValidator:async e=>a.addValidator(e),deleteValidator:async e=>a.deleteValidator(e.publicKey),updateValidator:async(e,t)=>a.updateValidator(e.publicKey,t)});const[i,d]=await Promise.all([a.getValidatorsCount(),a.getAllValidators()]),m=Math.max(c.a.weightedAverage(c.a.weightedFilter(i.votes.map((e,t)=>({count:t,votes:void 0===e?c.a.ZERO:e})).filter(e=>{let{votes:t}=e;return t.gt(c.a.ZERO)}),.25,.75,e=>{let{count:t}=e;return new b.BN(t)}).map(e=>{let[{count:t},a]=e;return{value:t,weight:a}})),e.settings.standbyValidators.length),v=new Set(e.settings.standbyValidators.map(e=>o.b.ecPointToHex(e))),w=new Set(s()(d.filter(e=>e.registered&&e.votes.gt(c.a.ZERO)||v.has(o.b.ecPointToHex(e.publicKey))).sort((e,t)=>e.votes.eq(t.votes)?o.b.ecPointCompare(e.publicKey,t.publicKey):-e.votes.cmp(t.votes)).map(e=>o.b.ecPointToHex(e.publicKey)),m)),S=[...v];for(let e=0;e<S.length&&w.size<m;e+=1)w.add(S[e]);return[...w].map(e=>o.b.hexToECPoint(e)).sort((e,t)=>o.b.ecPointCompare(e,t))}},1426:function(e,t,a){"use strict";a.d(t,"c",function(){return s}),a.d(t,"f",function(){return r}),a.d(t,"e",function(){return i}),a.d(t,"d",function(){return o}),a.d(t,"a",function(){return c}),a.d(t,"b",function(){return d});var n=a(831);const s=Object(n.a)("GENESIS_BLOCK_NOT_REGISTERED",()=>"Genesis block was not registered with storage."),r=(Object(n.a)("SCRIPT_VERIFY",e=>e),Object(n.a)("WITNESS_VERIFY",()=>"Witness verification failed.")),i=Object(n.a)("UNKNOWN_VERIFY",e=>e),o=Object(n.a)("INVALID_CLAIM",(e,t)=>"Invalid Claim. Coin with asset: ".concat(e," does not match governing hash: ").concat(t)),c=Object(n.a)("COIN_CLAIMED",(e,t)=>"Coin with asset: ".concat(e,", value: ").concat(t," is already claimed.")),d=Object(n.a)("COIN_UNSPENT",e=>"".concat(e," coins unspent."))},1427:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return r});var n,s=a(107);!function(e){e[e.Verification=0]="Verification",e[e.Application=16]="Application"}(n||(n={}));const r={blockIndex:-1,blockHash:s.b.ZERO_UINT256,transactionIndex:-1,transactionHash:s.b.ZERO_UINT256}},1428:function(e,t,a){"use strict";a.d(t,"a",function(){return o});a(36);var n=a(90),s=a(125),r=a(1898),i=a(1897);const o=async e=>{try{const t=await e();return t.state===n.VMState.Halt?new r.a({gasConsumed:t.gasConsumed,gasCost:t.gasCost,stack:t.stack}):new i.a({gasConsumed:t.gasConsumed,gasCost:t.gasCost,stack:t.stack,message:void 0===t.errorMessage?"Unknown Error":t.errorMessage})}catch(e){return new i.a({gasConsumed:s.a.ZERO,gasCost:s.a.ZERO,stack:[],message:e.message})}}},1429:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return o});a(94),a(85);var n=a(90),s=a(860),r=a(859);const i=e=>{let t="";return e.forEach(e=>{t+="".concat(e.toString(16).padStart(2,"0"))}),"0x".concat(t)},o=t=>{const a=new s.a(t),o=[];for(;a.hasMore();){const t=a.index,s=a.readUInt8();if(!Object(n.isByteCode)(s)){o.push([t,"UNKNOWN",void 0]);continue}const c=s>=n.Op.PUSHBYTES1&&s<=n.Op.PUSHBYTES75,d=s===n.Op.PUSHDATA1,u=s===n.Op.PUSHDATA2,l=s===n.Op.PUSHDATA4,h=n.Byte[s];if(c||d||u||l){let e;e=c?s:d?a.readUInt8():u?a.readUInt16LE():a.readInt32LE(),o.push([t,h,i(a.readBytes(e))])}else if(s===n.Op.JMP||s===n.Op.JMPIF||s===n.Op.JMPIFNOT||s===n.Op.CALL)o.push([t,h,"".concat(a.readInt16LE())]);else if(s===n.Op.APPCALL||s===n.Op.TAILCALL){const n=[...a.readBytes(20)];n.reverse(),o.push([t,h,i(e.from(n))])}else if(s===n.Op.SYSCALL)o.push([t,h,r.a.toASCII(a.readVarBytesLE(252))]);else if(s===n.Op.CALL_E||s===n.Op.CALL_ET){const n=a.readBytes(1),s=a.readBytes(1),r=[...a.readBytes(20)];r.reverse(),o.push([t,h,"".concat(i(n)," ").concat(i(s)," ").concat(i(e.from(r)))])}else if(s===n.Op.CALL_ED||s===n.Op.CALL_EDT||s===n.Op.CALL_I){const e=a.readBytes(1),r=a.readBytes(1),c=s===n.Op.CALL_I?a.readBytes(2):void 0;o.push([t,h,"".concat(i(e)," ").concat(i(r)," ").concat(void 0===c?"":i(c))])}else o.push([t,h,void 0])}return o.map(e=>{let[t,a,n]=e;return{pc:t,value:"".concat(t.toString().padStart(4,"0"),":").concat(a).concat(void 0===n?"":" ".concat(n))}})}}).call(this,a(92).Buffer)},1430:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return u});var n=a(151),s=a.n(n),r=a(125),i=a(1431),o=a(101),c=a(776);const d=(t,a)=>{if(0===t.length)return e.alloc(0,a);const n=i.a.byte.read(t[t.length-1]);return e.concat([t.slice(0,-1),i.a.buffer.create(n.slice(0,-1).concat(s()(8*(a-t.length)).map(()=>0)).concat([n[7]]))])},u={toNumber:(e,t)=>{try{return t.toNumber()}catch(a){throw new c.B(e,t)}},toStorageContext:e=>{let{context:t,value:a,write:n=!1}=e;const s=a.asStorageContextStackItem({currentBlockIndex:t.blockchain.currentBlockIndex,vm:t.blockchain.settings.vm,scriptHash:t.scriptHash,callingScriptHash:t.callingScriptHash,entryScriptHash:t.entryScriptHash});if(n&&s.isReadOnly)throw new c.E(t);return s},shiftLeft:(e,t)=>e.mul(r.a.TWO.pow(t)),shiftRight:(e,t)=>{let a=r.a.ZERO;return new o.BN(8*r.a.toSignedBuffer(e).length).gt(t)&&(a=e.div(r.a.TWO.pow(t))).mul(t).lt(r.a.ZERO)&&(a=a.sub(r.a.ONE)),a.eq(r.a.ZERO)&&e.isNeg()&&(a=r.a.NEGATIVE_ONE),a},bitwiseOp:(e,t,a)=>{let n=r.a.toSignedBuffer(t),s=r.a.toSignedBuffer(a);return n.length<s.length?n=d(n,s.length):n.length>s.length&&(s=d(s,n.length)),r.a.fromSignedBuffer(e(n,s))}}}).call(this,a(92).Buffer)},1470:function(e,t,a){"use strict";a.d(t,"a",function(){return i});a(85);var n=a(1895),s=a(140),r=a(129);class i extends r.a{constructor(e){super(),this.value=e}asBoolean(){return void 0!==this.value}asBuffer(){throw new s.m}toContractParameter(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return new n.a}toJSONInternal(){return JSON.stringify(this.value)}serializeInternal(){throw new s.z}}},1480:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i});var n,s=a(831);!function(e){e.addr="addr",e.block="block",e.consensus="consensus",e.filteradd="filteradd",e.filterclear="filterclear",e.filterload="filterload",e.getaddr="getaddr",e.getblocks="getblocks",e.getdata="getdata",e.getheaders="getheaders",e.headers="headers",e.inv="inv",e.mempool="mempool",e.tx="tx",e.verack="verack",e.version="version",e.alert="alert",e.merkleblock="merkleblock",e.notfound="notfound",e.ping="ping",e.pong="pong",e.reject="reject"}(n||(n={}));const r=Object(s.a)("INVALID_COMMAND",e=>"Invalid Command. Found: ".concat(e)),i=e=>{if((e=>void 0!==n[e])(e))return e;throw new r(e)}},1481:function(e,t){},1482:function(e,t){},1483:function(e,t){},1484:function(e,t){},1485:function(e,t){},1486:function(e,t){},1487:function(e,t,a){"use strict";var n=a(1488);a.o(n,"createEndpoint")&&a.d(t,"createEndpoint",function(){return n.createEndpoint}),a.o(n,"getEndpointConfig")&&a.d(t,"getEndpointConfig",function(){return n.getEndpointConfig});var s=a(1489);a.o(s,"createEndpoint")&&a.d(t,"createEndpoint",function(){return s.createEndpoint}),a.o(s,"getEndpointConfig")&&a.d(t,"getEndpointConfig",function(){return s.getEndpointConfig});var r=a(1490);a.d(t,"createEndpoint",function(){return r.a}),a.d(t,"getEndpointConfig",function(){return r.b})},1488:function(e,t){},1489:function(e,t){},1490:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s});a(173),a(85);const n=e=>{let{type:t,host:a,port:n}=e;return[t,a,n].join("$$")},s=e=>{const[t,a,n]=e.split("$$");return{type:t,host:a,port:parseInt(n,10)}}},152:function(e,t,a){"use strict";(function(e,n){a.d(t,"a",function(){return ue});a(36),a(85);var s=a(743),r=a.n(s),i=a(728),o=a(101),c=a(469),d=a.n(c),u=a(746),l=a.n(u),h=a(194),f=a(381),b=a(747),p=a.n(b),g=a(748),y=a.n(g),m=a(107),v=a(114),w=a(185),S=a(384),I=a(186);let T;const x=()=>(void 0===T&&(T=new f.ec(new f.curves.PresetCurve(S.a))),T),E=w.h,k=t=>m.b.bufferToUInt160((t=>Object(h.createHash)(e.versions.hasOwnProperty("electron")?"ripemd160":"rmd160").update(t).digest())(E(t))),B=e=>m.b.bufferToUInt256(E(E(e))),A=(e,t)=>Object(h.createHmac)("sha512",e).update(t).digest(),O=e=>{let{message:t,privateKey:a}=e;const s=x().sign(E(t),m.b.privateKeyToBuffer(a));return n.concat([s.r.toArrayLike(n,"be",32),s.s.toArrayLike(n,"be",32)])},N=e=>{let t=0;const a=e.length-1;for(;!e[t]&&!(128&e[t+1])&&t<a;)t+=1;return 0===t?e:e.slice(t)},U=(e,t)=>{if(t<128)return void e.push(t);let a=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|a);--a;)e.push(t>>>(a<<3)&255);e.push(t)},C=e=>m.b.bufferToECPoint(n.from(e.getPublic(!0,"hex"),"hex")),H={},z=e=>{const t=m.b.privateKeyToString(e);let a=H[t];if(void 0===a){const n=x().keyFromPrivate(m.b.privateKeyToBuffer(e));n.getPublic(!0,"hex");const{result:s}=n.validate();if(!s)throw new v.q(e);H[t]=a=C(n)}return a},P=()=>{const e=x().genKeyPair();return e.validate().result?{privateKey:m.b.bufferToPrivateKey(e.getPrivate().toArrayLike(n,"be")),publicKey:C(e)}:P()},R=k,M=e=>m.b.uInt256ToBuffer(B(e)).slice(0,4),V=e=>{const t=M(e);return d.a.encode(n.concat([e,t]))},_=e=>{const t=n.from(d.a.decode(e)),a=t.slice(0,-4),s=t.slice(-4),r=M(a);if(!s.equals(r))throw new v.a(e);return a},D=e=>{let{addressVersion:t,scriptHash:a}=e;const s=n.allocUnsafe(21);return s[0]=t,m.b.uInt160ToBuffer(a).copy(s,1),V(s)},L=e=>{const t=new I.a;return t.emitPush(e),t.build()},K=e=>{const t=new I.a;return t.emitPushECPoint(e),t.emitOp("CHECKSIG"),t.build()},G=(e,t,a)=>{return new a({verification:K(t),invocation:L(e)})},W=e=>R(K(e)),F=(e,t)=>{const a=e.getPublic(),n=t.getPublic(),s=a.getX().cmp(n.getX());return 0!==s?s:a.getY().cmp(n.getY())},j=e=>e.map(e=>x().keyFromPublic(e)).sort(F).map(C),Y=(e,t)=>{const a=Math.floor(e);if(a<1||a>t.length)throw new v.o(a,t.length);if(t.length>1024)throw new v.A(t.length);const n=new I.a;n.emitPushInt(a);const s=1===t.length?t:j(t);return s.forEach(e=>{n.emitPushECPoint(e)}),n.emitPushInt(s.length),n.emitOp("CHECKMULTISIG"),n.build()},J=e=>{const t=new I.a;return e.forEach(e=>{t.emitPush(e)}),t.build()},q=W,Z=e=>q(z(e)),X=e=>{let{addressVersion:t,privateKey:a}=e;return D({addressVersion:t,scriptHash:Z(a)})},$=16384,Q=8,ee=8,te=64,ae=async e=>{let{password:t,salt:a}=e;return new Promise((e,s)=>p()(n.from(t.normalize("NFKC"),"utf8"),a,$,Q,ee,te,(t,a,r)=>{null!=t?s(t):r&&e(n.from([...r]))}))},ne=e=>{let{addressVersion:t,privateKey:a}=e;const s=X({addressVersion:t,privateKey:a});return m.b.uInt256ToBuffer(B(n.from(s,"latin1"))).slice(0,4)},se=e=>{let t=0,a=0,n=0;if(e.length<37)return!1;if(e[n]>w.c.PUSH16)return!1;if(e[n]<w.c.PUSH1&&1!==e[n]&&2!==e[n])return!1;switch(e[n]){case 1:t=e[++n],++n;break;case 2:t=e.readUInt16LE(++n),n+=2;break;default:t=e[n++]-80}if(t<1||t>1024)return!1;for(;33==e[n];){if(n+=34,e.length<=n)return!1;++a}if(a<t||a>1024)return!1;switch(e[n]){case 1:if(a!=e[++n])return!1;++n;break;case 2:if(e.length<n+3||a!=e.readUInt16LE(++n))return!1;n+=2;break;default:if(a!=e[n++]-80)return!1}return e[n++]==w.c.CHECKMULTISIG&&e.length==n},re=e=>35===e.length&&33===e[0]&&e[34]===w.c.CHECKSIG,ie=76067358,oe=76066276,ce=e=>k(e).slice(0,4),de=(e,t,a)=>{if(t>=2147483648)throw new v.g(t);const s=n.alloc(37);if(a){if(!e.privateKey)throw new v.i;e.privateKey.copy(s,1)}else e.publicKey.copy(s,0);s.writeUInt32BE(t,33);const r=A(e.chainCode,s),i=new o.BN(r.slice(0,32)),c=r.slice(32);if(i.cmp(x().n)>=0)return de(e,t+1,a);if(e.privateKey){const s=i.add(new o.BN(e.privateKey)).mod(x().n);if(0===s.cmp(new o.BN(0)))return de(e,t+1,a);const r=m.b.asPrivateKey(s.toArrayLike(n,"be",32)),d=z(r);return{depth:e.depth+1,privateKey:r,publicKey:d,chainCode:c,parentFingerprint:ce(e.publicKey),index:a?t+2147483648:t,version:oe}}const d=x().keyFromPublic(e.publicKey).getPublic(),u=x().g.mul(i).add(d);if(u.isInfinity())return de(e,t+1,!1);const l=n.from(u.encode(void 0,!0));return{depth:e.depth+1,publicKey:l,chainCode:c,parentFingerprint:ce(e.publicKey),index:t,version:ie}},ue={addPublicKey:(e,t)=>{H[m.b.privateKeyToString(e)]=t},sha1:e=>Object(h.createHash)("sha1").update(e).digest(),sha256:E,hash160:k,hash256:B,sign:O,verify:e=>{let{message:t,signature:a,publicKey:s}=e;if(64!==a.length)throw new v.r(a.length);let i=[...a.slice(0,32)],o=[...a.slice(32)];for(128&i[0]&&(i=[0].concat(i)),128&o[0]&&(o=[0].concat(o)),i=N(i),o=N(o);o.length>0&&!o[0]&&!(128&o[1]);)o=o.slice(1);let c=[2];U(c,i.length),(c=c.concat(i)).push(2),U(c,o.length);const d=c.concat(o),u=[48];U(u,d.length);const l=n.from(u.concat(d));return new r.a({crv:"P-256",publicKey:n.from(x().keyFromPublic(s).getPublic(!1,"hex"),"hex")}).createVerify("SHA256").update(t).verify(l)},privateKeyToPublicKey:z,toScriptHash:k,toECPoint:e=>C(x().keyFromPublic(e)),createKeyPair:P,scriptHashToAddress:D,addressToScriptHash:e=>{let{addressVersion:t,address:a}=e;const n=_(a);if(21!==n.length||n[0]!==t)throw new v.b(a);return m.b.bufferToUInt160(n.slice(1))},createInvocationScript:(e,t)=>L(O({message:e,privateKey:t})),createVerificationScript:K,createWitness:(e,t,a)=>G(O({message:e,privateKey:t}),z(t),a),createWitnessForSignature:G,getVerificationScriptHash:W,createMultiSignatureInvocationScript:J,createMultiSignatureVerificationScript:Y,createMultiSignatureWitness:(e,t,a,n)=>{const s=Math.floor(e),r=1===t.length?t:j(t),o=r.map(e=>a[m.b.ecPointToHex(e)]).filter(i.a.notNull);if(o.length!==s)throw new v.s(s,o.length);return new n({verification:Y(s,r),invocation:J(o)})},getConsensusAddress:e=>R(Y(Math.floor(e.length-(e.length-1)/3),e)),privateKeyToWIF:(e,t)=>y.a.encode(t,m.b.privateKeyToBuffer(e),!0),wifToPrivateKey:(e,t)=>{const a=_(e);if(34!==a.length||a[0]!==t||1!==a[33])throw new m.a("Private Key was invalid when decoded from WIF.");return m.b.bufferToPrivateKey(a.slice(1,33))},publicKeyToScriptHash:W,privateKeyToScriptHash:Z,privateKeyToAddress:X,isNEP2:e=>{try{const t=_(e);return 39===t.length&&1===t.readUInt8(0)&&66===t.readUInt8(1)&&224===t.readUInt8(2)}catch(e){return!1}},encryptNEP2:async e=>{let{addressVersion:t,password:a,privateKey:s}=e;const r=ne({addressVersion:t,privateKey:s}),i=await ae({password:a,salt:r}),o=i.slice(0,32),c=i.slice(32,64),d=Object(h.createCipheriv)("aes-256-ecb",c,n.alloc(0,0));d.setAutoPadding(!1),d.end(l()(s,o));const u=d.read(),f=n.alloc(39,0);return f.writeUInt8(1,0),f.writeUInt8(66,1),f.writeUInt8(224,2),r.copy(f,3),u.copy(f,7),V(f)},decryptNEP2:async e=>{let{addressVersion:t,encryptedKey:a,password:s}=e;const r=_(a);if(39!==r.length||1!==r.readUInt8(0)||66!==r.readUInt8(1)||224!==r.readUInt8(2))throw new m.a("Invalid NEP2 format when decoded from encryptedKey.");const i=r.slice(3,7),o=await ae({password:s,salt:i}),c=o.slice(0,32),d=o.slice(32,64),u=Object(h.createDecipheriv)("aes-256-ecb",d,n.alloc(0,0));u.setAutoPadding(!1),u.end(r.slice(7,39));const f=u.read(),b=m.b.asPrivateKey(l()(f,c)),p=ne({addressVersion:t,privateKey:b});if(!i.equals(p))throw new Error("Wrong passphrase.");return m.b.bufferToPrivateKey(b)},createPrivateKey:()=>m.b.bufferToPrivateKey(Object(h.randomBytes)(32)),isMultiSigContract:se,isSignatureContract:re,isStandardContract:e=>re(e)||se(e),parseExtendedKey:e=>{const t=_(e);if(78!==t.length)throw new v.h(e);const a=t.readUInt32BE(0),n=t.readUInt8(4),s=t.slice(5,9),r=0===s.readUInt32BE(0)?void 0:s,i=t.readUInt32BE(9),o=t.slice(13,45),c=t.slice(45),d=0===c[0]?c.slice(1):void 0,u=0!==c[0]?c:void 0;if(void 0!==d){if(a!==oe)throw new v.k(a,oe);const e=m.b.asPrivateKey(d);return{privateKey:e,publicKey:z(e),version:a,depth:n,parentFingerprint:r,index:i,chainCode:o}}if(void 0!==u){if(a!==ie)throw new v.k(a,ie);return{publicKey:u,version:a,depth:n,parentFingerprint:r,index:i,chainCode:o}}throw new v.h(e)},parseMasterSeed:e=>{const t=e instanceof n?e:n.from(e,"hex"),a=A("NEO Seed",t),s=a.slice(0,32),r=z(m.b.asPrivateKey(s)),i=a.slice(32);return{privateKey:m.b.asPrivateKey(s),publicKey:r,version:oe,depth:0,index:0,chainCode:i}},deriveChildKey:de,serializeHDNode:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t&&void 0===e.privateKey)throw new v.j;const a=n.alloc(78);a.writeUInt32BE(t?oe:ie,0),a.writeUInt8(e.depth,4),void 0!==e.parentFingerprint&&e.parentFingerprint.copy(a,5),a.writeUInt32BE(e.index,9),e.chainCode.copy(a,13);const s=t&&void 0!==e.privateKey?e.privateKey:e.publicKey;s.copy(a,78-s.length);const r=B(a).slice(0,4);return d.a.encode(n.concat([a,r]))}}}).call(this,a(109),a(92).Buffer)},159:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return h});a(85);var n=a(101),s=a(107),r=a(125);class i{constructor(e){this.fn=e.fn,this.length=e.length,this.value=e.value}get next(){return this.mutableNext}setNext(e){if(void 0!==this.mutableNext)throw new Error("next operation already set for this op.");this.mutableNext=e}}const o=(e,t,a)=>{t[a]=255&e},c=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.forEach((e,n)=>{t[n+a]=255&e})},d=(e,t,a)=>{const n=s.b.uInt160ToBuffer(e);if(n.length!==s.b.UINT160_BUFFER_BYTES)throw new Error("is this working?");c(n,t,a)},u=(e,t,a)=>{const n=s.b.uInt256ToBuffer(e);if(n.length!==s.b.UINT256_BUFFER_BYTES)throw new Error("is this working?");c(n,t,a)},l=(e,t,a)=>{const n=s.b.ecPointToBuffer(e);if(n.length!==s.b.ECPOINT_BUFFER_BYTES)throw new Error("is this working?");c(n,t,a)};class h{constructor(){this.head=new i({fn:()=>{},length:0,value:void 0}),this.mutableTail=this.head,this.mutableLength=0}get length(){return this.mutableLength}toBuffer(){return this.finish()}writeBytes(e){return this.push({fn:c,length:e.length,value:e})}writeUInt8(e){return this.push({fn:(e,t,a)=>t.writeUInt8(e,a),length:1,value:e})}writeInt16LE(e){return this.push({fn:(e,t,a)=>t.writeInt16LE(e,a),length:2,value:e})}writeUInt16LE(e){return this.push({fn:(e,t,a)=>t.writeUInt16LE(e,a),length:2,value:e})}writeUInt16BE(e){return this.push({fn:(e,t,a)=>t.writeUInt16BE(e,a),length:2,value:e})}writeInt32LE(e){return this.push({fn:(e,t,a)=>t.writeInt32LE(e,a),length:4,value:e})}writeUInt32LE(e){return this.push({fn:(e,t,a)=>t.writeUInt32LE(e,a),length:4,value:e})}writeInt64LE(t){return this.push({fn:(t,a,n)=>{const s=t.toTwos(64).toArrayLike(e,"le",8);c(s,a,n)},length:8,value:t})}writeUInt64LE(t){return this.push({fn:(t,a,n)=>{const s=t.toArrayLike(e,"le",8);c(s,a,n)},length:8,value:t})}writeBoolean(e){return this.push({fn:o,length:1,value:e?1:0})}writeUInt160(e){return this.push({fn:d,length:s.b.UINT160_BUFFER_BYTES,value:e})}writeUInt256(e){return this.push({fn:u,length:s.b.UINT256_BUFFER_BYTES,value:e})}writeFixed8(e){return this.writeInt64LE(e)}writeFixedString(t,a){if(t.length>a)throw new s.a("String too long");const n=e.from(t,"utf8");if(n.length>a)throw new s.a("String buffer length too long");return this.push({fn:(t,n,s)=>{c(t,n,s);const r=t.length-a;r>0&&c(e.alloc(r,0),n,s+t.length)},length:a,value:n})}writeArray(e,t){return this.writeVarUIntLE(e.length),e.forEach(t),this}writeObject(e,t){const a=Object.entries(e);return this.writeVarUIntLE(a.length),a.forEach(e=>{let[a,n]=e;t(a,n)}),this}writeVarBytesLE(e){return this.writeVarUIntLE(e.length),this.push({fn:(e,t,a)=>{c(e,t,a)},length:e.length,value:e})}writeVarUIntLE(e){const t=new n.BN(e);if(t.lt(r.a.ZERO))throw new s.a("Expected value to be zero or positive");return t.lt(r.a.FD)?this.writeUInt8(t.toNumber()):t.lte(r.a.FFFF)?(this.writeUInt8(253),this.writeUInt16LE(t.toNumber())):t.lte(r.a.FFFFFFFF)?(this.writeUInt8(254),this.writeUInt32LE(t.toNumber())):(this.writeUInt8(255),this.writeUInt64LE(t)),this}writeVarString(t,a){let n=e.from(t,"utf8");return void 0!==a&&(n=n.slice(0,a)),this.writeVarBytesLE(n)}writeECPoint(e){return s.b.ecPointIsInfinity(e)?this.push({fn:o,length:1,value:s.b.ECPOINT_INFINITY_BYTE}):this.push({fn:l,length:s.b.ECPOINT_BUFFER_BYTES,value:e})}finish(){const t=e.alloc(this.length);let a=this.head.next,n=0;for(;void 0!==a;)a.fn(a.value,t,n),n+=a.length,a=a.next;return t}push(e){const t=new i(e);return this.mutableTail.setNext(t),this.mutableTail=t,this.mutableLength+=e.length,this}}}).call(this,a(92).Buffer)},160:function(e,t,a){"use strict";a.d(t,"a",function(){return c}),a.d(t,"b",function(){return d});var n=a(107),s=a(152),r=a(125),i=a(127),o=a(188);const c=16;class d{constructor(e){let{version:t,type:a,attributes:o=[],inputs:d=[],outputs:u=[],scripts:l=[],hash:h}=e;this.serializeWire=Object(i.a)(this.serializeWireBase.bind(this)),this.serializeUnsigned=Object(i.a)(this.serializeUnsignedBase.bind(this)),this.hashHexInternal=r.a.lazy(()=>n.b.uInt256ToHex(this.hash)),this.messageInternal=r.a.lazy(()=>this.serializeUnsigned()),this.version=void 0===t?this.constructor.VERSION:t,this.type=a,this.attributes=o,this.inputs=d,this.outputs=u,this.scripts=l;const f=h;if(this.hashInternal=void 0===f?r.a.lazy(()=>s.a.hash256(this.message)):()=>f,this.attributes.length>c)throw new n.a("Expected less than ".concat(c," attributes, found: ").concat(o.length))}get hash(){return this.hashInternal()}get hashHex(){return this.hashHexInternal()}get message(){return this.messageInternal()}sign(e){return this.clone({scripts:this.scripts.concat([s.a.createWitness(this.serializeUnsigned(),e,this.constructor.WitnessConstructor)])})}signWithSignature(e,t){return this.clone({scripts:this.scripts.concat([s.a.createWitnessForSignature(e,t,this.constructor.WitnessConstructor)])})}serializeExclusiveBase(e){}serializeUnsignedBase(e){e.writeUInt8(this.type),e.writeUInt8(this.version),this.serializeExclusiveBase(e),e.writeArray(this.attributes,t=>{t.serializeWireBase(e)}),e.writeArray(this.inputs,t=>{t.serializeWireBase(e)}),e.writeArray(this.outputs,t=>{t.serializeWireBase(e)})}serializeWireBase(e){this.serializeUnsignedBase(e),e.writeArray(this.scripts,t=>{t.serializeWireBase(e)})}}d.VERSION=0,d.WitnessConstructor=o.a},161:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n,s=a(114);!function(e){e[e.Miner=0]="Miner",e[e.Issue=1]="Issue",e[e.Claim=2]="Claim",e[e.Enrollment=32]="Enrollment",e[e.Register=64]="Register",e[e.Contract=128]="Contract",e[e.State=144]="State",e[e.Publish=208]="Publish",e[e.Invocation=209]="Invocation"}(n||(n={}));const r=e=>{if((e=>void 0!==n[e])(e))return e;throw new s.x(e)}},162:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return u});a(94),a(85);var n=a(101),s=a(107),r=a(125);const i=s.b.UINT160_BUFFER_BYTES,o=s.b.UINT256_BUFFER_BYTES,c=e=>{const t=new n.BN(e);if(t.lt(r.a.ZERO))throw new s.a("Expected value >= 0, found: ".concat(t.toString()));return t.lt(r.a.FD)?1:t.lte(r.a.FFFF)?3:t.lte(r.a.FFFFFFFF)?5:9},d=e=>c(e.length)+e.length;const u={sizeOfUInt8:1,sizeOfBoolean:1,sizeOfUInt16LE:2,sizeOfUInt32LE:4,sizeOfUInt64LE:8,sizeOfVarBytesLE:d,sizeOfVarString:t=>d(e.from(t,"utf8")),sizeOfFixedString:e=>e,sizeOfArray:function(e,t){return e.reduce((e,a)=>e+t(a),c(e.length))},sizeOfObject:function(e,t){const a=Object.entries(e);return a.reduce((e,a)=>{let[n,s]=a;return e+t(n,s)},a.length)},sizeOfUInt160:i,sizeOfUInt256:o,sizeOfECPoint:e=>s.b.ecPointIsInfinity(e)?1:s.b.ECPOINT_BUFFER_BYTES,sizeOfFixed8:8}}).call(this,a(92).Buffer)},165:function(e,t,a){"use strict";a.d(t,"i",function(){return r}),a.d(t,"l",function(){return i}),a.d(t,"j",function(){return o}),a.d(t,"k",function(){return c}),a.d(t,"h",function(){return d}),a.d(t,"g",function(){return u}),a.d(t,"e",function(){return l}),a.d(t,"f",function(){return h}),a.d(t,"b",function(){return f}),a.d(t,"a",function(){return b}),a.d(t,"c",function(){return p}),a.d(t,"d",function(){return g});var n=a(107),s=a(101);const r=65535,i=-r,o=32,c=2048,d=1048576,u=1024,l=1024,h=new s.BN(1024),f=2e6,b=Number.MAX_SAFE_INTEGER,p={ONE:new s.BN(1e5),TEN:new s.BN(1e6),TWENTY:new s.BN(2e6),ONE_HUNDRED:new s.BN(1e7),TWO_HUNDRED:new s.BN(2e7),FOUR_HUNDRED:new s.BN(4e7),FIVE_HUNDRED:new s.BN(5e7),ONE_THOUSAND:new s.BN(1e8)},g=n.b.TEN_FIXED8},1826:function(e,t,a){"use strict";a.d(t,"a",function(){return S});a(36);var n=a(152),s=a(107),r=a(2302),i=a(2291),o=a(2320),c=a(2337),d=a(2296),u=a(775),l=a(2290),h=a(1827),f=a.n(h),b=a(1839),p=a.n(b),g=a(1855),y=a.n(g),m=a(2282),v=a(1865),w=a(2018);class S{constructor(e){this.options=e,this.startPromise=this.startInternal()}async start(){return this.startPromise.then(()=>{})}async stop(){void 0!==this.mutableSubscription&&(this.mutableSubscription.unsubscribe(),this.mutableSubscription=void 0,await l.a.wait())}async handleRequest(e){return(await this.startPromise)(e)}async startInternal(){let e=!1;const t=n.a.wifToPrivateKey(v.a.PRIVATE_NET_PRIVATE_KEY,s.b.NEO_PRIVATE_KEY_VERSION),a=s.b.stringToECPoint(v.a.PRIVATE_NET_PUBLIC_KEY);n.a.addPublicKey(t,a);const l=Object(i.a)({address:s.b.uInt160ToString(n.a.privateKeyToScriptHash(t)),standbyValidators:[s.b.ecPointToString(a)],privateNet:!0}),h=Object(d.a)({db:p()("persistent"===this.options.type?f()(this.options.id):y()()),context:{messageMagic:l.messageMagic}}),b=await r.a.create({settings:l,storage:h,vm:u.a}),g=new m.a({consensus:{enabled:!0,options:{privateKey:s.b.privateKeyToString(t),privateNet:!0}}}),S=new o.a({blockchain:b,environment:{},options$:g,createNetwork:()=>new w.a});return await new Promise((t,a)=>{const n=t=>{e||(e=!0,a(t))};this.mutableSubscription=S.start$().subscribe({next:()=>{e||(e=!0,t())},error:n,complete:()=>{n(new Error("Unexpected end"))}})}),Object(c.a)({blockchain:b,node:S})}}},184:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"c",function(){return r}),a.d(t,"f",function(){return i}),a.d(t,"b",function(){return o}),a.d(t,"e",function(){return c}),a.d(t,"d",function(){return d});a(94);var n=a(831);Object(n.a)("RECEIVE_MESSAGE_TIMEOUT",e=>"Message with endpoint ".concat(e," timed out."));const s=Object(n.a)("INVALID_ACTION_TYPE",e=>"Expected action type, found: ".concat(e)),r=Object(n.a)("INVALID_SCRIPT_CONTAINER_TYPE",e=>"Expected ScriptContainerType, found: ".concat(e.toString(16))),i=Object(n.a)("VERIFY",e=>"Verification failed".concat(void 0===e?".":": ".concat(e))),o=Object(n.a)("INVALID_CONSENSUS_MESSAGE_TYPE",e=>"Expected ConsensusMessageType, found: ".concat(e.toString(16))),c=Object(n.a)("UNSIGNED_BLOCK",e=>"Block script does not exist because it has not been signed. @ block with hash ".concat(e)),d=Object(n.a)("INVALID_STORAGE_CHANGE_TYPE",e=>"Invalid Storage Change Type: ".concat(e))},1844:function(e,t){},1846:function(e,t){},185:function(e,t,a){"use strict";(function(e){a.d(t,"c",function(){return n}),a.d(t,"a",function(){return c}),a.d(t,"b",function(){return d}),a.d(t,"g",function(){return u}),a.d(t,"e",function(){return h}),a.d(t,"d",function(){return f}),a.d(t,"f",function(){return b}),a.d(t,"h",function(){return p}),a.d(t,"i",function(){return y});var n,s=a(146),r=a.n(s),i=a(194),o=a(114);!function(e){e[e.PUSH0=0]="PUSH0",e[e.PUSHBYTES1=1]="PUSHBYTES1",e[e.PUSHBYTES2=2]="PUSHBYTES2",e[e.PUSHBYTES3=3]="PUSHBYTES3",e[e.PUSHBYTES4=4]="PUSHBYTES4",e[e.PUSHBYTES5=5]="PUSHBYTES5",e[e.PUSHBYTES6=6]="PUSHBYTES6",e[e.PUSHBYTES7=7]="PUSHBYTES7",e[e.PUSHBYTES8=8]="PUSHBYTES8",e[e.PUSHBYTES9=9]="PUSHBYTES9",e[e.PUSHBYTES10=10]="PUSHBYTES10",e[e.PUSHBYTES11=11]="PUSHBYTES11",e[e.PUSHBYTES12=12]="PUSHBYTES12",e[e.PUSHBYTES13=13]="PUSHBYTES13",e[e.PUSHBYTES14=14]="PUSHBYTES14",e[e.PUSHBYTES15=15]="PUSHBYTES15",e[e.PUSHBYTES16=16]="PUSHBYTES16",e[e.PUSHBYTES17=17]="PUSHBYTES17",e[e.PUSHBYTES18=18]="PUSHBYTES18",e[e.PUSHBYTES19=19]="PUSHBYTES19",e[e.PUSHBYTES20=20]="PUSHBYTES20",e[e.PUSHBYTES21=21]="PUSHBYTES21",e[e.PUSHBYTES22=22]="PUSHBYTES22",e[e.PUSHBYTES23=23]="PUSHBYTES23",e[e.PUSHBYTES24=24]="PUSHBYTES24",e[e.PUSHBYTES25=25]="PUSHBYTES25",e[e.PUSHBYTES26=26]="PUSHBYTES26",e[e.PUSHBYTES27=27]="PUSHBYTES27",e[e.PUSHBYTES28=28]="PUSHBYTES28",e[e.PUSHBYTES29=29]="PUSHBYTES29",e[e.PUSHBYTES30=30]="PUSHBYTES30",e[e.PUSHBYTES31=31]="PUSHBYTES31",e[e.PUSHBYTES32=32]="PUSHBYTES32",e[e.PUSHBYTES33=33]="PUSHBYTES33",e[e.PUSHBYTES34=34]="PUSHBYTES34",e[e.PUSHBYTES35=35]="PUSHBYTES35",e[e.PUSHBYTES36=36]="PUSHBYTES36",e[e.PUSHBYTES37=37]="PUSHBYTES37",e[e.PUSHBYTES38=38]="PUSHBYTES38",e[e.PUSHBYTES39=39]="PUSHBYTES39",e[e.PUSHBYTES40=40]="PUSHBYTES40",e[e.PUSHBYTES41=41]="PUSHBYTES41",e[e.PUSHBYTES42=42]="PUSHBYTES42",e[e.PUSHBYTES43=43]="PUSHBYTES43",e[e.PUSHBYTES44=44]="PUSHBYTES44",e[e.PUSHBYTES45=45]="PUSHBYTES45",e[e.PUSHBYTES46=46]="PUSHBYTES46",e[e.PUSHBYTES47=47]="PUSHBYTES47",e[e.PUSHBYTES48=48]="PUSHBYTES48",e[e.PUSHBYTES49=49]="PUSHBYTES49",e[e.PUSHBYTES50=50]="PUSHBYTES50",e[e.PUSHBYTES51=51]="PUSHBYTES51",e[e.PUSHBYTES52=52]="PUSHBYTES52",e[e.PUSHBYTES53=53]="PUSHBYTES53",e[e.PUSHBYTES54=54]="PUSHBYTES54",e[e.PUSHBYTES55=55]="PUSHBYTES55",e[e.PUSHBYTES56=56]="PUSHBYTES56",e[e.PUSHBYTES57=57]="PUSHBYTES57",e[e.PUSHBYTES58=58]="PUSHBYTES58",e[e.PUSHBYTES59=59]="PUSHBYTES59",e[e.PUSHBYTES60=60]="PUSHBYTES60",e[e.PUSHBYTES61=61]="PUSHBYTES61",e[e.PUSHBYTES62=62]="PUSHBYTES62",e[e.PUSHBYTES63=63]="PUSHBYTES63",e[e.PUSHBYTES64=64]="PUSHBYTES64",e[e.PUSHBYTES65=65]="PUSHBYTES65",e[e.PUSHBYTES66=66]="PUSHBYTES66",e[e.PUSHBYTES67=67]="PUSHBYTES67",e[e.PUSHBYTES68=68]="PUSHBYTES68",e[e.PUSHBYTES69=69]="PUSHBYTES69",e[e.PUSHBYTES70=70]="PUSHBYTES70",e[e.PUSHBYTES71=71]="PUSHBYTES71",e[e.PUSHBYTES72=72]="PUSHBYTES72",e[e.PUSHBYTES73=73]="PUSHBYTES73",e[e.PUSHBYTES74=74]="PUSHBYTES74",e[e.PUSHBYTES75=75]="PUSHBYTES75",e[e.PUSHDATA1=76]="PUSHDATA1",e[e.PUSHDATA2=77]="PUSHDATA2",e[e.PUSHDATA4=78]="PUSHDATA4",e[e.PUSHM1=79]="PUSHM1",e[e.PUSH1=81]="PUSH1",e[e.PUSH2=82]="PUSH2",e[e.PUSH3=83]="PUSH3",e[e.PUSH4=84]="PUSH4",e[e.PUSH5=85]="PUSH5",e[e.PUSH6=86]="PUSH6",e[e.PUSH7=87]="PUSH7",e[e.PUSH8=88]="PUSH8",e[e.PUSH9=89]="PUSH9",e[e.PUSH10=90]="PUSH10",e[e.PUSH11=91]="PUSH11",e[e.PUSH12=92]="PUSH12",e[e.PUSH13=93]="PUSH13",e[e.PUSH14=94]="PUSH14",e[e.PUSH15=95]="PUSH15",e[e.PUSH16=96]="PUSH16",e[e.NOP=97]="NOP",e[e.JMP=98]="JMP",e[e.JMPIF=99]="JMPIF",e[e.JMPIFNOT=100]="JMPIFNOT",e[e.CALL=101]="CALL",e[e.RET=102]="RET",e[e.APPCALL=103]="APPCALL",e[e.SYSCALL=104]="SYSCALL",e[e.TAILCALL=105]="TAILCALL",e[e.DUPFROMALTSTACK=106]="DUPFROMALTSTACK",e[e.TOALTSTACK=107]="TOALTSTACK",e[e.FROMALTSTACK=108]="FROMALTSTACK",e[e.XDROP=109]="XDROP",e[e.XSWAP=114]="XSWAP",e[e.XTUCK=115]="XTUCK",e[e.DEPTH=116]="DEPTH",e[e.DROP=117]="DROP",e[e.DUP=118]="DUP",e[e.NIP=119]="NIP",e[e.OVER=120]="OVER",e[e.PICK=121]="PICK",e[e.ROLL=122]="ROLL",e[e.ROT=123]="ROT",e[e.SWAP=124]="SWAP",e[e.TUCK=125]="TUCK",e[e.CAT=126]="CAT",e[e.SUBSTR=127]="SUBSTR",e[e.LEFT=128]="LEFT",e[e.RIGHT=129]="RIGHT",e[e.SIZE=130]="SIZE",e[e.INVERT=131]="INVERT",e[e.AND=132]="AND",e[e.OR=133]="OR",e[e.XOR=134]="XOR",e[e.EQUAL=135]="EQUAL",e[e.OP_EQUALVERIFY=136]="OP_EQUALVERIFY",e[e.OP_RESERVED1=137]="OP_RESERVED1",e[e.OP_RESERVED2=138]="OP_RESERVED2",e[e.INC=139]="INC",e[e.DEC=140]="DEC",e[e.SIGN=141]="SIGN",e[e.NEGATE=143]="NEGATE",e[e.ABS=144]="ABS",e[e.NOT=145]="NOT",e[e.NZ=146]="NZ",e[e.ADD=147]="ADD",e[e.SUB=148]="SUB",e[e.MUL=149]="MUL",e[e.DIV=150]="DIV",e[e.MOD=151]="MOD",e[e.SHL=152]="SHL",e[e.SHR=153]="SHR",e[e.BOOLAND=154]="BOOLAND",e[e.BOOLOR=155]="BOOLOR",e[e.NUMEQUAL=156]="NUMEQUAL",e[e.NUMNOTEQUAL=158]="NUMNOTEQUAL",e[e.LT=159]="LT",e[e.GT=160]="GT",e[e.LTE=161]="LTE",e[e.GTE=162]="GTE",e[e.MIN=163]="MIN",e[e.MAX=164]="MAX",e[e.WITHIN=165]="WITHIN",e[e.SHA1=167]="SHA1",e[e.SHA256=168]="SHA256",e[e.HASH160=169]="HASH160",e[e.HASH256=170]="HASH256",e[e.CHECKSIG=172]="CHECKSIG",e[e.VERIFY=173]="VERIFY",e[e.CHECKMULTISIG=174]="CHECKMULTISIG",e[e.ARRAYSIZE=192]="ARRAYSIZE",e[e.PACK=193]="PACK",e[e.UNPACK=194]="UNPACK",e[e.PICKITEM=195]="PICKITEM",e[e.SETITEM=196]="SETITEM",e[e.NEWARRAY=197]="NEWARRAY",e[e.NEWSTRUCT=198]="NEWSTRUCT",e[e.NEWMAP=199]="NEWMAP",e[e.APPEND=200]="APPEND",e[e.REVERSE=201]="REVERSE",e[e.REMOVE=202]="REMOVE",e[e.HASKEY=203]="HASKEY",e[e.KEYS=204]="KEYS",e[e.VALUES=205]="VALUES",e[e.CALL_I=224]="CALL_I",e[e.CALL_E=225]="CALL_E",e[e.CALL_ED=226]="CALL_ED",e[e.CALL_ET=227]="CALL_ET",e[e.CALL_EDT=228]="CALL_EDT",e[e.THROW=240]="THROW",e[e.THROWIFNOT=241]="THROWIFNOT"}(n||(n={}));const c=n,d=r()(Object.values(n).map(t=>[t,e.from([t])])),u=e=>void 0!==n[e];var l;!function(e){e["System.Runtime.Platform"]="System.Runtime.Platform",e["Neo.Runtime.GetTrigger"]="Neo.Runtime.GetTrigger",e["Neo.Runtime.CheckWitness"]="Neo.Runtime.CheckWitness",e["Neo.Runtime.Notify"]="Neo.Runtime.Notify",e["Neo.Runtime.Log"]="Neo.Runtime.Log",e["Neo.Runtime.GetTime"]="Neo.Runtime.GetTime",e["Neo.Runtime.Serialize"]="Neo.Runtime.Serialize",e["Neo.Runtime.Deserialize"]="Neo.Runtime.Deserialize",e["Neo.Blockchain.GetHeight"]="Neo.Blockchain.GetHeight",e["Neo.Blockchain.GetHeader"]="Neo.Blockchain.GetHeader",e["Neo.Blockchain.GetBlock"]="Neo.Blockchain.GetBlock",e["Neo.Blockchain.GetTransaction"]="Neo.Blockchain.GetTransaction",e["Neo.Blockchain.GetTransactionHeight"]="Neo.Blockchain.GetTransactionHeight",e["Neo.Blockchain.GetAccount"]="Neo.Blockchain.GetAccount",e["Neo.Blockchain.GetValidators"]="Neo.Blockchain.GetValidators",e["Neo.Blockchain.GetAsset"]="Neo.Blockchain.GetAsset",e["Neo.Blockchain.GetContract"]="Neo.Blockchain.GetContract",e["Neo.Header.GetHash"]="Neo.Header.GetHash",e["Neo.Header.GetIndex"]="Neo.Header.GetIndex",e["Neo.Header.GetVersion"]="Neo.Header.GetVersion",e["Neo.Header.GetPrevHash"]="Neo.Header.GetPrevHash",e["Neo.Header.GetMerkleRoot"]="Neo.Header.GetMerkleRoot",e["Neo.Header.GetTimestamp"]="Neo.Header.GetTimestamp",e["Neo.Header.GetConsensusData"]="Neo.Header.GetConsensusData",e["Neo.Header.GetNextConsensus"]="Neo.Header.GetNextConsensus",e["Neo.Block.GetTransactionCount"]="Neo.Block.GetTransactionCount",e["Neo.Block.GetTransactions"]="Neo.Block.GetTransactions",e["Neo.Block.GetTransaction"]="Neo.Block.GetTransaction",e["Neo.Transaction.GetHash"]="Neo.Transaction.GetHash",e["Neo.Transaction.GetType"]="Neo.Transaction.GetType",e["Neo.Transaction.GetAttributes"]="Neo.Transaction.GetAttributes",e["Neo.Transaction.GetInputs"]="Neo.Transaction.GetInputs",e["Neo.Transaction.GetOutputs"]="Neo.Transaction.GetOutputs",e["Neo.Transaction.GetReferences"]="Neo.Transaction.GetReferences",e["Neo.Transaction.GetUnspentCoins"]="Neo.Transaction.GetUnspentCoins",e["Neo.Transaction.GetWitnesses"]="Neo.Transaction.GetWitnesses",e["Neo.InvocationTransaction.GetScript"]="Neo.InvocationTransaction.GetScript",e["Neo.Attribute.GetUsage"]="Neo.Attribute.GetUsage",e["Neo.Attribute.GetData"]="Neo.Attribute.GetData",e["Neo.Input.GetHash"]="Neo.Input.GetHash",e["Neo.Input.GetIndex"]="Neo.Input.GetIndex",e["Neo.Output.GetAssetId"]="Neo.Output.GetAssetId",e["Neo.Output.GetValue"]="Neo.Output.GetValue",e["Neo.Output.GetScriptHash"]="Neo.Output.GetScriptHash",e["Neo.Account.GetScriptHash"]="Neo.Account.GetScriptHash",e["Neo.Account.GetVotes"]="Neo.Account.GetVotes",e["Neo.Account.GetBalance"]="Neo.Account.GetBalance",e["Neo.Account.IsStandard"]="Neo.Account.IsStandard",e["Neo.Asset.GetAssetId"]="Neo.Asset.GetAssetId",e["Neo.Asset.GetAssetType"]="Neo.Asset.GetAssetType",e["Neo.Asset.GetAmount"]="Neo.Asset.GetAmount",e["Neo.Asset.GetAvailable"]="Neo.Asset.GetAvailable",e["Neo.Asset.GetPrecision"]="Neo.Asset.GetPrecision",e["Neo.Asset.GetOwner"]="Neo.Asset.GetOwner",e["Neo.Asset.GetAdmin"]="Neo.Asset.GetAdmin",e["Neo.Asset.GetIssuer"]="Neo.Asset.GetIssuer",e["Neo.Contract.GetScript"]="Neo.Contract.GetScript",e["Neo.Contract.IsPayable"]="Neo.Contract.IsPayable",e["Neo.Storage.GetContext"]="Neo.Storage.GetContext",e["Neo.Storage.GetReadOnlyContext"]="Neo.Storage.GetReadOnlyContext",e["Neo.Storage.Get"]="Neo.Storage.Get",e["Neo.Storage.Find"]="Neo.Storage.Find",e["Neo.StorageContext.AsReadOnly"]="Neo.StorageContext.AsReadOnly",e["Neo.Enumerator.Create"]="Neo.Enumerator.Create",e["Neo.Iterator.Create"]="Neo.Iterator.Create",e["Neo.Enumerator.Next"]="Neo.Enumerator.Next",e["Neo.Iterator.Key"]="Neo.Iterator.Key",e["Neo.Enumerator.Value"]="Neo.Enumerator.Value",e["Neo.Enumerator.Concat"]="Neo.Enumerator.Concat",e["Neo.Iterator.Concat"]="Neo.Iterator.Concat",e["Neo.Iterator.Keys"]="Neo.Iterator.Keys",e["Neo.Iterator.Values"]="Neo.Iterator.Values",e["Neo.Account.SetVotes"]="Neo.Account.SetVotes",e["Neo.Validator.Register"]="Neo.Validator.Register",e["Neo.Asset.Create"]="Neo.Asset.Create",e["Neo.Asset.Renew"]="Neo.Asset.Renew",e["Neo.Contract.Create"]="Neo.Contract.Create",e["Neo.Contract.Migrate"]="Neo.Contract.Migrate",e["Neo.Contract.GetStorageContext"]="Neo.Contract.GetStorageContext",e["Neo.Contract.Destroy"]="Neo.Contract.Destroy",e["Neo.Storage.Put"]="Neo.Storage.Put",e["Neo.Storage.PutEx"]="Neo.Storage.PutEx",e["Neo.Storage.Delete"]="Neo.Storage.Delete",e["Neo.Witness.GetVerificationScript"]="Neo.Witness.GetVerificationScript",e["System.ExecutionEngine.GetScriptContainer"]="System.ExecutionEngine.GetScriptContainer",e["System.ExecutionEngine.GetExecutingScriptHash"]="System.ExecutionEngine.GetExecutingScriptHash",e["System.ExecutionEngine.GetCallingScriptHash"]="System.ExecutionEngine.GetCallingScriptHash",e["System.ExecutionEngine.GetEntryScriptHash"]="System.ExecutionEngine.GetEntryScriptHash"}(l||(l={}));const h=e=>{if((e=>void 0!==l[e])(e))return e;throw new o.w(e)};var f;!function(e){e[e.None=0]="None",e[e.Halt=1]="Halt",e[e.Fault=2]="Fault",e[e.Break=4]="Break"}(f||(f={}));const b=e=>{if((e=>void 0!==f[e])(e))return e;throw new o.z(e)},p=e=>Object(i.createHash)("sha256").update(e).digest(),g={},y=t=>{let a=g[t];return void 0===a&&(g[t]=a=p(e.from(t,"ascii")).readUInt32LE(0)),a}}).call(this,a(92).Buffer)},186:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return c});a(85);var n=a(101),s=a(159),r=a(107),i=a(185),o=a(125);class c{constructor(){this.mutableBuffers=[],this.pushParamCallbacks={undefined:()=>this.emitPush(e.alloc(0,0)),array:e=>this.emitPushArray(e),map:e=>this.emitPushMap(e),uInt160:e=>this.emitPushUInt160(r.b.asUInt160(e)),uInt256:e=>this.emitPushUInt256(r.b.asUInt256(e)),ecPoint:e=>this.emitPushECPoint(r.b.asECPoint(e)),number:e=>this.emitPushInt(e),string:e=>this.emitPushString(e),boolean:e=>this.emitPushBoolean(e),buffer:e=>this.emitPush(e),object:e=>this.emitPushObject(e)}}get buffers(){return this.mutableBuffers}emitPush(e){if(e.length<=i.c.PUSHBYTES75)this.emitOpByte(e.length,e);else if(e.length<256)this.emitOp("PUSHDATA1"),this.emitUInt8(e.length),this.emit(e);else if(e.length<65536)this.emitOp("PUSHDATA2"),this.emitUInt16LE(e.length),this.emit(e);else{if(!(e.length<4294967296))throw new Error("Invalid buffer length");this.emitOp("PUSHDATA4"),this.emitUInt32LE(e.length),this.emit(e)}return this}emitUInt8(t){const a=e.allocUnsafe(1);return a.writeUInt8(t,0),this.emit(a)}emitUInt16LE(t){const a=e.allocUnsafe(2);return a.writeUInt16LE(t,0),this.emit(a)}emitInt16LE(t){const a=e.allocUnsafe(2);return a.writeInt16LE(t,0),this.emit(a)}emitUInt32LE(t){const a=e.allocUnsafe(4);return a.writeUInt32LE(t,0),this.emit(a)}emitPushInt(e){const t=new n.BN(e);return t.eq(o.a.NEGATIVE_ONE)?this.emitOp("PUSHM1"):t.eq(o.a.ZERO)?this.emitOp("PUSH0"):t.gt(o.a.ZERO)&&t.lt(o.a.SIXTEEN)?this.emitOpByte(i.c.PUSH1-1+t.toNumber()):this.emitPush(o.a.toSignedBuffer(t))}emitPushUInt160(e){return this.emitPush(r.b.uInt160ToBuffer(e))}emitPushUInt256(e){return this.emitPush(r.b.uInt256ToBuffer(e))}emitPushECPoint(e){return this.emitPush(r.b.ecPointToBuffer(e))}emitPushString(t){return this.emitPush(e.from(t,"utf8"))}emitPushBoolean(e){return this.emitOp(e?"PUSH1":"PUSH0")}emitOp(e,t){return this.emitOpByte(i.c[e],t),this}emitPushParam(e){return r.b.paramTo(e,this.pushParamCallbacks)}emitPushParams(){for(let e=arguments.length-1;e>=0;e-=1)this.emitPushParam(e<0||arguments.length<=e?void 0:arguments[e]);return this}emitPushArray(e){return this.emitPushParams(...e),this.emitPushParam(e.length),this.emitOp("PACK")}emitPushMap(e){return this.emitOp("NEWMAP"),e.forEach((e,t)=>{this.emitOp("DUP"),this.emitPushParam(t),this.emitPushParam(e),this.emitOp("SETITEM")}),this}emitPushObject(e){return this.emitOp("NEWMAP"),Object.entries(e).forEach(e=>{let[t,a]=e;this.emitOp("DUP"),this.emitPushParam(t),this.emitPushParam(a),this.emitOp("SETITEM")}),this}emitAppCallInvocation(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return this.emitPushArray(a),this.emitPushParam(e)}emitAppCallVerification(e){return this.emitOp("APPCALL",r.b.uInt160ToBuffer(e))}emitAppCall(e,t){for(var a=arguments.length,n=new Array(a>2?a-2:0),s=2;s<a;s++)n[s-2]=arguments[s];return this.emitAppCallInvocation(t,...n),this.emitAppCallVerification(e)}emitTailCall(e,t){for(var a=arguments.length,n=new Array(a>2?a-2:0),s=2;s<a;s++)n[s-2]=arguments[s];return this.emitAppCallInvocation(t,...n),this.emitOp("TAILCALL",r.b.uInt160ToBuffer(e))}emitSysCall(t){for(var a=arguments.length,n=new Array(a>1?a-1:0),r=1;r<a;r++)n[r-1]=arguments[r];this.emitPushParams(...n);const i=e.from(t,"ascii"),o=new s.a;return o.writeVarBytesLE(i),this.emitOp("SYSCALL",o.toBuffer())}emitOpByte(e,t){const a=i.b[e];return this.emit(a),this.emit(t),this}emit(e){return void 0!==e&&this.mutableBuffers.push(e),this}build(){return e.concat(this.mutableBuffers)}}}).call(this,a(92).Buffer)},1865:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(851);const s=Object.assign({},n.a)},1866:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return w});var n=a(107),s=a(186),r=a(152),i=a(90),o=a(1867),c=a(1404),d=a(709),u=a(1879),l=a(1880),h=a(1877),f=a(728),b=a(101);const p=[8,7,6,5,4,3,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],g=[8,7,6],y=n.b.fixed8FromDecimal(58e6),m=n.b.fixed8FromDecimal(1e8),v=t=>{let{privateNet:a,governingToken:s,utilityToken:r,address:o,consensusAddress:p}=t;return new c.a({previousHash:n.b.ZERO_UINT256,timestamp:1468595301,index:0,consensusData:new b.BN(2083236893),nextConsensus:p,script:new d.a({invocation:e.from([]),verification:e.from([i.Op.PUSH1])}),transactions:[new u.a({nonce:2083236893}),s,r,new l.a({outputs:[new h.a({asset:s.hash,value:s.asset.amount,address:o})],scripts:[new d.a({invocation:e.from([]),verification:e.from([i.Op.PUSH1])})]}),a?new l.a({outputs:[new h.a({asset:r.hash,value:y,address:o})],scripts:[new d.a({invocation:e.from([]),verification:e.from([i.Op.PUSH0])})]}):void 0].filter(f.a.notNull)})},w=e=>{let{privateNet:t,address:a,consensusAddress:c}=e;const d=(()=>{const e=new s.a;e.emitOp("PUSH0");const t=r.a.toScriptHash(e.build());return new o.a({asset:{type:i.AssetTypeModel.UtilityToken,name:'[{"lang":"zh-CN","name":""},{"lang":"en","name":"AntCoin"}]',amount:m,precision:8,owner:n.b.ECPOINT_INFINITY,admin:t}})})(),u=(()=>{const e=new s.a;e.emitOp("PUSH1");const t=r.a.toScriptHash(e.build());return new o.a({asset:{type:i.AssetTypeModel.GoverningToken,name:'[{"lang":"zh-CN","name":""},{"lang":"en","name":"AntShare"}]',amount:m,precision:0,owner:n.b.ECPOINT_INFINITY,admin:t}})})();return{genesisBlock:v({privateNet:t,governingToken:u,utilityToken:d,address:a,consensusAddress:c}),governingToken:u,utilityToken:d,decrementInterval:2e6,generationAmount:t?g:p,secondsPerBlock:15,maxTransactionsPerBlock:500,memPoolSize:5e4}}}).call(this,a(92).Buffer)},1867:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(36),a(85);var n=a(90),s=a(162),r=a(107),i=a(152),o=a(199),c=a(184),d=a(859),u=a(293);class l extends(Object(u.a)(n.TransactionBaseModel)){constructor(e){let{version:t,attributes:a,inputs:o,outputs:c,scripts:u,hash:l,asset:h}=e;if(super({version:t,type:n.TransactionTypeModel.Register,attributes:a,inputs:o,outputs:c,scripts:u,hash:l}),this.sizeExclusive=d.a.lazy(()=>s.a.sizeOfUInt8+s.a.sizeOfUInt8+s.a.sizeOfVarString(this.asset.name)+s.a.sizeOfFixed8+s.a.sizeOfUInt8+s.a.sizeOfECPoint(this.asset.owner)+s.a.sizeOfUInt160),this.asset=h,0!==this.version)throw new r.a("Expected version to be 0. Received: ".concat(this.version));if(r.b.ecPointIsInfinity(h.owner)&&h.type!==n.AssetTypeModel.GoverningToken&&h.type!==n.AssetTypeModel.UtilityToken)throw new r.a("AssetType and asset owner are invalid");const f=super.getScriptHashesForVerifying.bind(this);this.registerGetScriptHashesForVerifyingInternal=d.a.lazyAsync(async e=>{const t=await f(e),a=r.b.uInt160ToHex(i.a.getVerificationScriptHash(this.asset.owner));return new Set([...t,a])})}static deserializeWireBase(e){const{reader:t}=e,{type:a,version:s}=super.deserializeTransactionBaseStartWireBase(e);if(a!==n.TransactionTypeModel.Register)throw new r.a("Expected transaction type ".concat(n.TransactionTypeModel.Register,". Received: ").concat(a));const i=Object(n.assertAssetType)(t.readUInt8()),o=t.readVarString(1024),c=t.readFixed8(),d=t.readUInt8(),u=t.readECPoint(),l=t.readUInt160(),{attributes:h,inputs:f,outputs:b,scripts:p}=super.deserializeTransactionBaseEndWireBase(e);return new this({version:s,attributes:h,inputs:f,outputs:b,scripts:p,asset:{type:i,name:o,amount:c,precision:d,owner:u,admin:l}})}clone(e){let{scripts:t=this.scripts,attributes:a=this.attributes,inputs:n=this.inputs,outputs:s=this.outputs}=e;return new this.constructor({version:this.version,attributes:a,inputs:n,outputs:s,scripts:t,hash:this.hash,asset:this.asset})}serializeExclusiveBase(e){e.writeUInt8(this.asset.type),e.writeVarString(this.asset.name),e.writeFixed8(this.asset.amount),e.writeUInt8(this.asset.precision),e.writeECPoint(this.asset.owner),e.writeUInt160(this.asset.admin)}async serializeJSON(e){const t=await super.serializeTransactionBaseJSON(e);let{name:a}=this.asset;try{a=JSON.parse(a)}catch(e){}return Object.assign({},t,{type:"RegisterTransaction",asset:{type:Object(n.toJSONAssetType)(this.asset.type),name:a,amount:o.a.writeFixed8(this.asset.amount),precision:this.asset.precision,owner:o.a.writeECPoint(this.asset.owner),admin:i.a.scriptHashToAddress({addressVersion:e.addressVersion,scriptHash:this.asset.admin})}})}getSystemFee(e){return this.asset.type===n.AssetTypeModel.GoverningToken||this.asset.type===n.AssetTypeModel.UtilityToken?d.a.ZERO:super.getSystemFee(e)}async getScriptHashesForVerifying(e){return this.registerGetScriptHashesForVerifyingInternal(e)}async verify(e){throw new c.f("Register transactions are obsolete")}}},187:function(e,t,a){"use strict";var n=a(230);a.d(t,"AssetTypeModel",function(){return n.a}),a.d(t,"assertAssetType",function(){return n.b}),a.d(t,"hasFlag",function(){return n.c}),a.d(t,"toJSONAssetType",function(){return n.d});var s=a(231);a.d(t,"ContractParameterTypeModel",function(){return s.a}),a.d(t,"assertContractParameterType",function(){return s.b}),a.d(t,"isContractParameterType",function(){return s.c}),a.d(t,"toJSONContractParameterType",function(){return s.d});var r=a(127);a.d(t,"createSerializeWire",function(){return r.a});var i=a(232);a.d(t,"StateDescriptorTypeModel",function(){return i.a}),a.d(t,"assertStateDescriptorType",function(){return i.b});var o=a(233);a.d(t,"StorageFlagsModel",function(){return o.a}),a.d(t,"assertStorageFlags",function(){return o.b}),a.d(t,"hasStorageFlag",function(){return o.c}),a.d(t,"toJSONStorageFlags",function(){return o.d});var c=a(188);a.d(t,"WitnessModel",function(){return c.a});var d=a(234);a.o(d,"AttributeUsageModel")&&a.d(t,"AttributeUsageModel",function(){return d.AttributeUsageModel}),a.o(d,"BufferAttributeModel")&&a.d(t,"BufferAttributeModel",function(){return d.BufferAttributeModel}),a.o(d,"Byte")&&a.d(t,"Byte",function(){return d.Byte}),a.o(d,"ByteBuffer")&&a.d(t,"ByteBuffer",function(){return d.ByteBuffer}),a.o(d,"ClaimTransactionModel")&&a.d(t,"ClaimTransactionModel",function(){return d.ClaimTransactionModel}),a.o(d,"ECPointAttributeModel")&&a.d(t,"ECPointAttributeModel",function(){return d.ECPointAttributeModel}),a.o(d,"InputModel")&&a.d(t,"InputModel",function(){return d.InputModel}),a.o(d,"InvocationTransactionModel")&&a.d(t,"InvocationTransactionModel",function(){return d.InvocationTransactionModel}),a.o(d,"MAX_TRANSACTION_ATTRIBUTES")&&a.d(t,"MAX_TRANSACTION_ATTRIBUTES",function(){return d.MAX_TRANSACTION_ATTRIBUTES}),a.o(d,"Op")&&a.d(t,"Op",function(){return d.Op}),a.o(d,"OutputModel")&&a.d(t,"OutputModel",function(){return d.OutputModel}),a.o(d,"TransactionBaseModel")&&a.d(t,"TransactionBaseModel",function(){return d.TransactionBaseModel}),a.o(d,"TransactionTypeModel")&&a.d(t,"TransactionTypeModel",function(){return d.TransactionTypeModel}),a.o(d,"UInt160AttributeModel")&&a.d(t,"UInt160AttributeModel",function(){return d.UInt160AttributeModel}),a.o(d,"UInt256AttributeModel")&&a.d(t,"UInt256AttributeModel",function(){return d.UInt256AttributeModel}),a.o(d,"VMState")&&a.d(t,"VMState",function(){return d.VMState}),a.o(d,"assertAttributeUsage")&&a.d(t,"assertAttributeUsage",function(){return d.assertAttributeUsage}),a.o(d,"assertAttributeUsageJSON")&&a.d(t,"assertAttributeUsageJSON",function(){return d.assertAttributeUsageJSON}),a.o(d,"assertSysCall")&&a.d(t,"assertSysCall",function(){return d.assertSysCall}),a.o(d,"assertTransactionType")&&a.d(t,"assertTransactionType",function(){return d.assertTransactionType}),a.o(d,"assertVMState")&&a.d(t,"assertVMState",function(){return d.assertVMState}),a.o(d,"isByteCode")&&a.d(t,"isByteCode",function(){return d.isByteCode}),a.o(d,"toAttributeUsage")&&a.d(t,"toAttributeUsage",function(){return d.toAttributeUsage}),a.o(d,"toJSONAttributeUsage")&&a.d(t,"toJSONAttributeUsage",function(){return d.toJSONAttributeUsage}),a.o(d,"toSysCallHash")&&a.d(t,"toSysCallHash",function(){return d.toSysCallHash});var u=a(246);a.o(u,"AttributeUsageModel")&&a.d(t,"AttributeUsageModel",function(){return u.AttributeUsageModel}),a.o(u,"BufferAttributeModel")&&a.d(t,"BufferAttributeModel",function(){return u.BufferAttributeModel}),a.o(u,"Byte")&&a.d(t,"Byte",function(){return u.Byte}),a.o(u,"ByteBuffer")&&a.d(t,"ByteBuffer",function(){return u.ByteBuffer}),a.o(u,"ClaimTransactionModel")&&a.d(t,"ClaimTransactionModel",function(){return u.ClaimTransactionModel}),a.o(u,"ECPointAttributeModel")&&a.d(t,"ECPointAttributeModel",function(){return u.ECPointAttributeModel}),a.o(u,"InputModel")&&a.d(t,"InputModel",function(){return u.InputModel}),a.o(u,"InvocationTransactionModel")&&a.d(t,"InvocationTransactionModel",function(){return u.InvocationTransactionModel}),a.o(u,"MAX_TRANSACTION_ATTRIBUTES")&&a.d(t,"MAX_TRANSACTION_ATTRIBUTES",function(){return u.MAX_TRANSACTION_ATTRIBUTES}),a.o(u,"Op")&&a.d(t,"Op",function(){return u.Op}),a.o(u,"OutputModel")&&a.d(t,"OutputModel",function(){return u.OutputModel}),a.o(u,"TransactionBaseModel")&&a.d(t,"TransactionBaseModel",function(){return u.TransactionBaseModel}),a.o(u,"TransactionTypeModel")&&a.d(t,"TransactionTypeModel",function(){return u.TransactionTypeModel}),a.o(u,"UInt160AttributeModel")&&a.d(t,"UInt160AttributeModel",function(){return u.UInt160AttributeModel}),a.o(u,"UInt256AttributeModel")&&a.d(t,"UInt256AttributeModel",function(){return u.UInt256AttributeModel}),a.o(u,"VMState")&&a.d(t,"VMState",function(){return u.VMState}),a.o(u,"assertAttributeUsage")&&a.d(t,"assertAttributeUsage",function(){return u.assertAttributeUsage}),a.o(u,"assertAttributeUsageJSON")&&a.d(t,"assertAttributeUsageJSON",function(){return u.assertAttributeUsageJSON}),a.o(u,"assertSysCall")&&a.d(t,"assertSysCall",function(){return u.assertSysCall}),a.o(u,"assertTransactionType")&&a.d(t,"assertTransactionType",function(){return u.assertTransactionType}),a.o(u,"assertVMState")&&a.d(t,"assertVMState",function(){return u.assertVMState}),a.o(u,"isByteCode")&&a.d(t,"isByteCode",function(){return u.isByteCode}),a.o(u,"toAttributeUsage")&&a.d(t,"toAttributeUsage",function(){return u.toAttributeUsage}),a.o(u,"toJSONAttributeUsage")&&a.d(t,"toJSONAttributeUsage",function(){return u.toJSONAttributeUsage}),a.o(u,"toSysCallHash")&&a.d(t,"toSysCallHash",function(){return u.toSysCallHash});var l=a(185);a.d(t,"Byte",function(){return l.a}),a.d(t,"ByteBuffer",function(){return l.b}),a.d(t,"Op",function(){return l.c}),a.d(t,"VMState",function(){return l.d}),a.d(t,"assertSysCall",function(){return l.e}),a.d(t,"assertVMState",function(){return l.f}),a.d(t,"isByteCode",function(){return l.g}),a.d(t,"toSysCallHash",function(){return l.i})},1873:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(90),s=a(107),r=a(162),i=a(199),o=a(770);class c extends(Object(o.a)(n.UInt160AttributeModel)){static deserializeWireBase(e){const{reader:t}=e,{usage:a}=super.deserializeAttributeWireBase(e);if(a!==n.AttributeUsageModel.Script)throw new s.a("Expected attribute usage to be ".concat(n.AttributeUsageModel.Script,". Received: ").concat(a));return new this({usage:a,value:t.readUInt160()})}constructor(e){let{usage:t,value:a}=e;super({usage:t,value:a}),this.size=r.a.sizeOfUInt8+r.a.sizeOfUInt160}serializeJSON(e){return{usage:Object(n.toJSONAttributeUsage)(this.usage),data:i.a.writeUInt160(this.value)}}}},1874:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(90),s=a(107),r=a(162),i=a(199),o=a(770);class c extends(Object(o.a)(n.UInt256AttributeModel)){static deserializeWireBase(e){const{reader:t}=e,{usage:a}=super.deserializeAttributeWireBase(e);if(a!==n.AttributeUsageModel.ContractHash&&a!==n.AttributeUsageModel.Vote&&a!==n.AttributeUsageModel.Hash1&&a!==n.AttributeUsageModel.Hash2&&a!==n.AttributeUsageModel.Hash3&&a!==n.AttributeUsageModel.Hash4&&a!==n.AttributeUsageModel.Hash5&&a!==n.AttributeUsageModel.Hash6&&a!==n.AttributeUsageModel.Hash7&&a!==n.AttributeUsageModel.Hash8&&a!==n.AttributeUsageModel.Hash9&&a!==n.AttributeUsageModel.Hash10&&a!==n.AttributeUsageModel.Hash11&&a!==n.AttributeUsageModel.Hash12&&a!==n.AttributeUsageModel.Hash13&&a!==n.AttributeUsageModel.Hash14&&a!==n.AttributeUsageModel.Hash15)throw new s.a("Invalid AttributeUsageModel. Received: ".concat(a));return new this({usage:a,value:t.readUInt256()})}constructor(e){let{usage:t,value:a}=e;super({usage:t,value:a}),this.size=r.a.sizeOfUInt8+r.a.sizeOfUInt256}serializeJSON(e){return{usage:Object(n.toJSONAttributeUsage)(this.usage),data:i.a.writeUInt256(this.value)}}}},1875:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return c});var n=a(90),s=a(107),r=a(162),i=a(199),o=a(770);class c extends(Object(o.a)(n.ECPointAttributeModel)){static deserializeWireBase(t){const{reader:a}=t,{usage:r}=super.deserializeAttributeWireBase(t);if(r!==n.AttributeUsageModel.ECDH02&&r!==n.AttributeUsageModel.ECDH03)throw new s.a("Expected attribute usage to be ".concat(n.AttributeUsageModel.ECDH02," or ").concat(n.AttributeUsageModel.ECDH03,". Received: ").concat(r));return new this({usage:r,value:s.b.bufferToECPoint(e.concat([e.from([r]),a.readBytes(32)]))})}constructor(e){let{usage:t,value:a}=e;super({usage:t,value:a}),this.size=r.a.sizeOfUInt8+r.a.sizeOfECPoint(this.value)}serializeJSON(e){return{usage:Object(n.toJSONAttributeUsage)(this.usage),data:i.a.writeECPoint(this.value)}}}}).call(this,a(92).Buffer)},1876:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(90),s=a(107),r=a(162),i=a(199),o=a(770);class c extends(Object(o.a)(n.BufferAttributeModel)){static deserializeWireBase(e){const{reader:t}=e,{usage:a}=super.deserializeAttributeWireBase(e);if(a!==n.AttributeUsageModel.DescriptionUrl&&a!==n.AttributeUsageModel.Description&&a!==n.AttributeUsageModel.Remark&&a!==n.AttributeUsageModel.Remark1&&a!==n.AttributeUsageModel.Remark2&&a!==n.AttributeUsageModel.Remark3&&a!==n.AttributeUsageModel.Remark4&&a!==n.AttributeUsageModel.Remark5&&a!==n.AttributeUsageModel.Remark6&&a!==n.AttributeUsageModel.Remark7&&a!==n.AttributeUsageModel.Remark8&&a!==n.AttributeUsageModel.Remark9&&a!==n.AttributeUsageModel.Remark10&&a!==n.AttributeUsageModel.Remark11&&a!==n.AttributeUsageModel.Remark12&&a!==n.AttributeUsageModel.Remark13&&a!==n.AttributeUsageModel.Remark14&&a!==n.AttributeUsageModel.Remark15)throw new s.a("Invalid AttributeUsageModel. Received: ".concat(a));const r=a===n.AttributeUsageModel.DescriptionUrl?t.readBytes(t.readUInt8()):t.readVarBytesLE();return new c({usage:a,value:r})}constructor(e){let{usage:t,value:a}=e;super({usage:t,value:a}),this.size=this.usage===n.AttributeUsageModel.DescriptionUrl?r.a.sizeOfUInt8+r.a.sizeOfUInt8+this.value.length:r.a.sizeOfUInt8+r.a.sizeOfVarBytesLE(this.value)}serializeJSON(e){return{usage:Object(n.toJSONAttributeUsage)(this.usage),data:i.a.writeBuffer(this.value)}}}},1877:function(e,t,a){"use strict";a.d(t,"a",function(){return d});a(94),a(85);var n=a(90),s=a(107),r=a(199),i=a(152),o=a(859),c=a(860);class d extends n.OutputModel{constructor(){super(...arguments),this.equals=o.a.equals(d,this,e=>s.b.uInt256Equal(this.asset,e.asset)&&this.value.eq(e.value)&&s.b.uInt160Equal(this.address,e.address)),this.toKeyString=o.a.toKeyString(d,()=>"".concat(s.b.uInt256ToString(this.asset),":").concat(this.value.toString(10),":").concat(s.b.uInt160ToString(this.address)))}static deserializeWireBase(e){let{reader:t}=e;return new this({asset:t.readUInt256(),value:t.readFixed8(),address:t.readUInt160()})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new c.a(e.buffer)})}clone(e){let{value:t=this.value}=e;return new d({asset:this.asset,value:t,address:this.address})}serializeJSON(e,t){return{n:t,asset:r.a.writeUInt256(this.asset),value:r.a.writeFixed8(this.value),address:i.a.scriptHashToAddress({addressVersion:e.addressVersion,scriptHash:this.address})}}}},1878:function(e,t,a){"use strict";a.d(t,"a",function(){return n});const n=102400},1879:function(e,t,a){"use strict";a.d(t,"a",function(){return d});a(36),a(85);var n=a(90),s=a(162),r=a(107),i=a(184),o=a(859),c=a(293);class d extends(Object(c.a)(n.TransactionBaseModel)){constructor(e){let{version:t,attributes:a,inputs:i,outputs:c,scripts:d,hash:u,nonce:l}=e;if(super({version:t,type:n.TransactionTypeModel.Miner,attributes:a,inputs:i,outputs:c,scripts:d,hash:u}),this.sizeExclusive=o.a.lazy(()=>s.a.sizeOfUInt8+s.a.sizeOfUInt32LE),this.nonce=l,0!==this.version)throw new r.a("Expected version to be 0. Received: ".concat(this.version))}static deserializeWireBase(e){const{reader:t}=e,{type:a,version:s}=super.deserializeTransactionBaseStartWireBase(e);if(a!==n.TransactionTypeModel.Miner)throw new r.a("Expected transaction type ".concat(n.TransactionTypeModel.Miner,". Received: ").concat(a));const i=t.readUInt32LE(),{attributes:o,inputs:c,outputs:d,scripts:u}=super.deserializeTransactionBaseEndWireBase(e);return new this({version:s,attributes:o,inputs:c,outputs:d,scripts:u,nonce:i})}clone(e){let{scripts:t=this.scripts,attributes:a=this.attributes,inputs:n=this.inputs,outputs:s=this.outputs}=e;return new this.constructor({version:this.version,attributes:a,inputs:n,outputs:s,scripts:t,nonce:this.nonce})}serializeExclusiveBase(e){e.writeUInt32LE(this.nonce)}async serializeJSON(e){const t=await super.serializeTransactionBaseJSON(e);return Object.assign({},t,{type:"MinerTransaction",nonce:this.nonce})}async getNetworkFee(e){return o.a.ZERO}async verify(e){const[t]=await Promise.all([super.verify(e),this.verifyInternal(e)]);return t}async verifyInternal(e){const{getOutput:t,utilityToken:a}=e,n=await this.getTransactionResults({getOutput:t});if(Object.entries(n).filter(e=>{let[t,a]=e;return a.lt(o.a.ZERO)}).some(e=>{let[t,n]=e;return!r.b.uInt256Equal(r.b.hexToUInt256(t),a.hash)}))throw new i.f("Invalid miner result")}}},188:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(127);class s{constructor(e){let{invocation:t,verification:a}=e;this.serializeWire=Object(n.a)(this.serializeWireBase.bind(this)),this.invocation=t,this.verification=a}serializeWireBase(e){e.writeVarBytesLE(this.invocation),e.writeVarBytesLE(this.verification)}}},1880:function(e,t,a){"use strict";a.d(t,"a",function(){return u});a(36),a(85);var n=a(162),s=a(107),r=a(861),i=a(184),o=a(859),c=a(293),d=a(90);class u extends(Object(c.a)(r.a)){constructor(e){super(e),this.sizeExclusive=o.a.lazy(()=>n.a.sizeOfUInt8);const t=super.getScriptHashesForVerifying.bind(this);this.issueGetScriptHashesForVerifyingInternal=o.a.lazyAsync(async e=>{const{getOutput:a,getAsset:n}=e,[r,i]=await Promise.all([t(e),this.getTransactionResults({getOutput:a}).then(async e=>Promise.all(Object.entries(e).filter(e=>{let[t,a]=e;return a.lt(o.a.ZERO)}).map(async e=>{let[t,a]=e;const r=await n({hash:s.b.hexToUInt256(t)});return s.b.uInt160ToHex(r.issuer)})))]);return new Set([...r,...i])})}static deserializeWireBase(e){const{type:t,version:a}=super.deserializeTransactionBaseStartWireBase(e);if(t!==d.TransactionTypeModel.Issue)throw new s.a("Expected transaction type to be ".concat(d.TransactionTypeModel.Issue,". Received: ").concat(t));const{attributes:n,inputs:r,outputs:i,scripts:o}=super.deserializeTransactionBaseEndWireBase(e);return new this({version:a,attributes:n,inputs:r,outputs:i,scripts:o})}async serializeJSON(e){const t=await super.serializeTransactionBaseJSON(e);return Object.assign({},t,{type:"IssueTransaction"})}getSystemFee(e){if(this.version>=1)return o.a.ZERO;const{governingToken:t,utilityToken:a}=e;return this.outputs.every(e=>s.b.uInt256Equal(e.asset,t.hash)||s.b.uInt256Equal(e.asset,a.hash))?o.a.ZERO:super.getSystemFee(e)}async getScriptHashesForVerifying(e){return this.issueGetScriptHashesForVerifyingInternal(e)}async verify(e){const[t]=await Promise.all([super.verify(e),this.verifyInternal(e)]);return t}async verifyInternal(e){const{getOutput:t,getAsset:a,memPool:n=[]}=e,r=await this.getTransactionResults({getOutput:t});await Promise.all(Object.entries(r).map(async e=>{let[t,r]=e;const c=s.b.hexToUInt256(t),d=await a({hash:c});if(d.amount.lt(o.a.ZERO))return;const u=d.available.add(n.filter(e=>e!==this).reduce((e,t)=>t.outputs.filter(e=>s.b.uInt256Equal(c,e.asset)).reduce((e,t)=>e.add(t.value),e),o.a.ZERO));if(d.amount.sub(u).lt(r.neg()))throw new i.f("Invalid issue amount")}))}}},1881:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(36),a(85);var n=a(90),s=a(162),r=a(107),i=a(184),o=a(859),c=a(1403),d=a(1402),u=a(293);class l extends(Object(u.a)(n.ClaimTransactionModel)){constructor(e){super(e),this.sizeExclusive=o.a.lazy(()=>s.a.sizeOfUInt8+s.a.sizeOfArray(this.claims,e=>e.size));const t=super.getScriptHashesForVerifying.bind(this);this.claimGetScriptHashesForVerifyingInternal=o.a.lazyAsync(async e=>{const{getOutput:a}=e,[n,s]=await Promise.all([t(e),Promise.all(this.claims.map(async e=>{const t=await a(e);return r.b.uInt160ToHex(t.address)}))]);return new Set([...n,...s])})}static deserializeWireBase(e){const{reader:t}=e,{type:a,version:s}=super.deserializeTransactionBaseStartWireBase(e);if(a!==n.TransactionTypeModel.Claim)throw new r.a("Expected transaction type to be ".concat(n.TransactionTypeModel.Claim,". Received: ").concat(a));const i=t.readArray(()=>d.a.deserializeWireBase(e)),{attributes:o,inputs:c,outputs:u,scripts:l}=super.deserializeTransactionBaseEndWireBase(e);return new this({version:s,claims:i,attributes:o,inputs:c,outputs:u,scripts:l})}async getNetworkFee(e){return o.a.ZERO}async getClaimReferences(e){let{getOutput:t}=e;return Promise.all(this.claims.map(async e=>t(e)))}async getScriptHashesForVerifying(e){return this.claimGetScriptHashesForVerifyingInternal(e)}async verify(e){const[t]=await Promise.all([super.verify(e),this.verifyInternal(e)]);return t}async serializeJSON(e){const t=await super.serializeTransactionBaseJSON(e);return Object.assign({},t,{type:"ClaimTransaction",claims:this.claims.map(t=>t.serializeJSON(e))})}async verifyInternal(e){const{calculateClaimAmount:t,getOutput:a,utilityToken:s,memPool:d=[]}=e;if(Object(c.a)(this.claims))throw new i.f("Duplicate claims");if(d.some(e=>e instanceof l&&e.type===n.TransactionTypeModel.Claim&&Object(c.b)(this.claims,e.claims)))throw new i.f("Duplicate claims in mempool");const[u,h]=await Promise.all([this.getTransactionResults({getOutput:a}),t(this.claims).catch(e=>{throw new i.f("Invalid claims: ".concat(e.message))})]),f=Object.entries(u).find(e=>{let[t,a]=e;return r.b.uInt256Equal(r.b.hexToUInt256(t),s.hash)});if(void 0===f||f[1].gt(o.a.ZERO))throw new i.f("Invalid claim value");if(!h.eq(f[1].neg()))throw new i.f("Invalid claim value")}}},1882:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(36),a(85);var n=a(90),s=a(162),r=a(107),i=a(152),o=a(199),c=a(184),d=a(859),u=a(293);class l extends(Object(u.a)(n.TransactionBaseModel)){constructor(e){let{version:t,attributes:a,inputs:o,outputs:c,scripts:u,hash:l,publicKey:h}=e;if(super({version:t,type:n.TransactionTypeModel.Enrollment,attributes:a,inputs:o,outputs:c,scripts:u,hash:l}),this.sizeExclusive=d.a.lazy(()=>s.a.sizeOfUInt8+s.a.sizeOfECPoint(this.publicKey)),this.publicKey=h,0!==this.version)throw new r.a("Expected version to be 0. Received: ".concat(this.version));const f=super.getScriptHashesForVerifying.bind(this);this.enrollmentGetScriptHashesForVerifyingInternal=d.a.lazyAsync(async e=>{const t=await f(e);return new Set([...t,r.b.uInt160ToHex(i.a.getVerificationScriptHash(this.publicKey))])})}static deserializeWireBase(e){const{reader:t}=e,{type:a,version:s}=super.deserializeTransactionBaseStartWireBase(e);if(a!==n.TransactionTypeModel.Enrollment)throw new r.a("Expected transaction type ".concat(n.TransactionTypeModel.Enrollment,". Received: ").concat(a));const i=t.readECPoint(),{attributes:o,inputs:c,outputs:d,scripts:u}=super.deserializeTransactionBaseEndWireBase(e);return new this({version:s,publicKey:i,attributes:o,inputs:c,outputs:d,scripts:u})}clone(e){let{scripts:t=this.scripts,attributes:a=this.attributes,inputs:n=this.inputs,outputs:s=this.outputs}=e;return new this.constructor({version:this.version,attributes:a,inputs:n,outputs:s,scripts:t,publicKey:this.publicKey})}serializeExclusiveBase(e){e.writeECPoint(this.publicKey)}async serializeJSON(e){const t=await super.serializeTransactionBaseJSON(e);return Object.assign({},t,{type:"EnrollmentTransaction",pubkey:o.a.writeECPoint(this.publicKey)})}async getScriptHashesForVerifying(e){return this.enrollmentGetScriptHashesForVerifyingInternal(e)}async verify(e){throw new c.f("Enrollment transactions are obsolete")}}},1883:function(e,t,a){"use strict";a.d(t,"a",function(){return c});a(36);var n=a(90),s=a(162),r=a(107),i=a(859),o=a(293);class c extends(Object(o.a)(n.TransactionBaseModel)){constructor(e){let{version:t,attributes:a,inputs:o,outputs:c,scripts:d,hash:u}=e;if(super({version:t,type:n.TransactionTypeModel.Contract,attributes:a,inputs:o,outputs:c,scripts:d,hash:u}),this.sizeExclusive=i.a.lazy(()=>s.a.sizeOfUInt8),0!==this.version)throw new r.a("Expected version to be 0. Received: ".concat(this.version))}static deserializeWireBase(e){const{type:t,version:a}=super.deserializeTransactionBaseStartWireBase(e);if(t!==n.TransactionTypeModel.Contract)throw new r.a("Expected transaction type to be ".concat(n.TransactionTypeModel.Contract,". Received: ").concat(t));const{attributes:s,inputs:i,outputs:o,scripts:c}=super.deserializeTransactionBaseEndWireBase(e);return new this({version:a,attributes:s,inputs:i,outputs:o,scripts:c})}clone(e){let{scripts:t=this.scripts,attributes:a=this.attributes,inputs:n=this.inputs,outputs:s=this.outputs}=e;return new this.constructor({version:this.version,attributes:a,inputs:n,outputs:s,scripts:t})}async serializeJSON(e){const t=await super.serializeTransactionBaseJSON(e);return Object.assign({},t,{type:"ContractTransaction"})}}},1884:function(e,t,a){"use strict";a.d(t,"a",function(){return d});a(36),a(85);var n=a(90),s=a(162),r=a(107),i=a(859),o=a(2295),c=a(293);class d extends(Object(c.a)(n.TransactionBaseModel)){constructor(e){let{version:t,attributes:a,inputs:o,outputs:c,scripts:d,hash:u,descriptors:l}=e;if(super({version:t,type:n.TransactionTypeModel.State,attributes:a,inputs:o,outputs:c,scripts:d,hash:u}),this.sizeExclusive=i.a.lazy(()=>s.a.sizeOfArray(this.descriptors,e=>e.size)),this.descriptors=l,0!==this.version)throw new r.a("Expected version to be 0. Received: ".concat(this.version));const h=super.getScriptHashesForVerifying.bind(this);this.stateGetScriptHashesForVerifyingInternal=i.a.lazyAsync(async e=>{const t=await h(e);return this.descriptors.forEach(e=>{e.getScriptHashesForVerifying().forEach(e=>{t.add(e)})}),t})}static deserializeWireBase(e){const{reader:t}=e,{type:a,version:s}=super.deserializeTransactionBaseStartWireBase(e);if(a!==n.TransactionTypeModel.State)throw new r.a("Expected transaction type ".concat(n.TransactionTypeModel.State,". Received: ").concat(a));const i=t.readArray(()=>o.a.deserializeWireBase(e)),{attributes:c,inputs:d,outputs:u,scripts:l}=super.deserializeTransactionBaseEndWireBase(e);return new this({version:s,attributes:c,inputs:d,outputs:u,scripts:l,descriptors:i})}getSystemFee(e){return this.descriptors.reduce((t,a)=>t.add(a.getSystemFee(e)),i.a.ZERO)}async getScriptHashesForVerifying(e){return this.stateGetScriptHashesForVerifyingInternal(e)}clone(e){let{scripts:t=this.scripts,attributes:a=this.attributes,inputs:n=this.inputs,outputs:s=this.outputs}=e;return new this.constructor({version:this.version,attributes:a,inputs:n,outputs:s,scripts:t,descriptors:this.descriptors})}serializeExclusiveBase(e){e.writeArray(this.descriptors,t=>{t.serializeWireBase(e)})}async serializeJSON(e){const t=await super.serializeTransactionBaseJSON(e);return Object.assign({},t,{type:"StateTransaction",descriptors:this.descriptors.map(t=>t.serializeJSON(e))})}async verify(e){const[t]=await Promise.all([super.verify(e),this.verifyInternal(e)]);return t}async verifyInternal(e){await Promise.all(this.descriptors.map(async t=>t.verify(e)))}}},1885:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(123),a(36);var n=a(90),s=a(162),r=a(107),i=a(862),o=a(871),c=a(184),d=a(859),u=a(293);class l extends(Object(u.a)(n.TransactionBaseModel)){constructor(e){let{version:t,attributes:a,inputs:i,outputs:c,scripts:u,hash:l,contract:h}=e;if(super({version:t,type:n.TransactionTypeModel.Publish,attributes:a,inputs:i,outputs:c,scripts:u,hash:l}),this.sizeExclusive=d.a.lazy(()=>s.a.sizeOfUInt8+Object(o.c)({script:this.contract.script,parameterList:this.contract.parameterList,name:this.contract.name,codeVersion:this.contract.codeVersion,author:this.contract.author,email:this.contract.email,description:this.contract.description,publishVersion:this.version})),this.contract=h,this.version>1)throw new r.a("Expected version to be greater than 1. Received: ".concat(this.version))}static deserializeWireBase(e){const{type:t,version:a}=super.deserializeTransactionBaseStartWireBase(e);if(t!==n.TransactionTypeModel.Publish)throw new r.a("Expected transaction type to be ".concat(n.TransactionTypeModel.Publish,". Received: ").concat(t));const s=Object(o.b)(Object.assign({},e,{publishVersion:a})),{attributes:i,inputs:c,outputs:d,scripts:u}=super.deserializeTransactionBaseEndWireBase(e);return new this({version:a,attributes:i,inputs:c,outputs:d,scripts:u,contract:s})}clone(e){let{scripts:t=this.scripts,attributes:a=this.attributes,inputs:n=this.inputs,outputs:s=this.outputs}=e;return new this.constructor({version:this.version,attributes:a,inputs:n,outputs:s,scripts:t,contract:this.contract})}serializeExclusiveBase(e){Object(i.b)({contract:this.contract,writer:e,publishVersion:this.version})}async serializeJSON(e){const t=await super.serializeTransactionBaseJSON(e);return Object.assign({},t,{type:"PublishTransaction",contract:this.contract.serializeJSON(e)})}async verify(e){throw new c.f("Publish transactions are obsolete")}}},1886:function(e,t,a){"use strict";a.d(t,"a",function(){return h});a(36),a(85);var n=a(90),s=a(162),r=a(107),i=a(152),o=a(199),c=a(184),d=a(859),u=a(293);const l=65536;class h extends(Object(u.a)(n.InvocationTransactionModel)){constructor(){super(...arguments),this.sizeExclusive=d.a.lazy(()=>s.a.sizeOfUInt8+s.a.sizeOfVarBytesLE(this.script))}static deserializeWireBase(e){const{reader:t}=e,{type:a,version:s}=super.deserializeTransactionBaseStartWireBase(e);if(a!==n.TransactionTypeModel.Invocation)throw new r.a("Expected transaction type to be ".concat(n.TransactionTypeModel.Invocation,". Received: ").concat(a));const i=t.readVarBytesLE(l);if(0===i.length)throw new r.a("Expected invocation script length to not be 0");let o=d.a.ZERO;s>=1&&(o=t.readFixed8());const{attributes:c,inputs:u,outputs:h,scripts:f}=super.deserializeTransactionBaseEndWireBase(e);return new this({version:s,attributes:c,inputs:u,outputs:h,scripts:f,script:i,gas:o})}async serializeJSON(e){const t=await super.serializeTransactionBaseJSON(e),a=await e.tryGetInvocationData(this);let n;if(void 0!==a){const{asset:t,contracts:s,deletedContractHashes:o,migratedContractHashes:c,voteUpdates:d,actions:u,result:l,storageChanges:h}=a;n={result:l.serializeJSON(e),asset:void 0===t?void 0:t.serializeJSON(e),contracts:s.map(t=>t.serializeJSON(e)),deletedContractHashes:o.map(e=>r.b.uInt160ToString(e)),migratedContractHashes:c.map(e=>{let[t,a]=e;return[r.b.uInt160ToString(t),r.b.uInt160ToString(a)]}),voteUpdates:d.map(t=>{let[a,n]=t;return[i.a.scriptHashToAddress({addressVersion:e.addressVersion,scriptHash:a}),n.map(e=>r.b.ecPointToString(e))]}),actions:u.map(t=>t.serializeJSON(e)),storageChanges:h.map(t=>t.serializeJSON(e))}}return Object.assign({},t,{type:"InvocationTransaction",script:o.a.writeBuffer(this.script),gas:o.a.writeFixed8(this.gas),invocationData:n})}getSystemFee(e){return this.gas}async verify(e){if(!this.gas.mod(d.a.ONE_HUNDRED_MILLION).eq(d.a.ZERO))throw new c.f("Invalid GAS amount");return super.verify(e)}}},1887:function(e,t,a){"use strict";a.d(t,"e",function(){return i}),a.d(t,"f",function(){return o}),a.d(t,"d",function(){return c}),a.d(t,"a",function(){return u}),a.d(t,"b",function(){return l}),a.d(t,"c",function(){return h});a(36);var n=a(970),s=a(872),r=a(1888);function i(e){let{get:t}=e;return async e=>{try{return await t(e)}catch(e){if(e.notFound||"KEY_NOT_FOUND"===e.code)return;throw e}}}function o(e){let{db:t,latestKey:a,deserializeResult:n,get:s}=e;return async()=>{try{const e=await t.get(a);return await s(n(e))}catch(e){if(e.notFound||"KEY_NOT_FOUND"===e.code)return;throw e}}}function c(e){let{db:t,serializeKey:a,deserializeValue:n}=e;const r=async e=>{const r=a(e);try{const e=await t.get(r);return n(e)}catch(e){if(e.notFound||"KEY_NOT_FOUND"===e.code)throw new s.a(r);throw e}};return{get:r,tryGet:i({get:r})}}function d(e){let{db:t,minKey:a,maxKey:s,deserializeValue:i}=e;return Object(r.a)(()=>t.createValueStream({gte:a,lte:s})).pipe(Object(n.a)(i))}function u(e){let{db:t,serializeKey:a,minKey:n,maxKey:s,deserializeValue:r}=e;const i=c({db:t,serializeKey:a,deserializeValue:r});return{get:i.get,tryGet:i.tryGet,all$:d({db:t,minKey:n,maxKey:s,deserializeValue:r})}}function l(e){let{db:t,serializeKey:a,getMinKey:n,getMaxKey:s,deserializeValue:r}=e;const i=c({db:t,serializeKey:a,deserializeValue:r});return{get:i.get,tryGet:i.tryGet,getAll$:e=>d({db:t,minKey:n(e),maxKey:s(e),deserializeValue:r})}}function h(e){let{db:t,key:a,deserializeValue:n}=e;const r=async()=>{try{const e=await t.get(a);return n(e)}catch(e){if(e.notFound||"KEY_NOT_FOUND"===e.code)throw new s.a(a);throw e}};return{get:r,tryGet:i({get:r})}}},1888:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(201);const s=e=>new n.a(t=>{const a=e();let n=!1;const s=()=>{n||(n=!0,a.removeListener("end",r),a.removeListener("error",i),a.removeListener("data",o))},r=()=>{s(),t.complete()},i=e=>{s(),t.error(e)},o=e=>t.next(e);return a.once("error",i),a.once("end",r),a.on("data",o),s})},1889:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(1410),s=a(873);class r extends n.a{static deserializeWireBase(e){const{reader:t}=e,a=super.deserializeActionBaseWireBase(e),n=t.readVarString(10240);return new this({version:a.version,index:a.index,scriptHash:a.scriptHash,message:n})}constructor(e){let{version:t,index:a,scriptHash:n,message:r}=e;super({type:s.a.Log,version:t,index:a,scriptHash:n}),this.message=r}serializeWireBase(e){super.serializeWireBase(e),e.writeVarString(this.message,10240)}serializeJSON(e){const t=super.serializeActionBaseJSON(e);return{type:"Log",version:t.version,index:t.index,scriptHash:t.scriptHash,message:this.message}}}},189:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r}),a.d(t,"e",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"d",function(){return c});var n,s=a(114);!function(e){e[e.ContractHash=0]="ContractHash",e[e.ECDH02=2]="ECDH02",e[e.ECDH03=3]="ECDH03",e[e.Script=32]="Script",e[e.Vote=48]="Vote",e[e.DescriptionUrl=129]="DescriptionUrl",e[e.Description=144]="Description",e[e.Hash1=161]="Hash1",e[e.Hash2=162]="Hash2",e[e.Hash3=163]="Hash3",e[e.Hash4=164]="Hash4",e[e.Hash5=165]="Hash5",e[e.Hash6=166]="Hash6",e[e.Hash7=167]="Hash7",e[e.Hash8=168]="Hash8",e[e.Hash9=169]="Hash9",e[e.Hash10=170]="Hash10",e[e.Hash11=171]="Hash11",e[e.Hash12=172]="Hash12",e[e.Hash13=173]="Hash13",e[e.Hash14=174]="Hash14",e[e.Hash15=175]="Hash15",e[e.Remark=240]="Remark",e[e.Remark1=241]="Remark1",e[e.Remark2=242]="Remark2",e[e.Remark3=243]="Remark3",e[e.Remark4=244]="Remark4",e[e.Remark5=245]="Remark5",e[e.Remark6=246]="Remark6",e[e.Remark7=247]="Remark7",e[e.Remark8=248]="Remark8",e[e.Remark9=249]="Remark9",e[e.Remark10=250]="Remark10",e[e.Remark11=251]="Remark11",e[e.Remark12=252]="Remark12",e[e.Remark13=253]="Remark13",e[e.Remark14=254]="Remark14",e[e.Remark15=255]="Remark15"}(n||(n={}));const r=e=>{if((e=>void 0!==n[e])(e))return e;throw new s.e(e)},i=e=>o(n[e]),o=e=>{if((e=>void 0!==n[e])(e))return e;throw new s.f(e)},c=e=>r(n[e])},1890:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(2299),s=a(1410),r=a(873);class i extends s.a{static deserializeWireBase(e){const{reader:t}=e,a=super.deserializeActionBaseWireBase(e),s=t.readArray(()=>Object(n.a)(e));return new this({version:a.version,index:a.index,scriptHash:a.scriptHash,args:s})}constructor(e){let{version:t,index:a,scriptHash:n,args:s}=e;super({type:r.a.Notification,version:t,index:a,scriptHash:n}),this.args=s}serializeWireBase(e){super.serializeWireBase(e),e.writeArray(this.args,t=>t.serializeWireBase(e))}serializeJSON(e){const t=super.serializeActionBaseJSON(e);return{type:"Notification",version:t.version,index:t.index,scriptHash:t.scriptHash,args:this.args.map(t=>t.serializeJSON(e))}}}},1891:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(162),s=a(199),r=a(859),i=a(126),o=a(90);class c extends i.a{constructor(e){super(),this.type=o.ContractParameterTypeModel.Signature,this.value=e,this.sizeInternal=r.a.lazy(()=>n.a.sizeOfVarBytesLE(this.value))}static deserializeWireBase(e){const{reader:t}=e;return super.deserializeContractParameterBaseWireBase(e),new this(t.readVarBytesLE())}get size(){return this.sizeInternal()}asBuffer(){return this.value}serializeWireBase(e){super.serializeWireBase(e),e.writeVarBytesLE(this.value)}serializeJSON(e){return{type:"Signature",value:s.a.writeBuffer(this.value)}}}},1892:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(125),s=a(162),r=a(107),i=a(199),o=a(126),c=a(90);class d extends o.a{constructor(e){super(),this.type=c.ContractParameterTypeModel.Hash256,this.value=e,this.sizeInternal=n.a.lazy(()=>s.a.sizeOfUInt256)}static deserializeWireBase(e){const{reader:t}=e;return super.deserializeContractParameterBaseWireBase(e),new this(t.readUInt256())}get size(){return this.sizeInternal()}asBuffer(){return r.b.uInt256ToBuffer(this.value)}serializeWireBase(e){super.serializeWireBase(e),e.writeUInt256(this.value)}serializeJSON(e){return{type:"Hash256",value:i.a.writeUInt256(this.value)}}}},1893:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(125),s=a(162),r=a(107),i=a(199),o=a(126),c=a(90);class d extends o.a{constructor(e){super(),this.type=c.ContractParameterTypeModel.PublicKey,this.value=e,this.sizeInternal=n.a.lazy(()=>s.a.sizeOfECPoint(this.value))}static deserializeWireBase(e){const{reader:t}=e;return super.deserializeContractParameterBaseWireBase(e),new this(t.readECPoint())}get size(){return this.sizeInternal()}asBuffer(){return r.b.ecPointToBuffer(this.value)}serializeWireBase(e){super.serializeWireBase(e),e.writeECPoint(this.value)}serializeJSON(e){return{type:"PublicKey",value:i.a.writeECPoint(this.value)}}}},1894:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return o});var n=a(125),s=a(162),r=a(126),i=a(90);class o extends r.a{constructor(e){super(),this.type=i.ContractParameterTypeModel.String,this.value=e,this.sizeInternal=n.a.lazy(()=>s.a.sizeOfVarString(this.value))}static deserializeWireBase(e){const{reader:t}=e;return super.deserializeContractParameterBaseWireBase(e),new this(t.readVarString())}get size(){return this.sizeInternal()}asBuffer(){return e.from(this.value,"utf8")}serializeWireBase(e){super.serializeWireBase(e),e.writeVarString(this.value)}serializeJSON(e){return{type:"String",value:this.value}}}}).call(this,a(92).Buffer)},1895:function(e,t,a){"use strict";a.d(t,"a",function(){return r});a(85);var n=a(126),s=a(90);class r extends n.a{constructor(){super(...arguments),this.type=s.ContractParameterTypeModel.InteropInterface,this.size=0}static deserializeWireBase(e){return super.deserializeContractParameterBaseWireBase(e),new this}serializeJSON(e){return{type:"InteropInterface"}}}},1896:function(e,t,a){"use strict";a.d(t,"a",function(){return r});a(85);var n=a(126),s=a(90);class r extends n.a{constructor(){super(...arguments),this.type=s.ContractParameterTypeModel.Void,this.size=0}static deserializeWireBase(e){return super.deserializeContractParameterBaseWireBase(e),new this}asBoolean(){return!1}serializeJSON(e){return{type:"Void"}}}},1897:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(90),s=a(107),r=a(125),i=a(162),o=a(199),c=a(1416);const d=1024;class u extends c.a{static deserializeWireBase(e){const{reader:t}=e,{state:a,gasConsumed:r,gasCost:i,stack:o}=super.deserializeInvocationResultWireBase(e);if(a!==n.VMState.Fault)throw new s.a("Expected VMState to be: ".concat(n.VMState.Fault,". Received: ").concat(a));return new this({gasConsumed:r,gasCost:i,stack:o,message:t.readVarString(d)})}constructor(e){let{gasConsumed:t,gasCost:a,stack:s,message:o}=e;super({state:n.VMState.Fault,gasConsumed:t,gasCost:a,stack:s}),this.message=o,this.sizeExclusive=r.a.lazy(()=>i.a.sizeOfVarString(this.message))}serializeWireBase(e){super.serializeWireBase(e),e.writeVarString(this.message,d)}serializeJSON(e){return{state:n.VMState.Fault,gas_consumed:o.a.writeFixed8(this.gasConsumed),gas_cost:o.a.writeFixed8(this.gasCost),stack:this.stack.map(t=>t.serializeJSON(e)),message:this.message}}}},1898:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(90),s=a(107),r=a(199),i=a(1416);class o extends i.a{static deserializeWireBase(e){const{state:t,gasConsumed:a,gasCost:r,stack:i}=super.deserializeInvocationResultWireBase(e);if(t!==n.VMState.Halt)throw new s.a("Expected VMState state to be ".concat(n.VMState.Halt,". Received: ").concat(t,"."));return new this({gasConsumed:a,gasCost:r,stack:i})}constructor(e){let{gasConsumed:t,gasCost:a,stack:s}=e;super({state:n.VMState.Halt,gasConsumed:t,gasCost:a,stack:s})}serializeJSON(e){return{state:n.VMState.Halt,gas_consumed:r.a.writeFixed8(this.gasConsumed),gas_cost:r.a.writeFixed8(this.gasCost),stack:this.stack.map(t=>t.serializeJSON(e))}}}},1899:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(107),s=a(199),r=a(1417),i=a(711);class o extends r.a{static deserializeWireBase(e){const{type:t,hash:a,key:s,value:r}=super.deserializeStorageChangeAddModifyWireBase(e);if(t!==i.a.Modify)throw new n.a("Expected storage change type to be ".concat(i.a.Modify,". Received: ").concat(t));return new this({hash:a,key:s,value:r})}constructor(e){super(Object.assign({type:i.a.Modify},e))}serializeJSON(e){return{type:"Modify",hash:s.a.writeUInt160(this.hash),key:s.a.writeBuffer(this.key),value:s.a.writeBuffer(this.value)}}}},1900:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(107),s=a(199),r=a(1417),i=a(711);class o extends r.a{static deserializeWireBase(e){const{type:t,hash:a,key:s,value:r}=super.deserializeStorageChangeAddModifyWireBase(e);if(t!==i.a.Add)throw new n.a("Expected storage change type to be ".concat(i.a.Add,". Received: ").concat(t));return new this({hash:a,key:s,value:r})}constructor(e){super(Object.assign({type:i.a.Add},e))}serializeJSON(e){return{type:"Add",hash:s.a.writeUInt160(this.hash),key:s.a.writeBuffer(this.key),value:s.a.writeBuffer(this.value)}}}},1901:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(107),s=a(199),r=a(1418),i=a(711);class o extends r.a{static deserializeWireBase(e){const{type:t,hash:a,key:s}=super.deserializeStorageChangeWireBase(e);if(t!==i.a.Delete)throw new n.a("Expected storage change type to be ".concat(i.a.Delete,". Received: ").concat(t));return new this({hash:a,key:s})}constructor(e){let{hash:t,key:a}=e;super({type:i.a.Delete,hash:t,key:a})}serializeJSON(e){return{type:"Delete",hash:s.a.writeUInt160(this.hash),key:s.a.writeBuffer(this.key)}}}},1902:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(2297),s=a(728),r=a(1405),i=a(872);const o=e=>{switch(e.type){case"account":return{type:"del",key:n.a.typeKeyToSerializeKey.account(e.key)};case"accountUnspent":return{type:"del",key:n.a.typeKeyToSerializeKey.accountUnspent(e.key)};case"accountUnclaimed":return{type:"del",key:n.a.typeKeyToSerializeKey.accountUnclaimed(e.key)};case"contract":return{type:"del",key:n.a.typeKeyToSerializeKey.contract(e.key)};case"storageItem":return{type:"del",key:n.a.typeKeyToSerializeKey.storageItem(e.key)};case"validator":return{type:"del",key:n.a.typeKeyToSerializeKey.validator(e.key)};default:throw s.a.assertNever(e),new i.c}},c=e=>{if("add"===e.type)return(e=>{const t=e;switch(t.type){case"account":return[{type:"put",key:n.a.typeKeyToSerializeKey.account(t.value),value:t.value.serializeWire()}];case"accountUnspent":return[{type:"put",key:n.a.typeKeyToSerializeKey.accountUnspent({hash:t.value.hash,input:t.value.input}),value:t.value.serializeWire()}];case"accountUnclaimed":return[{type:"put",key:n.a.typeKeyToSerializeKey.accountUnclaimed({hash:t.value.hash,input:t.value.input}),value:t.value.serializeWire()}];case"action":return[{type:"put",key:n.a.typeKeyToSerializeKey.action({index:t.value.index}),value:t.value.serializeWire()}];case"asset":return[{type:"put",key:n.a.typeKeyToSerializeKey.asset(t.value),value:t.value.serializeWire()}];case"block":return[{type:"put",key:n.a.typeKeyToSerializeKey.block(t.value),value:t.value.serializeWire()},{type:"put",key:n.a.maxBlockHashKey,value:r.c(t.value.hash)}];case"blockData":return[{type:"put",key:n.a.typeKeyToSerializeKey.blockData(t.value),value:t.value.serializeWire()}];case"header":return[{type:"put",key:n.a.typeKeyToSerializeKey.header(t.value),value:t.value.serializeWire()},{type:"put",key:n.a.maxHeaderHashKey,value:r.d(t.value.hash)},{type:"put",key:n.a.serializeHeaderIndexHashKey(t.value.index),value:r.d(t.value.hash)}];case"transaction":return[{type:"put",key:n.a.typeKeyToSerializeKey.transaction(t.value),value:t.value.serializeWire()}];case"output":return[{type:"put",key:n.a.typeKeyToSerializeKey.output({hash:t.value.hash,index:t.value.index}),value:t.value.output.serializeWire()}];case"transactionData":return[{type:"put",key:n.a.typeKeyToSerializeKey.transactionData(t.value),value:t.value.serializeWire()}];case"contract":return[{type:"put",key:n.a.typeKeyToSerializeKey.contract(t.value),value:t.value.serializeWire()}];case"storageItem":return[{type:"put",key:n.a.typeKeyToSerializeKey.storageItem({hash:t.value.hash,key:t.value.key}),value:t.value.serializeWire()}];case"validator":return[{type:"put",key:n.a.typeKeyToSerializeKey.validator({publicKey:t.value.publicKey}),value:t.value.serializeWire()}];case"invocationData":return[{type:"put",key:n.a.typeKeyToSerializeKey.invocationData(t.value),value:t.value.serializeWire()}];case"validatorsCount":return[{type:"put",key:n.a.validatorsCountKey,value:t.value.serializeWire()}];default:throw s.a.assertNever(t),new i.c(e.type)}})(e.change);if("delete"===e.type)return[o(e.change)];throw s.a.assertNever(e),new i.b}},191:function(e,t,a){"use strict";var n=a(192);a.d(t,"a",function(){return n});var s=a(193);a.d(t,"b",function(){return s})},192:function(e,t,a){"use strict";a.r(t),a.d(t,"transferHandlers",function(){return o}),a.d(t,"proxy",function(){return d}),a.d(t,"proxyValue",function(){return u}),a.d(t,"expose",function(){return l}),a.d(t,"isEndpoint",function(){return g}),a.d(t,"isTransferable",function(){return w}),a.d(t,"transferableProperties",function(){return S});a(123),a(439),a(36),a(85);const n=[ArrayBuffer,MessagePort],s=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),r=Symbol("proxyValue"),i=Symbol("throw"),o=new Map([["PROXY",{canHandle:e=>e&&(e[r]||e instanceof Function),serialize:e=>{const{port1:t,port2:a}=new MessageChannel;return l(e,t),a},deserialize:e=>d(e)}],["THROW",{canHandle:e=>e&&e[i]||e instanceof Error,serialize:e=>{const t=e&&e.message,a=e&&e.stack;return Object.assign({},e,{message:t,stack:a})},deserialize:e=>{throw Object.assign(Error(),e)}}]]);let c=0;function d(e,t){if(v(e)&&(e=p(e)),!g(e))throw Error("endpoint does not have all of addEventListener, removeEventListener and postMessage defined");return y(e),function e(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return new Proxy(n,{construct:(e,n,s)=>t({type:"CONSTRUCT",callPath:a,argumentsList:n}),apply:(n,s,r)=>"bind"===a[a.length-1]?e(t,a.slice(0,-1)):t({type:"APPLY",callPath:"apply"===a[a.length-1]?a.slice(0,-1):a,argumentsList:"apply"===a[a.length-1]?r[1]:r}),get(n,s,i){if(s===r)return!0;if("then"===s&&0===a.length)return{then:()=>i};if("then"===s){const e=t({type:"GET",callPath:a});return Promise.resolve(e).then.bind(e)}return e(t,a.concat(s),n[s])},set:(e,n,s,i)=>n===r||t({type:"SET",callPath:a,property:n,value:s})})}(async t=>{let a=[];return"APPLY"!==t.type&&"CONSTRUCT"!==t.type||(a=t.argumentsList.map(h)),f((await function(e,t,a){const n="".concat(s,"-").concat(c++);return new Promise(s=>{m(e,function t(a){a.data.id===n&&"RETURN"===a.data.type&&(!function(e,t){e.removeEventListener("message",t)}(e,t),s(a))}),t=Object.assign({},t,{id:n}),e.postMessage(t,a)})}(e,Object.assign({},t,{argumentsList:a}),S(a))).data.value)},[],t)}function u(e){return e instanceof MessagePort?e:(e[r]=!0,e)}function l(e,t){if(v(t)&&(t=p(t)),!g(t))throw Error("endpoint does not have all of addEventListener, removeEventListener and postMessage defined");y(t),m(t,async function(a){if(!a.data.id||!a.data.callPath)return;let n;const s=a.data;try{const t=await s.callPath.slice(0,-1).reduce((e,t)=>e[t],e);let a=[];if("APPLY"!==s.type&&"CONSTRUCT"!==s.type||(a=s.argumentsList.map(f)),"APPLY"===s.type&&(n=s.callPath.length>0?await t[s.callPath[s.callPath.length-1]](...a):await t(...a)),"CONSTRUCT"===s.type&&(n=u(n=s.callPath.length>0?await new t[s.callPath[s.callPath.length-1]](...a):await new t(...a))),"SET"===s.type||"GET"===s.type){const e=s.callPath.length>0?await t[s.callPath[s.callPath.length-1]]:t;"SET"===s.type?(e[s.property]=s.value,n=!0):n=e}}catch(e){(n=e)[i]=!0}return n=function(e,t){return{type:"RETURN",id:e.id,value:h(t)}}(s,n),t.postMessage(n,S([n]))})}function h(e){for(const[t,a]of o)if(a.canHandle(e))return{type:t,value:a.serialize(e)};let t=[];!function e(t,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(!t)return;s||(s=new WeakSet);if(s.has(t))return;if("string"==typeof t)return;"object"==typeof t&&s.add(t);if(ArrayBuffer.isView(t))return;if(a(t,n))return;const r=Object.keys(t);for(const i of r)e(t[i],a,[...n,i],s)}(e,(e,a)=>{for(const[n,s]of o)if(s.canHandle(e))return t.push({path:a,wrappedValue:{type:n,value:s.serialize(e)}}),!0;return!1});for(const a of t){a.path.slice(0,-1).reduce((e,t)=>e[t],e)[a.path[a.path.length-1]]=null}return{type:"RAW",value:e,wrappedChildren:t}}function f(e){if(o.has(e.type)){return o.get(e.type).deserialize(e.value)}if(function(e){return"RAW"===e.type}(e)){for(const t of e.wrappedChildren||[]){if(!o.has(t.wrappedValue.type))throw Error('Unknown value type "'.concat(e.type,'" at ').concat(t.path.join(".")));const a=o.get(t.wrappedValue.type).deserialize(t.wrappedValue.value);b(e.value,t.path,a)}return e.value}throw Error('Unknown value type "'.concat(e.type,'"'))}function b(e,t,a){const n=t.slice(-1)[0];t.slice(0,-1).reduce((e,t)=>e[t],e)[n]=a}function p(e){if("Window"!==self.constructor.name)throw Error("self is not a window");return{addEventListener:self.addEventListener.bind(self),removeEventListener:self.removeEventListener.bind(self),postMessage:(t,a)=>e.postMessage(t,"*",a)}}function g(e){return"addEventListener"in e&&"removeEventListener"in e&&"postMessage"in e}function y(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.start()}function m(e,t){e.addEventListener("message",t)}function v(e){return["window","length","location","parent","opener"].every(t=>t in e)}function w(e){return n.some(t=>e instanceof t)}function S(e){const t=[];for(const a of function*e(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return;if(n||(n=new WeakSet),n.has(t))return;if("string"==typeof t)return;if("object"==typeof t&&n.add(t),ArrayBuffer.isView(t))return;yield{value:t,path:a};const s=Object.keys(t);for(const r of s)yield*e(t[r],[...a,r],n)}(e))w(a.value)&&t.push(a.value);return t}},193:function(e,t,a){"use strict";function n(e){return a=e,["postMessage","addEventListener","removeEventListener","start","close"].every(e=>e in a)?e:function(e){return["window","length","location","parent","opener"].every(t=>t in e)}(e)?function(e){if("Window"!==self.constructor.name)throw Error("self is not a window");return{addEventListener:self.addEventListener.bind(self),removeEventListener:self.removeEventListener.bind(self),postMessage:(t,a)=>e.postMessage(t,"*",a),start:()=>{},close:()=>{}}}(e):function(e){return["onmessage","postMessage","terminate","addEventListener","removeEventListener"].every(t=>t in e)}(e)?{addEventListener:(t=e).addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t),postMessage:t.postMessage.bind(t),start:()=>{},close:t.terminate.bind(t)}:function(e){return{addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e),postMessage:e.postMessage.bind(e),start:()=>{s(e)},close:()=>{e.close&&e.close()}}}(e);var t,a}function s(e){e.start&&e.start()}a.r(t),a.d(t,"getEndpoint",function(){return n}),a.d(t,"activate",function(){return s})},1934:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(1935),s=a.n(n);const r={"editor-server":{level:"silent"},server:{level:"silent"},cli:{level:"silent"},http:{level:"silent"},test:{level:"silent"}},i=()=>{const{logger:e}=s()("neo_one_node"),t=void 0!==e?e.path:void 0,a=void 0!==e?e.level:void 0,n=s()("neo_one_logging",Object.assign({},r,{node:{path:void 0===t?void 0:t,level:void 0===a?"silent":a}}));return void 0!==n["*"]?(e=>({"editor-server":{level:e},server:{level:e},cli:{level:e},http:{level:e},test:{level:e},node:{level:e}}))(n["*"].level):n}},1936:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(36),a(85);var n=a(146),s=a.n(n),r=a(107),i=a(125),o=a(1407),c=a(1414),d=a(1419),u=a(2304);class l{constructor(e){this.blockchain=e,this.mutableAccounts={},this.mutableValidators={}}async getAccount(e){let t=this.mutableAccounts[r.b.uInt160ToHex(e)];return void 0===t&&(t=await this.blockchain.account.tryGet({hash:e})),void 0===t&&(t=new o.a({hash:e})),this.mutableAccounts[r.b.uInt160ToHex(e)]=t,t}async updateAccountBalance(e,t,a){const n=r.b.uInt256ToHex(t);await this.getAccount(e);const s=r.b.uInt160ToHex(e),o=this.mutableAccounts[s],c=o.balances[n];this.mutableAccounts[s]=o.update({balances:Object.assign({},o.balances,{[n]:a.add(void 0===c?i.a.ZERO:c)})})}async getValidator(e){const t=r.b.ecPointToHex(e);let a=this.mutableValidators[t];return void 0===a&&(a=await this.blockchain.validator.tryGet({publicKey:e})),void 0===a&&(a=new c.a({publicKey:e})),this.mutableValidators[t]=a,a}async addValidator(e){this.mutableValidators[r.b.ecPointToHex(e.publicKey)]=e}async deleteValidator(e){this.mutableValidators[r.b.ecPointToHex(e)]=void 0}async updateValidatorVotes(e,t){await this.getValidator(e);const a=r.b.ecPointToHex(e),n=this.mutableValidators[a];if(void 0===n)throw new Error("For Flow");this.mutableValidators[a]=n.update({votes:n.votes.add(t)})}async updateValidator(e,t){await this.getValidator(e);const a=r.b.ecPointToHex(e),n=this.mutableValidators[a];if(void 0===n)throw new Error("For Flow");const s=n.update(t);return this.mutableValidators[a]=s,s}async getAllValidators(){const e=await this.blockchain.validator.all$.pipe(Object(u.a)()).toPromise(),t=s()(e.map(e=>[r.b.ecPointToHex(e.publicKey),e]));return Object.entries(this.mutableValidators).forEach(e=>{let[a,n]=e;const s=r.b.ecPointToHex(a);void 0===n?delete t[s]:t[s]=n}),Object.values(t)}async getValidatorsCount(){let e=this.mutableValidatorsCount;return void 0===e&&(e=await this.blockchain.validatorsCount.tryGet()),void 0===e&&(e=new d.a),this.mutableValidatorsCount=e,e}async updateValidatorsCountVotes(e,t){await this.getValidatorsCount();const a=this.mutableValidatorsCount;if(void 0===a)throw new Error("For Flow");const n=a.votes[e];this.mutableValidatorsCount=a.update({votes:a.votes.slice(0,e).concat((void 0===n?i.a.ZERO:n).add(t)).concat(a.votes.slice(e+1))})}async addValidatorsCount(e){this.mutableValidatorsCount=e}async updateValidatorsCount(e){await this.getValidatorsCount();const t=this.mutableValidatorsCount;if(void 0===t)throw new Error("For Flow");return this.mutableValidatorsCount=t.update(e),this.mutableValidatorsCount}}},1941:function(e,t,a){"use strict";a.d(t,"a",function(){return F});a(36),a(94),a(85);var n=a(758),s=a.n(n),r=a(280),i=a.n(r),o=a(1942),c=a.n(o),d=a(107),u=a(125),l=a(90),h=a(1881),f=a(1883),b=a(1879),p=a(1406),g=a(1412),y=a(1884),m=a(1407),v=a(1867),w=a(1411),S=a(1880),I=a(1882),T=a(1414),x=a(1885),E=a(1886),k=a(710),B=a(1427),A=a(1889),O=a(1890),N=a(1898),U=a(1900),C=a(1899),H=a(1901),z=a(1415),P=a(1419),R=a(1402),M=a(1409),V=a(1408),_=a(728),D=a(101),L=a(1426),K=a(1425),G=a(1943),W=a(1428);class F{constructor(e){this.settings=e.settings,this.currentBlockInternal=e.currentBlock,this.currentHeaderInternal=e.currentHeader,this.storage=e.storage,this.vm=e.vm,this.getValidators=e.getValidators;const t=new G.b(()=>this.storage.output);this.caches={account:new G.g({name:"account",readAllStorage:()=>this.storage.account,update:(e,t)=>e.update(t),getKeyFromValue:e=>({hash:e.hash}),getKeyString:e=>d.b.uInt160ToString(e.hash),createAddChange:e=>({type:"account",value:e}),createDeleteChange:e=>({type:"account",key:e})}),accountUnspent:new G.h({name:"accountUnspent",readGetAllStorage:()=>this.storage.accountUnspent,getKeyFromValue:e=>({hash:e.hash,input:e.input}),getKeyString:e=>"".concat(d.b.uInt160ToString(e.hash),":").concat(d.b.uInt256ToString(e.input.hash),":").concat(e.input.index),matchesPartialKey:(e,t)=>d.b.uInt160Equal(e.hash,t.hash),createAddChange:e=>({type:"accountUnspent",value:e}),createDeleteChange:e=>({type:"accountUnspent",key:e})}),accountUnclaimed:new G.h({name:"accountUnclaimed",readGetAllStorage:()=>this.storage.accountUnclaimed,getKeyFromValue:e=>({hash:e.hash,input:e.input}),getKeyString:e=>"".concat(d.b.uInt160ToString(e.hash),":").concat(d.b.uInt256ToString(e.input.hash),":").concat(e.input.index),matchesPartialKey:(e,t)=>d.b.uInt160Equal(e.hash,t.hash),createAddChange:e=>({type:"accountUnclaimed",value:e}),createDeleteChange:e=>({type:"accountUnclaimed",key:e})}),action:new G.i({name:"action",readGetAllStorage:()=>this.storage.action,getKeyFromValue:e=>({index:e.index}),getKeyString:e=>e.index.toString(10),matchesPartialKey:(e,t)=>(void 0===t.indexStart||e.index.gte(t.indexStart))&&(void 0===t.indexStop||e.index.lte(t.indexStop)),createAddChange:e=>({type:"action",value:e})}),asset:new G.f({name:"asset",readStorage:()=>this.storage.asset,update:(e,t)=>e.update(t),getKeyFromValue:e=>({hash:e.hash}),getKeyString:e=>d.b.uInt256ToString(e.hash),createAddChange:e=>({type:"asset",value:e})}),block:new G.a({name:"block",readStorage:()=>({get:this.storage.block.get,tryGet:this.storage.block.tryGet}),createAddChange:e=>({type:"block",value:e})}),blockData:new G.d({name:"blockData",readStorage:()=>this.storage.blockData,getKeyFromValue:e=>({hash:e.hash}),getKeyString:e=>d.b.uInt256ToString(e.hash),createAddChange:e=>({type:"blockData",value:e})}),header:new G.a({name:"header",readStorage:()=>({get:this.storage.header.get,tryGet:this.storage.header.tryGet}),createAddChange:e=>({type:"header",value:e})}),transaction:new G.d({name:"transaction",readStorage:()=>this.storage.transaction,getKeyFromValue:e=>({hash:e.hash}),getKeyString:e=>d.b.uInt256ToString(e.hash),createAddChange:e=>({type:"transaction",value:e}),onAdd:async e=>{await Promise.all(e.outputs.map(async(a,n)=>t.add({hash:e.hash,index:n,output:a})))},allowDupes:!0}),transactionData:new G.f({name:"transactionData",readStorage:()=>this.storage.transactionData,update:(e,t)=>e.update(t),getKeyFromValue:e=>({hash:e.hash}),getKeyString:e=>d.b.uInt256ToString(e.hash),createAddChange:e=>({type:"transactionData",value:e}),allowDupes:!0}),output:t,contract:new G.c({name:"contract",readStorage:()=>this.storage.contract,getKeyFromValue:e=>({hash:e.hash}),getKeyString:e=>d.b.uInt160ToString(e.hash),createAddChange:e=>({type:"contract",value:e}),createDeleteChange:e=>({type:"contract",key:e})}),storageItem:new G.j({name:"storageItem",readGetAllStorage:()=>this.storage.storageItem,update:(e,t)=>e.update(t),getKeyFromValue:e=>({hash:e.hash,key:e.key}),getKeyString:e=>"".concat(d.b.uInt160ToString(e.hash),":").concat(e.key.toString("hex")),matchesPartialKey:(e,t)=>(void 0===t.hash||d.b.uInt160Equal(e.hash,t.hash))&&(void 0===t.prefix||t.prefix.every((t,a)=>e.key[a]===t)),createAddChange:e=>({type:"storageItem",value:e}),createDeleteChange:e=>({type:"storageItem",key:e})}),validator:new G.g({name:"validator",readAllStorage:()=>this.storage.validator,getKeyFromValue:e=>({publicKey:e.publicKey}),getKeyString:e=>d.b.ecPointToString(e.publicKey),createAddChange:e=>({type:"validator",value:e}),update:(e,t)=>e.update(t),createDeleteChange:e=>({type:"validator",key:e})}),invocationData:new G.d({name:"invocationData",readStorage:()=>this.storage.invocationData,getKeyFromValue:e=>({hash:e.hash}),getKeyString:e=>d.b.uInt256ToString(e.hash),createAddChange:e=>({type:"invocationData",value:e})}),validatorsCount:new G.e({name:"validatorsCount",readStorage:()=>this.storage.validatorsCount,createAddChange:e=>({type:"validatorsCount",value:e}),update:(e,t)=>e.update(t)})},this.account=this.caches.account,this.accountUnspent=this.caches.accountUnspent,this.accountUnclaimed=this.caches.accountUnclaimed,this.action=this.caches.action,this.asset=this.caches.asset,this.block=this.caches.block,this.blockData=this.caches.blockData,this.header=this.caches.header,this.transaction=this.caches.transaction,this.transactionData=this.caches.transactionData,this.output=this.caches.output,this.contract=this.caches.contract,this.storageItem=this.caches.storageItem,this.validator=this.caches.validator,this.invocationData=this.caches.invocationData,this.validatorsCount=this.caches.validatorsCount}get currentBlock(){if(void 0===this.currentBlockInternal)throw new L.c;return this.currentBlockInternal}get currentBlockIndex(){return void 0===this.currentBlockInternal?0:this.currentBlockInternal.index}get currentHeader(){if(void 0===this.currentHeaderInternal)throw new L.c;return this.currentHeaderInternal}getChangeSet(){return Object.values(this.caches).reduce((e,t)=>e.concat(t.getChangeSet()),[])}getTrackedChangeSet(){return Object.values(this.caches).reduce((e,t)=>e.concat(t.getTrackedChangeSet()),[])}async persistBlock(e){const[t,a]=await Promise.all([0===e.index?Promise.resolve(void 0):this.blockData.get({hash:e.previousHash}),Promise.all([...new Set(e.transactions.reduce((e,t)=>e.concat(t.outputs.map(e=>d.b.uInt160ToString(e.address))),[]))].map(async e=>this.contract.tryGet({hash:d.b.stringToUInt160(e)}))),this.block.add(e),this.header.add(e.header)]),n=void 0===t?{lastGlobalTransactionIndex:u.a.NEGATIVE_ONE,lastGlobalActionIndex:u.a.NEGATIVE_ONE,systemFee:u.a.ZERO}:{lastGlobalTransactionIndex:t.lastGlobalTransactionIndex,lastGlobalActionIndex:t.lastGlobalActionIndex,systemFee:t.systemFee},s={};a.filter(_.a.notNull).forEach(e=>{s[e.hashHex]=e});const[r,i]=c()(e.transactions.map((e,t)=>[t,e]),e=>{let[t,a]=e;return(a.type===l.TransactionTypeModel.Claim&&a instanceof h.a||a.type===l.TransactionTypeModel.Contract&&a instanceof f.a||a.type===l.TransactionTypeModel.Miner&&a instanceof b.a)&&!a.outputs.some(e=>void 0!==s[d.b.uInt160ToString(e.address)])}),[o]=await Promise.all([i.length>0?this.persistTransactions(e,i,n.lastGlobalTransactionIndex,n.lastGlobalActionIndex):Promise.resolve(n.lastGlobalActionIndex),r.length>0?this.persistUTXOTransactions(e,r,n.lastGlobalTransactionIndex):Promise.resolve()]);await this.blockData.add(new p.a({hash:e.hash,lastGlobalTransactionIndex:n.lastGlobalTransactionIndex.add(new D.BN(e.transactions.length)),lastGlobalActionIndex:o,systemFee:n.systemFee.add(e.getSystemFee({getOutput:this.output.get,governingToken:this.settings.governingToken,utilityToken:this.settings.utilityToken,fees:this.settings.fees,registerValidatorFee:this.settings.registerValidatorFee}))}))}async persistUTXOTransactions(e,t,a){const n=[],s=[],r=[];for(const e of t){const t=e[1];n.push(...t.inputs),t.type===l.TransactionTypeModel.Claim&&t instanceof h.a&&s.push(...t.claims),r.push(...this.getOutputWithInput(t))}await Promise.all([Promise.all(t.map(async e=>{let[t,a]=e;return this.transaction.add(a)})),Promise.all(t.map(async t=>{let[n,s]=t;return this.transactionData.add(new g.a({hash:s.hash,startHeight:e.index,blockHash:e.hash,index:n,globalIndex:a.add(new D.BN(n+1))}))})),this.updateAccounts(n,s,r),this.updateCoins(n,s,e)])}async persistTransactions(e,t,a,n){let s=n.add(u.a.ONE);for(const[n,r]of t)s=await this.persistTransaction(e,r,n,a,s);return s.sub(u.a.ONE)}async persistTransaction(e,t,a,n,s){let r=s;const i=t,o=i.type===l.TransactionTypeModel.Claim&&i instanceof h.a?i.claims:[];let c={},f={},b=[];if(i.type===l.TransactionTypeModel.State&&i instanceof y.a&&({accountChanges:c,validatorChanges:f,validatorsCountChanges:b}=await Object(K.a)({transactions:[i],getAccount:async e=>this.account.tryGet({hash:e}).then(t=>void 0===t?new m.a({hash:e}):t),governingTokenHash:this.settings.governingToken.hashHex})),await Promise.all([this.transaction.add(i),this.transactionData.add(new g.a({hash:i.hash,blockHash:e.hash,startHeight:e.index,index:a,globalIndex:n.add(new D.BN(a+1))})),this.updateAccounts(i.inputs,o,this.getOutputWithInput(i),c),this.updateCoins(i.inputs,o,e),this.processStateTransaction(f,b)]),i.type===l.TransactionTypeModel.Register&&i instanceof v.a)await this.asset.add(new w.a({hash:i.hash,type:i.asset.type,name:i.asset.name,amount:i.asset.amount,precision:i.asset.precision,owner:i.asset.owner,admin:i.asset.admin,issuer:i.asset.admin,expiration:this.currentBlockIndex+4e6,isFrozen:!1}));else if(i.type===l.TransactionTypeModel.Issue&&i instanceof S.a){const e=await Promise.all(Object.entries(i.getTransactionResults({getOutput:this.output.get})));await Promise.all(e.map(async e=>{let[t,a]=e;const n=d.b.stringToUInt256(t),s=await this.asset.get({hash:n});await this.asset.update(s,{available:s.available.add(a.neg())})}))}else if(i.type===l.TransactionTypeModel.Enrollment&&i instanceof I.a)await this.validator.add(new T.a({publicKey:i.publicKey}));else if(i.type===l.TransactionTypeModel.Publish&&i instanceof x.a){void 0===await this.contract.tryGet({hash:i.contract.hash})&&await this.contract.add(i.contract)}else if(i.type===l.TransactionTypeModel.Invocation&&i instanceof E.a){const t=new F({settings:this.settings,currentBlock:this.currentBlockInternal,currentHeader:this.currentHeader,storage:this,vm:this.vm,getValidators:this.getValidators}),n=[],o=[],c=[],d=await Object(W.a)(async()=>this.vm.executeScripts({scripts:[{code:i.script}],blockchain:t,scriptContainer:{type:k.a.Transaction,value:i},triggerType:B.b.Application,action:{blockIndex:e.index,blockHash:e.hash,transactionIndex:a,transactionHash:i.hash},gas:i.gas,listeners:{onLog:e=>{let{message:t,scriptHash:a}=e;c.push(new A.a({index:r,scriptHash:a,message:t})),r=r.add(u.a.ONE)},onNotify:e=>{let{args:t,scriptHash:a}=e;c.push(new O.a({index:r,scriptHash:a,args:t})),r=r.add(u.a.ONE)},onMigrateContract:e=>{let{from:t,to:a}=e;n.push([t,a])},onSetVotes:e=>{let{address:t,votes:a}=e;o.push([t,a])}},persistingBlock:e})),l=Promise.all(c.map(async e=>this.action.add(e)));if(d instanceof N.a){const c=t.asset.getChangeSet().map(e=>"add"===e.type&&"asset"===e.change.type?e.change.value.hash:void 0).find(e=>void 0!==e),u=t.contract.getChangeSet(),h=u.map(e=>"add"===e.type&&"contract"===e.change.type?e.change.value.hash:void 0).filter(_.a.notNull),f=u.map(e=>"delete"===e.type&&"contract"===e.change.type?e.change.key.hash:void 0).filter(_.a.notNull),b=t.storageItem.getChangeSet().map(e=>{const t="add"===e.type&&"storageItem"===e.change.type?{value:e.change.value,subType:e.subType}:void 0;if(void 0!==t){const e={hash:t.value.hash,key:t.value.key,value:t.value.value};return"add"===t.subType?new U.a(e):new C.a(e)}const a="delete"===e.type&&"storageItem"===e.change.type?e.change.key:void 0;if(void 0!==a)return new H.a(a)}).filter(_.a.notNull);t.getTrackedChangeSet().forEach(e=>{this.caches[e.type].addTrackedChange(e.key,e.value)}),await Promise.all([this.invocationData.add(new z.a({hash:i.hash,assetHash:c,contractHashes:h,deletedContractHashes:f,migratedContractHashes:n,voteUpdates:o,blockIndex:e.index,transactionIndex:a,actionIndexStart:s,actionIndexStop:r,result:d,storageChanges:b})),l])}else await Promise.all([this.invocationData.add(new z.a({hash:i.hash,assetHash:void 0,contractHashes:[],deletedContractHashes:[],migratedContractHashes:[],voteUpdates:[],blockIndex:e.index,transactionIndex:a,actionIndexStart:s,actionIndexStop:r,result:d,storageChanges:[]})),l])}return r}async processStateTransaction(e,t){const a=await this.validatorsCount.tryGet(),n=void 0===a?[]:[...a.votes];for(const[e,a]of t.entries())n[e]=a;await Promise.all([Promise.all(Object.entries(e).map(async e=>{let[t,{registered:a,votes:n}]=e;const s=d.b.hexToECPoint(t),r=await this.validator.tryGet({publicKey:s});void 0===r?await this.validator.add(new T.a({publicKey:s,registered:a,votes:n})):(void 0!==a&&!a||void 0===a&&!r.registered)&&(void 0!==n&&n.eq(u.a.ZERO)||void 0===n&&r.votes.eq(u.a.ZERO))?await this.validator.delete({publicKey:r.publicKey}):await this.validator.update(r,{votes:n,registered:a})})),void 0===a?this.validatorsCount.add(new P.a({votes:n})):(async()=>{await this.validatorsCount.update(a,{votes:n})})()])}async updateAccounts(e,t,a){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const[r,o]=await Promise.all([this.getInputOutputs(e),this.getInputOutputs(t)]),c=Object.entries(i()(r.map(e=>{let{output:t}=e;return[t.address,t.asset,t.value.neg()]}).concat(a.map(e=>{let{output:t}=e;return[t.address,t.asset,t.value]})),e=>{let[t]=e;return d.b.uInt160ToHex(t)})),u=this.groupByAddress(r),l=s()(this.groupByAddress(o),e=>e.map(e=>{let{input:t}=e;return t})),h=i()(a,e=>d.b.uInt160ToHex(e.output.address));await Promise.all(c.map(async e=>{let[t,a]=e;const s=u[t],r=l[t],i=h[t],o=n[t];await this.updateAccount(d.b.hexToUInt160(t),a.map(e=>{let[t,a,n]=e;return[a,n]}),void 0===s?[]:s,void 0===r?[]:r,void 0===i?[]:i,void 0===o?[]:o)}))}getOutputWithInput(e){return e.outputs.map((t,a)=>({output:t,input:new R.a({hash:e.hash,index:a})}))}async getInputOutputs(e){return Promise.all(e.map(async e=>{return{input:e,output:await this.output.get(e)}}))}groupByAddress(e){return i()(e,e=>{let{output:t}=e;return d.b.uInt160ToHex(t.address)})}async updateAccount(e,t,a,n,s,r){const i=await this.account.tryGet({hash:e}),o=t.reduce((e,t)=>{let[a,n]=t;const s=d.b.uInt256ToHex(a);return void 0===e[s]&&(e[s]=u.a.ZERO),e[s]=e[s].add(n),e},void 0===i?{}:Object.entries(i.balances).reduce((e,t)=>{let[a,n]=t;return void 0===n?Object.assign({},e,{[a]:u.a.ZERO}):Object.assign({},e,{[a]:n})},{})),c=[];c.push(...a.map(async t=>{let{input:a}=t;return this.accountUnspent.delete({hash:e,input:a})})),c.push(...s.map(async t=>{let{input:a}=t;return this.accountUnspent.add(new M.a({hash:e,input:a}))})),c.push(...n.map(async t=>this.accountUnclaimed.delete({hash:e,input:t}))),c.push(...a.filter(e=>{let{output:t}=e;return d.b.uInt256Equal(t.asset,this.settings.governingToken.hash)}).map(async t=>{let{input:a}=t;return this.accountUnclaimed.add(new V.a({hash:e,input:a}))})),void 0===i?c.push(this.account.add(new m.a({hash:e,balances:o,votes:r}))):c.push(this.account.update(i,{balances:o,votes:r}).then(async t=>{t.isDeletable()&&await this.account.delete({hash:e})})),await Promise.all(c)}async updateCoins(e,t,a){const n=e.map(e=>({type:"input",input:e,hash:e.hash})).concat(t.map(e=>({type:"claim",input:e,hash:e.hash}))),s=Object.entries(i()(n,e=>{let{hash:t}=e;return d.b.uInt256ToHex(t)}));await Promise.all(s.map(async e=>{let[t,n]=e;return this.updateCoin(d.b.hexToUInt256(t),n,a)}))}async updateCoin(e,t,a){const n=await this.transactionData.get({hash:e}),s=Object.assign({},n.endHeights),r=Object.assign({},n.claimed);for(const e of t)"input"===e.type?s[e.input.index]=a.index:r[e.input.index]=!0;await this.transactionData.update(n,{endHeights:s,claimed:r})}}},1943:function(e,t,a){"use strict";a.d(t,"f",function(){return y}),a.d(t,"c",function(){return m}),a.d(t,"d",function(){return v}),a.d(t,"h",function(){return w}),a.d(t,"j",function(){return S}),a.d(t,"i",function(){return I}),a.d(t,"g",function(){return T}),a.d(t,"a",function(){return x}),a.d(t,"b",function(){return k}),a.d(t,"e",function(){return O});a(36),a(85);var n=a(107),s=a(728),r=a(2305),i=a(1632),o=a(445),c=a(1061),d=a(2278);class u{constructor(e){this.readStorage=e.readStorage,this.name=e.name,this.createAddChange=e.createAddChange,this.createDeleteChange=e.createDeleteChange,this.onAdd=e.onAdd,this.mutableValues={},this.get=function(e){let{tryGetTracked:t,readStorage:a}=e;return async e=>{const n=t(e);if(void 0!==n){if("delete"===n.type)throw new Error("Not found");return n.value}return a().get(e)}}({readStorage:this.readStorage,tryGetTracked:this.tryGetTracked.bind(this)}),this.tryGet=function(e){let{tryGetTracked:t,readStorage:a}=e;return async e=>{const n=t(e);if(void 0!==n){if("delete"===n.type)return;return n.value}return a().tryGet(e)}}({readStorage:this.readStorage,tryGetTracked:this.tryGetTracked.bind(this)}),this.tryGetValue=e=>this.readStorage().tryGet(e)}getChangeSet(){const e=this.createDeleteChange;return Object.values(this.mutableValues).map(t=>{if("delete"===t.type){if(void 0===e)throw new Error("Invalid delete");return{type:"delete",change:e(t.key)}}return{type:"add",change:this.createAddChange(t.addValue),subType:t.subType}})}getTrackedChangeSet(){const e=this.createDeleteChange;return Object.entries(this.mutableValues).map(t=>{let[a,n]=t;if("delete"===n.type){if(void 0===e)throw new Error("Invalid delete");return{type:e(n.key).type,key:a,value:n}}return{type:this.createAddChange(n.addValue).type,key:a,value:n}})}tryGetTracked(e){throw new Error("Not Implemented")}}class l extends u{constructor(e){super({readStorage:e.readStorage,name:e.name,createAddChange:e.createAddChange,createDeleteChange:e.createDeleteChange,onAdd:e.onAdd}),this.getKeyString=e.getKeyString}tryGetTracked(e){return this.mutableValues[this.getKeyString(e)]}addTrackedChange(e,t){this.mutableValues[e]=t}}class h extends l{constructor(e){super({readStorage:()=>({get:e.readAllStorage().get,tryGet:e.readAllStorage().tryGet}),name:e.name,getKeyString:e.getKeyString,createAddChange:e.createAddChange,createDeleteChange:e.createDeleteChange,onAdd:e.onAdd}),this.readAllStorage=e.readAllStorage,this.getKeyFromValue=e.getKeyFromValue,this.all$=Object(r.a)(Object(i.a)(()=>this.readAllStorage().all$.pipe(Object(d.a)(e=>{return void 0!==this.tryGetTracked(this.getKeyFromValue(e))?o.a:Object(c.a)(e)}))),Object(i.a)(()=>Object(c.a)(...Object.values(this.mutableValues).map(e=>"add"===e.type?e.value:void 0).filter(s.a.notNull))))}}class f extends l{constructor(e){super({readStorage:()=>({get:e.readGetAllStorage().get,tryGet:e.readGetAllStorage().tryGet}),name:e.name,getKeyString:e.getKeyString,createAddChange:e.createAddChange,createDeleteChange:e.createDeleteChange,onAdd:e.onAdd}),this.readGetAllStorage=e.readGetAllStorage,this.getKeyFromValue=e.getKeyFromValue,this.matchesPartialKey=e.matchesPartialKey,this.getAll$=e=>Object(r.a)(Object(i.a)(()=>this.readGetAllStorage().getAll$(e).pipe(Object(d.a)(e=>{return void 0!==this.tryGetTracked(this.getKeyFromValue(e))?o.a:Object(c.a)(e)}))),Object(i.a)(()=>Object(c.a)(...Object.values(this.mutableValues).map(t=>"add"===t.type&&this.matchesPartialKey(t.value,e)?t.value:void 0).filter(s.a.notNull))))}}function b(e){let{cache:t,getKeyFromValue:a,getKeyString:n,allowDupes:s}=e;return async e=>{const r=a(e);if(!s){if(void 0!==await t.tryGet(r))throw new Error("Attempted to add an already existing object for key "+"".concat(t.name,":").concat(n(r),"."))}void 0!==t.onAdd&&await t.onAdd(e);const i=t.tryGetTracked(r);t.mutableValues[t.getKeyString(r)]={type:"add",addValue:e,value:e,subType:void 0===i?"add":"update"}}}function p(e){let{cache:t,update:a,getKeyFromValue:n}=e;return async(e,s)=>{const r=n(e),i=a(e,s),o=t.tryGetTracked(r);return t.mutableValues[t.getKeyString(r)]={type:"add",addValue:i,value:i,subType:void 0===o||"delete"===o.type||"update"===o.subType?"update":"add"},i}}function g(e){let{cache:t}=e;return async e=>{void 0===await t.tryGetValue(e)?delete t.mutableValues[t.getKeyString(e)]:t.mutableValues[t.getKeyString(e)]={type:"delete",key:e}}}class y extends l{constructor(e){super({readStorage:e.readStorage,name:e.name,getKeyString:e.getKeyString,createAddChange:e.createAddChange,createDeleteChange:e.createDeleteChange,onAdd:e.onAdd}),this.add=b({cache:this,getKeyFromValue:e.getKeyFromValue,getKeyString:e.getKeyString,allowDupes:e.allowDupes}),this.update=p({cache:this,update:e.update,getKeyFromValue:e.getKeyFromValue})}}class m extends l{constructor(e){super({readStorage:e.readStorage,name:e.name,getKeyString:e.getKeyString,createAddChange:e.createAddChange,createDeleteChange:e.createDeleteChange,onAdd:e.onAdd}),this.add=b({cache:this,getKeyFromValue:e.getKeyFromValue,getKeyString:e.getKeyString}),this.delete=g({cache:this})}}class v extends l{constructor(e){super({readStorage:e.readStorage,name:e.name,getKeyString:e.getKeyString,createAddChange:e.createAddChange,createDeleteChange:e.createDeleteChange,onAdd:e.onAdd}),this.add=b({cache:this,getKeyFromValue:e.getKeyFromValue,getKeyString:e.getKeyString,allowDupes:e.allowDupes})}}class w extends f{constructor(e){super({readGetAllStorage:e.readGetAllStorage,name:e.name,getKeyString:e.getKeyString,createAddChange:e.createAddChange,createDeleteChange:e.createDeleteChange,onAdd:e.onAdd,getKeyFromValue:e.getKeyFromValue,matchesPartialKey:e.matchesPartialKey}),this.add=b({cache:this,getKeyFromValue:e.getKeyFromValue,getKeyString:e.getKeyString}),this.delete=g({cache:this})}}class S extends f{constructor(e){super({readGetAllStorage:e.readGetAllStorage,name:e.name,getKeyString:e.getKeyString,createAddChange:e.createAddChange,createDeleteChange:e.createDeleteChange,onAdd:e.onAdd,getKeyFromValue:e.getKeyFromValue,matchesPartialKey:e.matchesPartialKey}),this.add=b({cache:this,getKeyFromValue:e.getKeyFromValue,getKeyString:e.getKeyString}),this.update=p({cache:this,update:e.update,getKeyFromValue:e.getKeyFromValue}),this.delete=g({cache:this})}}class I extends f{constructor(e){super({readGetAllStorage:e.readGetAllStorage,name:e.name,getKeyString:e.getKeyString,createAddChange:e.createAddChange,createDeleteChange:e.createDeleteChange,onAdd:e.onAdd,getKeyFromValue:e.getKeyFromValue,matchesPartialKey:e.matchesPartialKey}),this.add=b({cache:this,getKeyFromValue:e.getKeyFromValue,getKeyString:e.getKeyString})}}class T extends h{constructor(e){super({readAllStorage:e.readAllStorage,name:e.name,getKeyString:e.getKeyString,createAddChange:e.createAddChange,createDeleteChange:e.createDeleteChange,onAdd:e.onAdd,getKeyFromValue:e.getKeyFromValue}),this.add=b({cache:this,getKeyFromValue:e.getKeyFromValue,getKeyString:e.getKeyString}),this.update=p({cache:this,update:e.update,getKeyFromValue:e.getKeyFromValue}),this.delete=g({cache:this})}}class x extends u{constructor(e){super({readStorage:e.readStorage,name:e.name,createAddChange:e.createAddChange}),this.mutableIndexValues={}}async add(e){if(void 0!==await this.tryGet({hashOrIndex:e.index}))throw new Error("Attempted to add an already existing object.");const t={type:"add",addValue:e,value:e,subType:"add"};this.mutableValues[n.b.uInt256ToString(e.hash)]=t,this.mutableIndexValues["".concat(e.index)]=t}tryGetTracked(e){return"number"!=typeof e.hashOrIndex?this.mutableValues[n.b.uInt256ToString(e.hashOrIndex)]:this.mutableIndexValues["".concat(e.hashOrIndex)]}addTrackedChange(e,t){this.mutableValues[e]=t}}const E=e=>"".concat(n.b.uInt256ToHex(e.hash),":").concat(e.index);class k extends l{constructor(e){super({readStorage:e,name:"output",getKeyString:E,createAddChange:e=>({type:"output",value:e})}),this.add=async e=>{const t={hash:e.hash,index:e.index};if(void 0!==await this.tryGet(t))throw new Error("Attempted to add an already existing object for key "+"".concat(this.name,":").concat(this.getKeyString(t),"."));this.mutableValues[this.getKeyString(t)]={type:"add",addValue:e,value:e.output,subType:"add"}}}}class B{constructor(e){this.readStorage=e.readStorage,this.name=e.name,this.createAddChange=e.createAddChange,this.createDeleteChange=e.createDeleteChange,this.onAdd=e.onAdd,this.get=function(e){let{tryGetTracked:t,readStorage:a}=e;return async()=>{const e=t();if(void 0!==e){if("delete"===e.type)throw new Error("Not found");return e.value}return a().get()}}({readStorage:this.readStorage,tryGetTracked:this.tryGetTracked.bind(this)}),this.tryGet=function(e){let{tryGetTracked:t,readStorage:a}=e;return async()=>{const e=t();if(void 0!==e){if("delete"===e.type)return;return e.value}return a().tryGet()}}({readStorage:this.readStorage,tryGetTracked:this.tryGetTracked.bind(this)})}getChangeSet(){const e=this.createDeleteChange,t=this.mutableValue;if(void 0===t)return[];if("delete"===t.type){if(void 0===e)throw new Error("Invalid delete");return[{type:"delete",change:e()}]}return[{type:"add",change:this.createAddChange(t.addValue),subType:t.subType}]}getTrackedChangeSet(){const e=this.createDeleteChange,t=this.mutableValue;if(void 0===t)return[];if("delete"===t.type){if(void 0===e)throw new Error("Invalid delete");return[{type:e().type,key:"metadata",value:Object.assign({},t,{key:"metadata"})}]}return[{type:this.createAddChange(t.addValue).type,key:"metadata",value:t}]}tryGetTracked(){return this.mutableValue}addTrackedChange(e,t){this.mutableValue=t}}class A extends B{}class O extends A{constructor(e){super({readStorage:e.readStorage,name:e.name,createAddChange:e.createAddChange,createDeleteChange:e.createDeleteChange,onAdd:e.onAdd}),this.add=function(e){let{cache:t}=e;return async e=>{void 0!==t.onAdd&&await t.onAdd(e),t.mutableValue={type:"add",addValue:e,value:e,subType:"add"}}}({cache:this}),this.update=function(e){let{cache:t,update:a}=e;return async(e,n)=>{const s=a(e,n);return t.mutableValue={type:"add",addValue:s,value:s,subType:"update"},s}}({cache:this,update:e.update})}}},1947:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return m});a(36);var n=a(149),s=a.n(n),r=a(90),i=a(125),o=a(152),c=a(2303),d=a(761),u=a(165),l=a(776),h=a(1948);const f=c.a.child({component:"vm"}),b=e=>"".concat(e.message,"\n").concat(e.stack),p=async e=>{let{context:t}=e,a=t;if(a.state!==r.VMState.None)return a;if(a.pc>=a.code.length)return Object.assign({},a,{state:r.VMState.Halt});const{op:n,context:o}=Object(h.a)({context:a});if((a=o).stack.length<n.in)throw new l.K(a,n.name,a.stack.length,n.in);if(a.stackAlt.length<n.inAlt)throw new l.b(a);if(a.depth+n.invocation>u.g)throw new l.x(a);const c=a.stack.slice(0,n.in),d=a.stackAlt.slice(0,n.inAlt);if((a=Object.assign({},a,{stack:a.stack.slice(n.in),stackAlt:a.stackAlt.slice(n.inAlt),stackCount:a.stackCount+c.reduce((e,t)=>e+t.decrement(),0)+d.reduce((e,t)=>e+t.decrement(),0),gasLeft:a.gasLeft.sub(n.fee)})).gasLeft.lt(i.a.ZERO))throw new l.C(a);let f;try{f=await n.invoke({context:a,args:c,argsAlt:d})}catch(e){if("VM_ERROR"===e.code)throw e;const t=new l.N(a,"VM Error: ".concat(e.message));throw t.stack=e.stack,t}const{context:b,results:p,resultsAlt:g}=f;if(a=b,n.out>0){if(void 0===p||p.length!==n.out)throw new l.Q(a);a=Object.assign({},a,{stack:s()(p).concat(a.stack),stackCount:a.stackCount+p.reduce((e,t)=>e+t.increment(),0)})}else if(void 0!==p)throw new l.Q(a);if(n.outAlt>0){if(void 0===g||g.length!==n.outAlt)throw new l.Q(a);a=Object.assign({},a,{stackAlt:s()(g).concat(a.stackAlt),stackCount:a.stackCount+g.reduce((e,t)=>e+t.increment(),0)})}else if(void 0!==g)throw new l.Q(a);if(a.stackCount>u.k)throw new l.J(a);return a},g=async e=>{let{context:t}=e,a=t;for(;a.state===r.VMState.None;)try{a=await p({context:a})}catch(e){a={state:r.VMState.Fault,errorMessage:b(e),blockchain:a.blockchain,init:a.init,engine:a.engine,code:a.code,scriptHashStack:a.scriptHashStack,scriptHash:a.scriptHash,callingScriptHash:a.callingScriptHash,entryScriptHash:a.entryScriptHash,pc:a.pc,depth:a.depth,stack:a.stack,stackAlt:a.stackAlt,gasLeft:a.gasLeft,createdContracts:a.createdContracts,returnValueCount:a.returnValueCount,stackCount:a.stackCount}}return a},y=async e=>{let{code:t,blockchain:a,init:n,gasLeft:s,options:{scriptHashStack:i=[],scriptHash:c,entryScriptHash:d=c,depth:u=1,stack:l=[],stackAlt:h=[],createdContracts:b={},returnValueCount:p=-1,stackCount:m=0,pc:v=0}={}}=e;const w=o.a.hash160(t),S={state:r.VMState.None,blockchain:a,init:n,engine:{run:g,executeScript:y},code:t,scriptHashStack:i,scriptHash:w,callingScriptHash:c,entryScriptHash:void 0===d?w:d,pc:v,depth:u,stack:l,stackAlt:h,gasLeft:s,createdContracts:b,returnValueCount:p,stackCount:m};try{const e=await g({context:S});return f.trace({title:"neo_execute_script"}),e}catch(e){throw f.trace({title:"neo_execute_script",error:e}),e}},m=async t=>{let{scripts:a,blockchain:n,scriptContainer:s,triggerType:c,action:l,returnValueCount:h=-1,gas:f,listeners:p={},skipWitnessVerify:g=!1,persistingBlock:m}=t;const v={scriptContainer:s,triggerType:c,action:l,listeners:p,skipWitnessVerify:g,persistingBlock:m};let w;const S=f.add(u.d);let I,T=S;try{const e=o.a.hash160(a[0].code);for(let t=0;t<a.length&&(void 0===w||w.state===r.VMState.Halt);t+=1){const s=a[t],r=t-1>=0?o.a.hash160(a[t-1].code):void 0;let i={depth:a.length-t,stack:[],stackAlt:[],createdContracts:{},scriptHashStack:[e],scriptHash:r,entryScriptHash:e,returnValueCount:h,stackCount:0};void 0!==w&&(i={depth:a.length-t,stack:w.stack,stackAlt:w.stackAlt,createdContracts:w.createdContracts,scriptHashStack:w.scriptHashStack,scriptHash:r,entryScriptHash:e,returnValueCount:h,stackCount:w.stackCount}),T=(w=await y({code:s.code,blockchain:n,init:v,gasLeft:T,options:i})).gasLeft}}catch(e){I=b(e)}const x=w;if(void 0===x)return{state:void 0===I?r.VMState.Halt:r.VMState.Fault,stack:[],stackAlt:[],gasConsumed:i.a.ZERO,gasCost:i.a.ZERO,errorMessage:I};const E=S.sub(x.gasLeft);let k=E.sub(u.d);k.lt(i.a.ZERO)&&(k=i.a.ZERO);const B=void 0===I?x.state:r.VMState.Fault,A=t=>((t,a)=>{if(a)try{return t.toContractParameter()}catch(t){return new d.a(e.alloc(0,0))}return t.toContractParameter()})(t,B===r.VMState.Fault);return{state:void 0===I?x.state:r.VMState.Fault,stack:x.stack.map(A),stackAlt:x.stackAlt.map(A),gasConsumed:k,gasCost:E,errorMessage:void 0===I?x.errorMessage:I}}}).call(this,a(92).Buffer)},1948:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return M});a(36),a(85);var n=a(146),s=a.n(n),r=a(151),i=a.n(r),o=a(90),c=a(125),d=a(107),u=a(152),l=a(1431),h=a(101),f=a(165),b=a(776),p=a(389),g=a(344),y=a(251),m=a(391),v=a(388),w=a(1952),S=a(1951),I=a(392),T=a(1949),x=a(1430);const E=e=>{let{name:t,in:a=0,inAlt:n=0,out:s=0,outAlt:r=0,invocation:i=0,fee:d,invoke:u}=e,l=d;if(void 0===l){l=o.Op[t]<=o.Op.NOP?c.a.ZERO:f.c.ONE}return{type:"op",op:{name:t,in:a,inAlt:n,out:s,outAlt:r,invocation:i,fee:l,invoke:u}}},k=e=>{let{name:t,value:a}=e;return E({name:t,out:1,invoke:e=>{let{context:t}=e;return{context:t,results:[new p.a(new h.BN(a))]}}})},B=e=>{let{name:t,numBytes:a}=e;return E({name:t,out:1,invoke:e=>{let{context:t}=e;const{code:n,pc:s}=t;let r;if(r=1===a?n.readUInt8(t.pc):2===a?n.readUInt16LE(s):n.readInt32LE(s),n.length<s+a+r-1)throw new b.d(t);const i=n.slice(s+a,s+a+r);if(i.length>f.h)throw new b.y(t);return{context:Object.assign({},t,{pc:s+a+r}),results:[new g.a(i)]}}})},A=e=>{let{name:t,checkTrue:a}=e;return E({name:t,in:void 0===a?0:1,invoke:e=>{let{context:t,args:n}=e;const{code:s}=t;let{pc:r}=t;const i=s.readInt16LE(r),o=(r+=2)+i-3;if(o<0||o>s.length)throw new b.d(t);let c=!0;return void 0!==a&&(c=n[0].asBoolean(),a||(c=!c)),{context:Object.assign({},t,{pc:c?o:r})}}})},O=e=>d.b.uInt160ToBuffer(e).every(e=>0===e),N=e=>{let{name:t,tailCall:a}=e;return{type:"create",create:e=>{let{context:n}=e;const s=d.b.bufferToUInt160(n.code.slice(n.pc,n.pc+20)),{op:r}=E({name:t,in:O(s)?1:0,invocation:a?0:1,fee:f.c.TEN,invoke:async e=>{let{context:t,args:n}=e;const{pc:s,scriptHash:r}=t;let i=d.b.bufferToUInt160(t.code.slice(s,s+20));if(O(i)){if(i=d.b.bufferToUInt160(n[0].asBuffer()),!(await t.blockchain.contract.get({hash:r})).hasDynamicInvoke)throw new b.g(t,d.b.uInt160ToString(r))}const c=await t.blockchain.contract.get({hash:i}),u=[i,...t.scriptHashStack],l=await t.engine.executeScript({code:c.script,blockchain:t.blockchain,init:t.init,gasLeft:t.gasLeft,options:{stack:t.stack,stackAlt:t.stackAlt,depth:a?t.depth:t.depth+1,createdContracts:t.createdContracts,scriptHashStack:a?u.slice(0,u.length-1):u,scriptHash:t.scriptHash,entryScriptHash:t.entryScriptHash,returnValueCount:-1,stackCount:t.stackCount}});let{state:h}=l;return h===o.VMState.Halt&&(h=a?o.VMState.Halt:t.state),{context:{state:h,errorMessage:l.errorMessage,blockchain:t.blockchain,init:t.init,engine:t.engine,code:t.code,scriptHashStack:a?t.scriptHashStack.slice(0,t.scriptHashStack.length-1):t.scriptHashStack,scriptHash:t.scriptHash,callingScriptHash:t.callingScriptHash,entryScriptHash:t.entryScriptHash,pc:s+20,depth:t.depth,returnValueCount:t.returnValueCount,stackCount:l.stackCount,stack:l.stack,stackAlt:l.stackAlt,gasLeft:l.gasLeft,createdContracts:l.createdContracts}}}});return{op:r,context:n}}}},U=e=>{let{name:t,dynamicCall:a,tailCall:n}=e;return{type:"create",create:e=>{let{context:s}=e;const r=s.code.slice(s.pc,s.pc+1)[0],i=s.code.slice(s.pc+1,s.pc+2)[0],c=a?s.pc+2:s.pc+22,{op:u}=E({name:t,in:i+(a?1:0),invocation:n?0:1,invoke:async e=>{let{context:t,args:s}=e;const{pc:i,scriptHash:u}=t,l=a?d.b.bufferToUInt160(s[0].asBuffer()):d.b.bufferToUInt160(t.code.slice(i+2,i+22));if(n&&t.returnValueCount!==r)throw new b.v(t,t.returnValueCount,r);if(a){if(!(await t.blockchain.contract.get({hash:u})).hasDynamicInvoke)throw new b.g(t,d.b.uInt160ToString(u))}const h=await t.blockchain.contract.get({hash:l}),f=a?s.slice(1):s,p=[l,...t.scriptHashStack],g=await t.engine.executeScript({code:h.script,blockchain:t.blockchain,init:t.init,gasLeft:t.gasLeft,options:{stack:f,stackAlt:[],depth:n?t.depth:t.depth+1,createdContracts:t.createdContracts,scriptHashStack:n?p.slice(0,p.length-1):p,scriptHash:t.scriptHash,entryScriptHash:t.entryScriptHash,returnValueCount:r,stackCount:t.stackCount+f.reduce((e,t)=>e+t.increment(),0)}});let{state:y,stackCount:m}=g;y===o.VMState.Halt&&(y=n?o.VMState.Halt:t.state);let v=[];if(-1===r)v=g.stack;else if(r>0){if(g.state===o.VMState.Halt&&g.stack.length<r)throw new b.i(t,g.stack.length,r);v=g.stack.slice(0,r),m+=g.stack.slice(r).reduce((e,t)=>e+t.decrement(),0)}return m+=g.stackAlt.reduce((e,t)=>e+t.decrement(),0),{context:{state:y,errorMessage:g.errorMessage,blockchain:t.blockchain,init:t.init,engine:t.engine,code:t.code,scriptHashStack:n?t.scriptHashStack.slice(0,t.scriptHashStack.length-1):t.scriptHashStack,scriptHash:t.scriptHash,callingScriptHash:t.callingScriptHash,entryScriptHash:t.entryScriptHash,pc:c,depth:t.depth,returnValueCount:t.returnValueCount,stackCount:m,stack:v.concat(t.stack),stackAlt:t.stackAlt,gasLeft:g.gasLeft,createdContracts:g.createdContracts}}}});return{op:u,context:s}}}},C=e=>{let{name:t}=e;return E({name:t,in:1,out:1,invoke:e=>{let a,{context:n,args:s}=e;if(s[0].isArray()){const e=s[0].asArray();a="NEWARRAY"===t?[new y.a(e)]:[new m.a(e)]}else{const e=x.a.toNumber(n,s[0].asBigIntegerUnsafe());if(e>f.e)throw new b.f(n);const r=i()(0,e).map(()=>new v.a(!1));a="NEWARRAY"===t?[new y.a(r)]:[new m.a(r)]}return{context:n,results:a}}})},H=A({name:"JMP"}),z=[[0,E({name:"PUSH0",out:1,invoke:t=>{let{context:a}=t;return{context:a,results:[new g.a(e.alloc(0,0))]}}})]].concat(i()(1,76).map(e=>[e,E({name:"PUSHBYTES".concat(e),out:1,invoke:t=>{let{context:a}=t;return{context:Object.assign({},a,{pc:a.pc+e}),results:[new g.a(a.code.slice(a.pc,a.pc+e))]}}})])).concat([[76,B({name:"PUSHDATA1",numBytes:1})],[77,B({name:"PUSHDATA2",numBytes:2})],[78,B({name:"PUSHDATA4",numBytes:4})],[79,k({name:"PUSHM1",value:-1})]]).concat(i()(81,97).map(e=>{const t=e-80;return[e,k({name:"PUSH".concat(t),value:t})]})).concat([[97,E({name:"NOP",invoke:e=>{let{context:t}=e;return{context:t}}})],[98,H],[99,A({name:"JMPIF",checkTrue:!0})],[100,A({name:"JMPIFNOT",checkTrue:!1})],[101,E({name:"CALL",invocation:1,invoke:async e=>{let{context:t}=e;const{pc:a}=t,{op:n}=H,{context:s}=await n.invoke({context:Object.assign({},t,{callingScriptHash:t.scriptHash}),args:[],argsAlt:[]}),r=await t.engine.run({context:Object.assign({},s,{depth:t.depth+1})});return{context:Object.assign({},r,{callingScriptHash:t.callingScriptHash,pc:a+2,state:r.state===o.VMState.Fault?o.VMState.Fault:o.VMState.None,depth:t.depth})}}})],[102,E({name:"RET",invoke:e=>{let{context:t}=e;return{context:Object.assign({},t,{state:o.VMState.Halt})}}})],[103,N({name:"APPCALL"})],[104,{type:"create",create:e=>{let{context:t}=e;const a=Object(T.a)({context:t});return{op:{name:"SYSCALL",in:a.in,inAlt:a.inAlt,out:a.out,outAlt:a.outAlt,invocation:a.invocation,fee:a.fee,invoke:a.invoke},context:a.context}}}],[105,N({name:"TAILCALL",tailCall:!0})],[106,E({name:"DUPFROMALTSTACK",inAlt:1,out:1,outAlt:1,invoke:e=>{let{context:t,argsAlt:a}=e;return{context:t,results:[a[0]],resultsAlt:[a[0]]}}})],[107,E({name:"TOALTSTACK",in:1,outAlt:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,resultsAlt:[a[0]]}}})],[108,E({name:"FROMALTSTACK",inAlt:1,out:1,invoke:e=>{let{context:t,argsAlt:a}=e;return{context:t,results:[a[0]]}}})],[109,E({name:"XDROP",in:1,invoke:e=>{let{context:t,args:a}=e;const n=x.a.toNumber(t,a[0].asBigIntegerUnsafe());if(n<0)throw new b.T(t);const{stack:s}=t;if(n>=s.length)throw new b.U(t);return{context:Object.assign({},t,{stack:s.slice(0,n).concat(s.slice(n+1)),stackCount:t.stackCount+s[n].decrement()})}}})],[114,E({name:"XSWAP",in:1,invoke:e=>{let{context:t,args:a}=e;const n=x.a.toNumber(t,a[0].asBigIntegerUnsafe());if(n<0)throw new b.V(t);const s=[...t.stack];return s[n]=t.stack[0],s[0]=t.stack[n],{context:Object.assign({},t,{stack:s})}}})],[115,E({name:"XTUCK",in:1,invoke:e=>{let{context:t,args:a}=e;const n=x.a.toNumber(t,a[0].asBigIntegerUnsafe());if(n<=0)throw new b.W(t);const{stack:s}=t;return{context:Object.assign({},t,{stack:s.slice(0,n).concat([s[0]]).concat(s.slice(n)),stackCount:t.stackCount+s[0].increment()})}}})],[116,E({name:"DEPTH",out:1,invoke:e=>{let{context:t}=e;return{context:t,results:[new p.a(new h.BN(t.stack.length))]}}})],[117,E({name:"DROP",in:1,invoke:e=>{let{context:t}=e;return{context:t}}})],[118,E({name:"DUP",in:1,out:2,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[a[0],a[0]]}}})],[119,E({name:"NIP",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[a[0]]}}})],[120,E({name:"OVER",in:2,out:3,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[a[1],a[0],a[1]]}}})],[121,E({name:"PICK",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;const n=x.a.toNumber(t,a[0].asBigIntegerUnsafe());if(n<0)throw new b.D(t);if(n>=t.stack.length)throw new b.K(t,"PICK",t.stack.length,n+1);return{context:t,results:[t.stack[n]]}}})],[122,E({name:"ROLL",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;const n=x.a.toNumber(t,a[0].asBigIntegerUnsafe());if(n<0)throw new b.H(t);if(n>=t.stack.length)throw new b.K(t,"ROLL",t.stack.length,n+1);const{stack:s}=t;return{context:Object.assign({},t,{stack:s.slice(0,n).concat(s.slice(n+1)),stackCount:t.stackCount+s[n].decrement()}),results:[t.stack[n]]}}})],[123,E({name:"ROT",in:3,out:3,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[a[1],a[0],a[2]]}}})],[124,E({name:"SWAP",in:2,out:2,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[a[0],a[1]]}}})],[125,E({name:"TUCK",in:2,out:3,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[a[0],a[1],a[0]]}}})],[126,E({name:"CAT",in:2,out:1,invoke:t=>{let{context:a,args:n}=t;const s=e.concat([n[1].asBuffer(),n[0].asBuffer()]);if(s.length>f.h)throw new b.y(a);return{context:a,results:[new g.a(s)]}}})],[127,E({name:"SUBSTR",in:3,out:1,invoke:e=>{let{context:t,args:a}=e;const n=x.a.toNumber(t,a[0].asBigIntegerUnsafe());if(n<0)throw new b.L(t);const s=x.a.toNumber(t,a[1].asBigIntegerUnsafe());if(s<0)throw new b.M(t);return{context:t,results:[new g.a(a[2].asBuffer().slice(s,s+n))]}}})],[128,E({name:"LEFT",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;const n=x.a.toNumber(t,a[0].asBigIntegerUnsafe());if(n<0)throw new b.z(t);return{context:t,results:[new g.a(a[1].asBuffer().slice(0,n))]}}})],[129,E({name:"RIGHT",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;const n=x.a.toNumber(t,a[0].asBigIntegerUnsafe());if(n<0)throw new b.G(t);const s=a[1].asBuffer();if(s.length<n)throw new b.F(t);return{context:t,results:[new g.a(s.slice(s.length-n,s.length))]}}})],[130,E({name:"SIZE",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(new h.BN(a[0].asBuffer().length))]}}})],[131,E({name:"INVERT",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(c.a.fromSignedBuffer(l.a.buffer.not(c.a.toSignedBuffer(a[0].asBigIntegerUnsafe()))))]}}})],[132,E({name:"AND",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(x.a.bitwiseOp(l.a.buffer.and,a[0].asBigIntegerUnsafe(),a[1].asBigIntegerUnsafe()))]}}})],[133,E({name:"OR",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(x.a.bitwiseOp(l.a.buffer.or,a[0].asBigIntegerUnsafe(),a[1].asBigIntegerUnsafe()))]}}})],[134,E({name:"XOR",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(x.a.bitwiseOp(l.a.buffer.xor,a[0].asBigIntegerUnsafe(),a[1].asBigIntegerUnsafe()))]}}})],[135,E({name:"EQUAL",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new v.a(a[0].equals(a[1]))]}}})],[139,E({name:"INC",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(a[0].asBigInteger(t.blockchain.currentBlockIndex).add(c.a.ONE))]}}})],[140,E({name:"DEC",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(a[0].asBigInteger(t.blockchain.currentBlockIndex).sub(c.a.ONE))]}}})],[141,E({name:"SIGN",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;const n=a[0].asBigIntegerUnsafe(),s=[];return n.isZero()?s.push(new p.a(c.a.ZERO)):n.isNeg()?s.push(new p.a(c.a.NEGATIVE_ONE)):s.push(new p.a(c.a.ONE)),{context:t,results:s}}})],[143,E({name:"NEGATE",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(a[0].asBigIntegerUnsafe().neg())]}}})],[144,E({name:"ABS",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(a[0].asBigIntegerUnsafe().abs())]}}})],[145,E({name:"NOT",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new v.a(!a[0].asBoolean())]}}})],[146,E({name:"NZ",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new v.a(!a[0].asBigIntegerUnsafe().isZero())]}}})],[147,E({name:"ADD",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(a[1].asBigInteger(t.blockchain.currentBlockIndex).add(a[0].asBigInteger(t.blockchain.currentBlockIndex)))]}}})],[148,E({name:"SUB",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(a[1].asBigInteger(t.blockchain.currentBlockIndex).sub(a[0].asBigInteger(t.blockchain.currentBlockIndex)))]}}})],[149,E({name:"MUL",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(a[1].asBigInteger(t.blockchain.currentBlockIndex).mul(a[0].asBigInteger(t.blockchain.currentBlockIndex)))]}}})],[150,E({name:"DIV",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(a[1].asBigInteger(t.blockchain.currentBlockIndex).div(a[0].asBigInteger(t.blockchain.currentBlockIndex)))]}}})],[151,E({name:"MOD",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(a[1].asBigInteger(t.blockchain.currentBlockIndex).mod(a[0].asBigInteger(t.blockchain.currentBlockIndex)))]}}})],[152,E({name:"SHL",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;const n=a[0].asBigIntegerUnsafe();if(n.toNumber()>f.i||n.toNumber()<f.l)throw new b.I(t);const s=a[1].asBigIntegerUnsafe();return{context:t,results:[new p.a(x.a.shiftLeft(s,n))]}}})],[153,E({name:"SHR",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;const n=a[0].asBigIntegerUnsafe();if(n.toNumber()>f.i||n.toNumber()<f.l)throw new b.I(t);const s=a[1].asBigIntegerUnsafe();return{context:t,results:[new p.a(x.a.shiftRight(s,n))]}}})],[154,E({name:"BOOLAND",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new v.a(a[0].asBoolean()&&a[1].asBoolean())]}}})],[155,E({name:"BOOLOR",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new v.a(a[0].asBoolean()||a[1].asBoolean())]}}})],[156,E({name:"NUMEQUAL",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new v.a(a[0].asBigIntegerUnsafe().eq(a[1].asBigIntegerUnsafe()))]}}})],[158,E({name:"NUMNOTEQUAL",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new v.a(!a[0].asBigIntegerUnsafe().eq(a[1].asBigIntegerUnsafe()))]}}})],[159,E({name:"LT",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new v.a(a[1].asBigIntegerUnsafe().lt(a[0].asBigIntegerUnsafe()))]}}})],[160,E({name:"GT",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new v.a(a[1].asBigIntegerUnsafe().gt(a[0].asBigIntegerUnsafe()))]}}})],[161,E({name:"LTE",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new v.a(a[1].asBigIntegerUnsafe().lte(a[0].asBigIntegerUnsafe()))]}}})],[162,E({name:"GTE",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new v.a(a[1].asBigIntegerUnsafe().gte(a[0].asBigIntegerUnsafe()))]}}})],[163,E({name:"MIN",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(h.BN.min(a[1].asBigIntegerUnsafe(),a[0].asBigIntegerUnsafe()))]}}})],[164,E({name:"MAX",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(h.BN.max(a[1].asBigIntegerUnsafe(),a[0].asBigIntegerUnsafe()))]}}})],[165,E({name:"WITHIN",in:3,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new v.a(a[1].asBigIntegerUnsafe().lte(a[2].asBigIntegerUnsafe())&&a[2].asBigIntegerUnsafe().lt(a[0].asBigIntegerUnsafe()))]}}})],[167,E({name:"SHA1",in:1,out:1,fee:f.c.TEN,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new g.a(u.a.sha1(a[0].asBuffer()))]}}})],[168,E({name:"SHA256",in:1,out:1,fee:f.c.TEN,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new g.a(u.a.sha256(a[0].asBuffer()))]}}})],[169,E({name:"HASH160",in:1,out:1,fee:f.c.TWENTY,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new w.a(u.a.hash160(a[0].asBuffer()))]}}})],[170,E({name:"HASH256",in:1,out:1,fee:f.c.TWENTY,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new S.a(u.a.hash256(a[0].asBuffer()))]}}})],[172,E({name:"CHECKSIG",in:2,out:1,fee:f.c.ONE_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;const n=a[0].asECPoint(),s=a[1].asBuffer();let r;try{r=await u.a.verify({message:t.init.scriptContainer.value.message,signature:s,publicKey:n})}catch(e){r=!1}return{context:t,results:[new v.a(r)]}}})],[173,E({name:"VERIFY",in:3,out:1,fee:f.c.ONE_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;const n=a[0].asECPoint(),s=a[1].asBuffer(),r=a[2].asBuffer();let i;try{i=await u.a.verify({message:r,signature:s,publicKey:n})}catch(e){i=!1}return{context:t,results:[new v.a(i)]}}})],[174,{type:"create",create:e=>{let{context:t}=e;const{stack:a}=t,n=a[0];let s,r=0;if(void 0===n||n.isArray())void 0!==n&&(r=n.asArray().length),s=1;else{if((r=x.a.toNumber(t,n.asBigIntegerUnsafe()))<=0)throw new b.k(t);s=r+1}const i=a[s];if(void 0===i||i.isArray())s+=1;else{const e=x.a.toNumber(t,i.asBigIntegerUnsafe());if(e<0)throw new b.k(t);s+=e+1}const{op:o}=E({name:"CHECKMULTISIG",in:s,out:1,fee:0===r?f.c.ONE:f.c.ONE_HUNDRED.mul(new h.BN(r)),invoke:e=>{let t,a,{context:n,args:s}=e;if(s[0].isArray())t=1,a=s[0].asArray().map(e=>e.asECPoint());else{t=x.a.toNumber(n,s[0].asBigIntegerUnsafe())+1,a=s.slice(1,t).map(e=>e.asECPoint())}const r=s[t].isArray()?s[t].asArray().map(e=>e.asBuffer()):s.slice(t+1).map(e=>e.asBuffer());if(0===a.length||0===r.length||r.length>a.length)throw new b.k(n);let i=!0;const o=a.length,c=r.length;try{for(let e=0,t=0;i&&e<c&&t<o;){u.a.verify({message:n.init.scriptContainer.value.message,signature:r[e],publicKey:a[t]})&&(e+=1),c-e>o-(t+=1)&&(i=!1)}}catch(e){i=!1}return{context:n,results:[new v.a(i)]}}});return{op:o,context:t}}}],[192,E({name:"ARRAYSIZE",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new p.a(new h.BN(a[0].size))]}}})],[193,{type:"create",create:e=>{let{context:t}=e;const{stack:a}=t,n=a[0];let s;if(void 0===n)s=1;else{if((s=x.a.toNumber(t,n.asBigIntegerUnsafe())+1)<0)throw new b.r(t);if(s>f.e)throw new b.f(t)}const{op:r}=E({name:"PACK",in:s,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new y.a(a.slice(1))]}}});return{op:r,context:t}}}],[194,{type:"create",create:e=>{let{context:t}=e;const{stack:a}=t,n=a[0],s=void 0===n?1:n.asArray().length+1,{op:r}=E({name:"UNPACK",in:1,out:s,invoke:e=>{let{context:t,args:a}=e;const n=a[0].asArray(),s=[];for(let e=n.length-1;e>=0;e-=1)s.push(n[e]);return s.push(new p.a(new h.BN(n.length))),{context:t,results:s}}});return{op:r,context:t}}}],[195,E({name:"PICKITEM",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;if(a[1].isArray()){const e=x.a.toNumber(t,a[0].asBigIntegerUnsafe()),n=a[1].asArray();if(e<0||e>=n.length)throw new b.s(t,"".concat(e),JSON.stringify(a[1].convertJSON()));return{context:t,results:[n[e]]}}const n=a[0],s=a[1].asMapStackItem();if(!s.has(n))throw new b.s(t,n.toStructuralKey(),JSON.stringify(a[1].convertJSON()));return{context:t,results:[s.get(n)]}}})],[196,E({name:"SETITEM",in:3,invoke:e=>{let{context:t,args:a}=e,n=a[0];if(n instanceof m.a&&(n=n.clone()),a[2].isArray()){const e=x.a.toNumber(t,a[1].asBigIntegerUnsafe()),s=a[2].asArray();if(e<0||e>=s.length)throw new b.u(t);const r=s[e];s[e]=n;const i=new Set([a[2]]);return{context:Object.assign({},t,{stackCount:t.stackCount+(a[2].referenceCount>0?r.decrement(i)+n.increment(i):0)})}}const s=a[1],r=a[2].asMapStackItem(),i=r.has(s)?r.get(s):void 0;if(r.set(s,n),r.size>f.e)throw new b.f(t);const o=new Set([a[2]]);return{context:Object.assign({},t,{stackCount:t.stackCount+(a[2].referenceCount>0?(void 0===i?s.increment(o):i.decrement())+n.increment(o):0)})}}})],[197,C({name:"NEWARRAY"})],[198,C({name:"NEWSTRUCT"})],[199,E({name:"NEWMAP",out:1,invoke:e=>{let{context:t}=e;return{context:t,results:[new I.a]}}})],[200,E({name:"APPEND",in:2,invoke:e=>{let{context:t,args:a}=e,n=a[0];n instanceof m.a&&(n=n.clone());const s=a[1].asArray();if(s.push(n),s.length>f.e)throw new b.f(t);return{context:Object.assign({},t,{stackCount:t.stackCount+(a[1].referenceCount>0?n.increment(new Set([a[1]])):0)})}}})],[201,E({name:"REVERSE",in:1,invoke:e=>{let{context:t,args:a}=e;return a[0].asArray().reverse(),{context:t}}})],[202,E({name:"REMOVE",in:2,invoke:e=>{let{context:t,args:a}=e;if(a[1].isArray()){const e=x.a.toNumber(t,a[0].asBigIntegerUnsafe()),n=a[1].asArray();if(e<0||e>=n.length)throw new b.t(t,e);const s=n[e];return n.splice(e,1),{context:Object.assign({},t,{stackCount:t.stackCount+(s.referenceCount>0?s.decrement(new Set([a[1]])):0)})}}const n=a[0],s=a[1].asMapStackItem();if(s.has(n)){const e=s.get(n);s.delete(n);const r=new Set([a[1]]);return{context:Object.assign({},t,{stackCount:t.stackCount+(n.referenceCount>0?n.decrement(r):0)+(e.referenceCount>0?e.decrement(r):0)})}}return{context:t}}})],[203,E({name:"HASKEY",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;if(a[1].isArray()){const e=x.a.toNumber(t,a[0].asBigIntegerUnsafe()),n=a[1].asArray();if(e<0)throw new b.o(t);return{context:t,results:[new v.a(e<n.length)]}}const n=a[0],s=a[1].asMapStackItem();return{context:t,results:[new v.a(s.has(n))]}}})],[204,E({name:"KEYS",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[a[0].asMapStackItem().keys()]}}})],[205,E({name:"VALUES",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;const n=(a[0].isArray()?a[0].asArray():a[0].asMapStackItem().valuesArray()).map(e=>e instanceof m.a?e.clone():e);return{context:t,results:[new y.a(n)]}}})],[224,(e=>{let{name:t}=e;return{type:"create",create:e=>{let{context:a}=e;const n=a.code.slice(a.pc,a.pc+1)[0];let s=a.code.slice(a.pc+1,a.pc+2)[0];s=-1===s?a.stack.length:s;const r=a.code.slice(a.pc+2,a.pc+4).readInt16LE(0),i=a.pc+4,{op:c}=E({name:t,in:s,invocation:1,invoke:async e=>{let{context:t,args:a}=e;const s=await t.engine.executeScript({code:t.code,blockchain:t.blockchain,init:t.init,gasLeft:t.gasLeft,options:{stack:a,stackAlt:[],depth:t.depth+1,createdContracts:t.createdContracts,scriptHashStack:[t.scriptHash,...t.scriptHashStack],scriptHash:t.scriptHash,entryScriptHash:t.entryScriptHash,returnValueCount:n,pc:t.pc+r+1,stackCount:t.stackCount+a.reduce((e,t)=>e+t.increment(),0)}});let{state:c,stackCount:d}=s;c===o.VMState.Halt&&(c=t.state);let u=[];if(-1===n)u=s.stack;else if(n>0){if(s.stack.length<n)throw new b.i(t,s.stack.length,n);u=s.stack.slice(0,n),d+=s.stack.slice(n).reduce((e,t)=>e+t.decrement(),0)}return d+=s.stackAlt.reduce((e,t)=>e+t.decrement(),0),{context:{state:c,errorMessage:s.errorMessage,blockchain:t.blockchain,init:t.init,engine:t.engine,code:t.code,scriptHashStack:t.scriptHashStack,scriptHash:t.scriptHash,callingScriptHash:t.callingScriptHash,entryScriptHash:t.entryScriptHash,pc:i,depth:t.depth,returnValueCount:t.returnValueCount,stackCount:d,stack:u.concat(t.stack),stackAlt:t.stackAlt,gasLeft:s.gasLeft,createdContracts:s.createdContracts}}}});return{op:c,context:a}}}})({name:"CALL_I"})],[225,U({name:"CALL_E"})],[226,U({name:"CALL_ED",dynamicCall:!0})],[227,U({name:"CALL_ET",tailCall:!0})],[228,U({name:"CALL_EDT",tailCall:!0,dynamicCall:!0})],[240,E({name:"THROW",invoke:e=>{let{context:t}=e;throw new b.O(t)}})],[241,E({name:"THROWIFNOT",in:1,invoke:e=>{let{context:t,args:a}=e;if(!a[0].asBoolean())throw new b.O(t);return{context:t}}})]]),P=(s()(z),s()(z.filter(e=>"op"===e[1].type))),R=s()(z.filter(e=>"create"===e[1].type)),M=e=>{let{context:t}=e;const a=t.code[t.pc],n=P[a],s=Object.assign({},t,{pc:t.pc+1});if(void 0!==n)return{op:n.op,context:s};const r=R[a];if(void 0===r)throw new b.R(t,"".concat(a));return r.create({context:s})}}).call(this,a(92).Buffer)},1949:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return ge});a(123),a(174),a(36),a(181),a(94),a(85);var n=a(146),s=a.n(n),r=a(107),i=a(152),o=a(90),c=a(394),d=a(710),u=a(871),l=a(859),h=a(1427),f=a(1413),b=a(1407),p=a(709),g=a(1886),y=a(1414),m=a(1411),v=a(860),w=a(728),S=a(150),I=a(335),T=a(101),x=a(1632),E=a(2278),k=a(970),B=a(2304),A=a(165),O=a(776),N=a(344),U=a(389),C=a(388),H=a(760),z=a(2306),P=a(2307),R=a(2308),M=a(2309),V=a(1950),_=a(251),D=a(2310),L=a(2311),K=a(1951),G=a(1952),W=a(2312),F=a(2313),j=a(2314),Y=a(2315),J=a(390),q=a(2316),Z=a(2317),X=a(1953),$=a(1954),Q=a(2318),ee=a(2319),te=a(1430);const ae=e=>{let{name:t,in:a=0,inAlt:n=0,out:s=0,outAlt:r=0,invocation:i=0,fee:o=A.c.ONE,invoke:c}=e;return e=>{let{context:d}=e;return{context:d,name:t,in:a,inAlt:n,out:s,outAlt:r,invocation:i,fee:o,invoke:c}}},ne=e=>{let{context:t,arg:a}=e;const n=a.asBuffer();let s;return 32===n.length?s=a.asUInt256():n.length<=5&&(s=a.asBigInteger(t.blockchain.currentBlockIndex).toNumber()),s};function se(e,t,a){if(t<0||t>=a.length)throw new O.p(e);return a[t]}const re=async e=>{let{context:t,hash:a}=e;const{scriptContainer:n,skipWitnessVerify:s}=t.init;if(s)return!0;let i;switch(n.type){case d.a.Transaction:i=await n.value.getScriptHashesForVerifying({getOutput:t.blockchain.output.get,getAsset:t.blockchain.asset.get});break;case d.a.Block:i=await n.value.getScriptHashesForVerifying({getHeader:t.blockchain.header.get});break;case d.a.Consensus:i=await n.value.getScriptHashesForVerifying({getValidators:async()=>t.blockchain.getValidators([]),currentBlockHash:t.blockchain.currentBlock.hash});break;default:throw w.a.assertNever(n),new Error("For TS")}return i.has(r.b.uInt160ToHex(a))},ie=async e=>{let{context:t,publicKey:a}=e;return re({context:t,hash:i.a.getVerificationScriptHash(a)})},oe=async e=>{let{context:t,hashOrPublicKey:a}=e;return a.length===r.b.ECPOINT_BUFFER_BYTES?ie({context:t,publicKey:r.b.bufferToECPoint(a)}):re({context:t,hash:r.b.bufferToUInt160(a)})},ce=async e=>{let{context:t,args:a}=e;const n=a[0].asBuffer(),s=[...a[1].asBuffer()].filter(o.isContractParameterType),r=Object(o.assertContractParameterType)(a[2].asBigIntegerUnsafe().toNumber()),d=Object(c.e)(a[3].asBigIntegerUnsafe().toNumber()),l=a[4].asString(),h=a[5].asString(),f=a[6].asString(),b=a[7].asString(),p=a[8].asString(),g=i.a.hash160(n);let y=await t.blockchain.contract.tryGet({hash:g}),m=!1;return void 0===y&&(y=new u.a({script:n,parameterList:s,returnType:r,contractProperties:d,name:l,codeVersion:h,author:f,email:b,description:p,hash:g}),await t.blockchain.contract.add(y),m=!0),{contract:y,created:m}},de=async e=>{let{context:t,hash:a}=e;const n=await t.blockchain.contract.get({hash:a});if(!n.hasStorage)throw new O.h(t,r.b.uInt160ToString(a));return n};function ue(e){return t=>{const{context:a}=t,n=Object(c.e)(a.stack[3].asBigIntegerUnsafe().toNumber());let s=r.b.ONE_HUNDRED_FIXED8;return c.d.has(n)&&(s=s.add(r.b.FOUR_HUNDRED_FIXED8)),c.b.has(n)&&(s=s.add(r.b.FIVE_HUNDRED_FIXED8)),e(t,s)}}const le=async e=>{let{context:t}=e;const a=t.scriptHash,n=await t.blockchain.contract.tryGet({hash:a});void 0!==n&&await Promise.all([t.blockchain.contract.delete({hash:a}),n.hasStorage?t.blockchain.storageItem.getAll$({hash:a}).pipe(Object(E.a)(e=>Object(x.a)(async()=>t.blockchain.storageItem.delete({hash:a,key:e.key})))).toPromise():Promise.resolve()])},he=e=>{let{name:t}=e;return e=>{let{context:a}=e;const n=a.stack[1],s=a.stack[2],r="Neo.Storage.Put"===t?3:4;if(void 0===n||void 0===s)throw new O.K(a,"SYSCALL",a.stack.length,r);const i=new T.BN(n.asBuffer().length).add(new T.BN(s.asBuffer().length)).sub(l.a.ONE).div(l.a.ONE_THOUSAND_TWENTY_FOUR).add(l.a.ONE);return ae({name:t,in:r,fee:A.c.ONE_THOUSAND.mul(i),invoke:async e=>{let{context:a,args:n}=e;if(a.init.triggerType!==h.b.Application)throw new O.w(a,t);const s=te.a.toStorageContext({context:a,value:n[0],write:!0}).value;await de({context:a,hash:s});const r=n[1].asBuffer();if(r.length>1024)throw new O.y(a);const i=n[2].asBuffer(),c="Neo.Storage.Put"===t?o.StorageFlagsModel.None:Object(o.assertStorageFlags)(n[3].asBigIntegerUnsafe().toNumber()),d=await a.blockchain.storageItem.tryGet({hash:s,key:r});if(void 0!==d){if(Object(o.hasStorageFlag)(d.flags,o.StorageFlagsModel.Constant))throw new O.e(a,r);await a.blockchain.storageItem.update(d,{value:i,flags:c})}else await a.blockchain.storageItem.add(new f.a({hash:s,key:r,value:i,flags:c}));return{context:a}}})({context:a})}},fe={"System.Runtime.Platform":ae({name:"System.Runtime.Platform",out:1,invoke:t=>{let{context:a}=t;return{context:a,results:[new N.a(e.from("NEO","ascii"))]}}}),"Neo.Runtime.GetTrigger":ae({name:"Neo.Runtime.GetTrigger",out:1,invoke:e=>{let{context:t}=e;return{context:t,results:[new U.a(new T.BN(t.init.triggerType))]}}}),"Neo.Runtime.CheckWitness":ae({name:"Neo.Runtime.CheckWitness",in:1,out:1,fee:A.c.TWO_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;return{context:t,results:[new C.a(await oe({context:t,hashOrPublicKey:a[0].asBuffer()}))]}}}),"Neo.Runtime.Notify":ae({name:"Neo.Runtime.Notify",in:1,invoke:async e=>{let{context:t,args:a}=e;const{onNotify:n}=t.init.listeners;return void 0!==n&&n({scriptHash:t.scriptHash,args:a[0].isArray()?a[0].asArray().map(e=>e.toContractParameter()):[a[0].toContractParameter()]}),{context:t}}}),"Neo.Runtime.Log":ae({name:"Neo.Runtime.Log",in:1,invoke:async e=>{let{context:t,args:a}=e;const{onLog:n}=t.init.listeners;return void 0!==n&&n({scriptHash:t.scriptHash,message:a[0].asString()}),{context:t}}}),"Neo.Runtime.GetTime":ae({name:"Neo.Runtime.GetTime",out:1,invoke:async e=>{let{context:t}=e;const{persistingBlock:a}=t.init,n=void 0===a?t.blockchain.currentBlock.timestamp+t.blockchain.settings.secondsPerBlock:a.timestamp;return{context:t,results:[new U.a(new T.BN(n))]}}}),"Neo.Runtime.Serialize":ae({name:"Neo.Runtime.Serialize",in:1,out:1,invoke:async e=>{let{context:t,args:a}=e;const n=a[0].serialize();if(n.length>A.h)throw new O.y(t);return{context:t,results:[new N.a(n)]}}}),"Neo.Runtime.Deserialize":ae({name:"Neo.Runtime.Deserialize",in:1,out:1,invoke:async e=>{let{context:t,args:a}=e;return{context:t,results:[Object(H.a)(a[0].asBuffer())]}}}),"Neo.Blockchain.GetHeight":ae({name:"Neo.Blockchain.GetHeight",out:1,invoke:e=>{let{context:t}=e;return{context:t,results:[new U.a(new T.BN(t.blockchain.currentBlock.index))]}}}),"Neo.Blockchain.GetHeader":ae({name:"Neo.Blockchain.GetHeader",in:1,out:1,fee:A.c.ONE_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;const n=ne({context:t,arg:a[0]});if(void 0===n)throw new O.n(t);const s=await t.blockchain.header.get({hashOrIndex:n});return{context:t,results:[new z.a(s)]}}}),"Neo.Blockchain.GetBlock":ae({name:"Neo.Blockchain.GetBlock",in:1,out:1,fee:A.c.TWO_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;const n=ne({context:t,arg:a[0]});if(void 0===n)throw new O.m(t,a[0].asBufferMaybe());const s=await t.blockchain.block.get({hashOrIndex:n});return{context:t,results:[new P.a(s)]}}}),"Neo.Blockchain.GetTransaction":ae({name:"Neo.Blockchain.GetTransaction",in:1,out:1,fee:A.c.ONE_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;const n=await t.blockchain.transaction.get({hash:a[0].asUInt256()});return{context:t,results:[new R.a(n)]}}}),"Neo.Blockchain.GetTransactionHeight":ae({name:"Neo.Blockchain.GetTransactionHeight",in:1,out:1,fee:A.c.ONE_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;const n=await t.blockchain.transactionData.get({hash:a[0].asUInt256()});return{context:t,results:[new U.a(new T.BN(n.startHeight))]}}}),"Neo.Blockchain.GetAccount":ae({name:"Neo.Blockchain.GetAccount",in:1,out:1,fee:A.c.ONE_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;const n=a[0].asUInt160(),s=await t.blockchain.account.tryGet({hash:n});return{context:t,results:[new M.a(void 0===s?new b.a({hash:n}):s)]}}}),"Neo.Blockchain.GetValidators":ae({name:"Neo.Blockchain.GetValidators",out:1,fee:A.c.TWO_HUNDRED,invoke:async e=>{let{context:t}=e;const a=await t.blockchain.validator.all$.pipe(Object(k.a)(e=>{let{publicKey:t}=e;return new V.a(t)}),Object(B.a)()).toPromise();return{context:t,results:[new _.a(a)]}}}),"Neo.Blockchain.GetAsset":ae({name:"Neo.Blockchain.GetAsset",in:1,out:1,fee:A.c.ONE_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;const n=await t.blockchain.asset.get({hash:a[0].asUInt256()});return{context:t,results:[new D.a(n)]}}}),"Neo.Blockchain.GetContract":ae({name:"Neo.Blockchain.GetContract",in:1,out:1,fee:A.c.ONE_HUNDRED,invoke:async t=>{let{context:a,args:n}=t;const s=await a.blockchain.contract.tryGet({hash:n[0].asUInt160()});return{context:a,results:[void 0===s?new N.a(e.alloc(0,0)):new L.a(s)]}}}),"Neo.Header.GetHash":ae({name:"Neo.Header.GetHash",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new K.a(a[0].asBlockBase().hash)]}}}),"Neo.Header.GetVersion":ae({name:"Neo.Header.GetVersion",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new U.a(new T.BN(a[0].asBlockBase().version))]}}}),"Neo.Header.GetPrevHash":ae({name:"Neo.Header.GetPrevHash",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new K.a(a[0].asBlockBase().previousHash)]}}}),"Neo.Header.GetIndex":ae({name:"Neo.Header.GetIndex",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new U.a(new T.BN(a[0].asBlockBase().index))]}}}),"Neo.Header.GetMerkleRoot":ae({name:"Neo.Header.GetMerkleRoot",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new K.a(a[0].asBlockBase().merkleRoot)]}}}),"Neo.Header.GetTimestamp":ae({name:"Neo.Header.GetTimestamp",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new U.a(new T.BN(a[0].asBlockBase().timestamp))]}}}),"Neo.Header.GetConsensusData":ae({name:"Neo.Header.GetConsensusData",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new U.a(a[0].asBlockBase().consensusData)]}}}),"Neo.Header.GetNextConsensus":ae({name:"Neo.Header.GetNextConsensus",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new G.a(a[0].asBlockBase().nextConsensus)]}}}),"Neo.Block.GetTransactionCount":ae({name:"Neo.Block.GetTransactionCount",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new U.a(new T.BN(a[0].asBlock().transactions.length))]}}}),"Neo.Block.GetTransactions":ae({name:"Neo.Block.GetTransactions",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;if(a[0].asBlock().transactions.length>A.e)throw new O.f(t);return{context:t,results:[new _.a(a[0].asBlock().transactions.map(e=>new R.a(e)))]}}}),"Neo.Block.GetTransaction":ae({name:"Neo.Block.GetTransaction",in:2,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new R.a(se(t,a[1].asBigIntegerUnsafe().toNumber(),a[0].asBlock().transactions))]}}}),"Neo.Transaction.GetHash":ae({name:"Neo.Transaction.GetHash",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new K.a(a[0].asTransaction().hash)]}}}),"Neo.Transaction.GetType":ae({name:"Neo.Transaction.GetType",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new U.a(new T.BN(a[0].asTransaction().type))]}}}),"Neo.Transaction.GetAttributes":ae({name:"Neo.Transaction.GetAttributes",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;if(a[0].asTransaction().attributes.length>A.e)throw new O.f(t);return{context:t,results:[new _.a(a[0].asTransaction().attributes.map(e=>new W.a(e)))]}}}),"Neo.Transaction.GetInputs":ae({name:"Neo.Transaction.GetInputs",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;if(a[0].asTransaction().inputs.length>A.e)throw new O.f(t);return{context:t,results:[new _.a(a[0].asTransaction().inputs.map(e=>new F.a(e)))]}}}),"Neo.Transaction.GetOutputs":ae({name:"Neo.Transaction.GetOutputs",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;if(a[0].asTransaction().outputs.length>A.e)throw new O.f(t);return{context:t,results:[new _.a(a[0].asTransaction().outputs.map(e=>new j.a(e)))]}}}),"Neo.Transaction.GetReferences":ae({name:"Neo.Transaction.GetReferences",in:1,out:1,fee:A.c.TWO_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;if(a[0].asTransaction().inputs.length>A.e)throw new O.f(t);const n=await a[0].asTransaction().getReferences({getOutput:t.blockchain.output.get});return{context:t,results:[new _.a(n.map(e=>new j.a(e)))]}}}),"Neo.Transaction.GetUnspentCoins":ae({name:"Neo.Transaction.GetUnspentCoins",in:1,out:1,fee:A.c.TWO_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;const n=a[0].asTransaction();let s;if(t.init.scriptContainer.type===d.a.Transaction&&t.init.scriptContainer.value.equals(n))s=t.init.scriptContainer.value.outputs.map(e=>new j.a(e));else{const e=await t.blockchain.transactionData.get({hash:n.hash});s=n.outputs.filter((t,a)=>void 0===e.endHeights[a]).map(e=>new j.a(e))}if(s.length>A.e)throw new O.f(t);return{context:t,results:[new _.a(s)]}}}),"Neo.Transaction.GetWitnesses":ae({name:"Neo.Transaction.GetWitnesses",in:1,out:1,fee:A.c.TWO_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;const n=a[0].asTransaction();if(n.scripts.length>A.e)throw new O.f(t);const s=await n.getSortedScriptHashesForVerifying({getOutput:t.blockchain.output.get,getAsset:t.blockchain.asset.get}),i=await Promise.all(n.scripts.map(async(e,a)=>{if(0===e.verification.length){const n=await t.blockchain.contract.get({hash:r.b.stringToUInt160(s[a])});return new p.a({invocation:e.invocation,verification:n.script})}return e}));return{context:t,results:[new _.a(i.map(e=>new Y.a(e)))]}}}),"Neo.Witness.GetVerificationScript":ae({name:"Neo.Witness.GetVerificationScript",in:1,out:1,fee:A.c.ONE_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;const n=a[0].asWitness();return{context:t,results:[new N.a(n.verification)]}}}),"Neo.InvocationTransaction.GetScript":ae({name:"Neo.InvocationTransaction.GetScript",in:1,out:1,invoke:async e=>{let{context:t,args:a}=e;const n=a[0].asTransaction();if(n instanceof g.a)return{context:t,results:[new N.a(n.script)]};throw new O.q(t)}}),"Neo.Attribute.GetUsage":ae({name:"Neo.Attribute.GetUsage",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new U.a(new T.BN(a[0].asAttribute().usage))]}}}),"Neo.Attribute.GetData":ae({name:"Neo.Attribute.GetData",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[a[0].asAttributeStackItem().toValueStackItem()]}}}),"Neo.Input.GetHash":ae({name:"Neo.Input.GetHash",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new K.a(a[0].asInput().hash)]}}}),"Neo.Input.GetIndex":ae({name:"Neo.Input.GetIndex",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new U.a(new T.BN(a[0].asInput().index))]}}}),"Neo.Output.GetAssetId":ae({name:"Neo.Output.GetAssetId",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new K.a(a[0].asOutput().asset)]}}}),"Neo.Output.GetValue":ae({name:"Neo.Output.GetValue",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new U.a(a[0].asOutput().value)]}}}),"Neo.Output.GetScriptHash":ae({name:"Neo.Output.GetScriptHash",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new G.a(a[0].asOutput().address)]}}}),"Neo.Account.GetScriptHash":ae({name:"Neo.Account.GetScriptHash",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new G.a(a[0].asAccount().hash)]}}}),"Neo.Account.GetVotes":ae({name:"Neo.Account.GetVotes",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new _.a(a[0].asAccount().votes.map(e=>new V.a(e)))]}}}),"Neo.Account.GetBalance":ae({name:"Neo.Account.GetBalance",in:2,out:1,invoke:async e=>{let{context:t,args:a}=e;const n=a[0].asAccount(),s=await t.blockchain.account.get({hash:n.hash}),i=r.b.uInt256ToHex(a[1].asUInt256()),o=s.balances[i],c=void 0===o?l.a.ZERO:o;return{context:t,results:[new U.a(c)]}}}),"Neo.Asset.GetAssetId":ae({name:"Neo.Asset.GetAssetId",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new K.a(a[0].asAsset().hash)]}}}),"Neo.Asset.GetAssetType":ae({name:"Neo.Asset.GetAssetType",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new U.a(new T.BN(a[0].asAsset().type))]}}}),"Neo.Asset.GetAmount":ae({name:"Neo.Asset.GetAmount",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new U.a(new T.BN(a[0].asAsset().amount))]}}}),"Neo.Asset.GetAvailable":ae({name:"Neo.Asset.GetAvailable",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new U.a(new T.BN(a[0].asAsset().available))]}}}),"Neo.Asset.GetPrecision":ae({name:"Neo.Asset.GetPrecision",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new U.a(new T.BN(a[0].asAsset().precision))]}}}),"Neo.Asset.GetOwner":ae({name:"Neo.Asset.GetOwner",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new V.a(a[0].asAsset().owner)]}}}),"Neo.Asset.GetAdmin":ae({name:"Neo.Asset.GetAdmin",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new G.a(a[0].asAsset().admin)]}}}),"Neo.Asset.GetIssuer":ae({name:"Neo.Asset.GetIssuer",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new G.a(a[0].asAsset().issuer)]}}}),"Neo.Contract.GetScript":ae({name:"Neo.Contract.GetScript",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new N.a(a[0].asContract().script)]}}}),"Neo.Contract.IsPayable":ae({name:"Neo.Contract.IsPayable",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[new C.a(a[0].asContract().payable)]}}}),"Neo.Storage.GetContext":ae({name:"Neo.Storage.GetContext",out:1,invoke:e=>{let{context:t}=e;return{context:t,results:[new J.a(t.scriptHash)]}}}),"Neo.Storage.GetReadOnlyContext":ae({name:"Neo.Storage.GetReadOnlyContext",out:1,invoke:e=>{let{context:t}=e;return{context:t,results:[new J.a(t.scriptHash).asReadOnly()]}}}),"Neo.Storage.Get":ae({name:"Neo.Storage.Get",in:2,out:1,fee:A.c.ONE_HUNDRED,invoke:async t=>{let{context:a,args:n}=t;const s=te.a.toStorageContext({context:a,value:n[0]}).value;await de({context:a,hash:s});const r=await a.blockchain.storageItem.tryGet({hash:s,key:n[1].asBuffer()}),i=void 0===r?e.from([]):r.value;return{context:a,results:[new N.a(i)]}}}),"Neo.Storage.Find":ae({name:"Neo.Storage.Find",in:2,out:1,invoke:async e=>{let{context:t,args:a}=e;const n=te.a.toStorageContext({context:t,value:a[0]}).value;await de({context:t,hash:n});const s=a[1].asBuffer(),r=S.a.from(t.blockchain.storageItem.getAll$({hash:n,prefix:s})).pipe(Object(I.a)(e=>{let{key:t,value:a}=e;return{key:new N.a(t),value:new N.a(a)}}));return{context:t,results:[new q.a(new Z.a(r[Symbol.asyncIterator]()))]}}}),"Neo.StorageContext.AsReadOnly":ae({name:"Neo.StorageContext.AsReadOnly",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;return{context:t,results:[te.a.toStorageContext({context:t,value:a[0]}).asReadOnly()]}}}),"Neo.Enumerator.Create":ae({name:"Neo.Enumerator.Create",in:1,out:1,invoke:async e=>{let{context:t,args:a}=e;const n=S.a.from(a[0].asArray().map(e=>({value:e})));return{context:t,results:[new X.a(new $.a(n[Symbol.asyncIterator]()))]}}}),"Neo.Enumerator.Next":ae({name:"Neo.Enumerator.Next",in:1,out:1,invoke:async e=>{let{context:t,args:a}=e;const n=a[0].asEnumerator(),s=await n.next();return{context:t,results:[new C.a(s)]}}}),"Neo.Iterator.Create":ae({name:"Neo.Iterator.Create",in:1,out:1,invoke:async e=>{let{context:t,args:a}=e;const n=a[0].isArray()?S.a.from(a[0].asArray().map((e,t)=>({key:new U.a(new T.BN(t)),value:e}))):S.a.from(w.a.zip(a[0].asMapStackItem().keysArray(),a[0].asMapStackItem().valuesArray()).map(e=>{let[t,a]=e;return{key:t,value:a}}));return{context:t,results:[new q.a(new Z.a(n[Symbol.asyncIterator]()))]}}}),"Neo.Iterator.Key":ae({name:"Neo.Iterator.Key",in:1,out:1,invoke:async e=>{let{context:t,args:a}=e;return{context:t,results:[a[0].asIterator().key()]}}}),"Neo.Enumerator.Value":ae({name:"Neo.Enumerator.Value",in:1,out:1,invoke:async e=>{let{context:t,args:a}=e;return{context:t,results:[a[0].asEnumerator().value()]}}}),"Neo.Enumerator.Concat":ae({name:"Neo.Enumerator.Concat",in:2,out:1,invoke:async e=>{let{context:t,args:a}=e;return{context:t,results:[new X.a(a[0].asEnumerator().concat(a[1].asEnumerator()))]}}}),"Neo.Iterator.Concat":ae({name:"Neo.Iterator.Concat",in:2,out:1,invoke:async e=>{let{context:t,args:a}=e;return{context:t,results:[new q.a(a[0].asIterator().concatIterator(a[1].asIterator()))]}}}),"Neo.Iterator.Keys":ae({name:"Neo.Iterator.Keys",in:1,out:1,invoke:async e=>{let{context:t,args:a}=e;return{context:t,results:[new X.a(a[0].asIterator().keys())]}}}),"Neo.Iterator.Values":ae({name:"Neo.Iterator.Values",in:1,out:1,invoke:async e=>{let{context:t,args:a}=e;return{context:t,results:[new X.a(a[0].asIterator().values())]}}}),"Neo.Account.SetVotes":ae({name:"Neo.Account.SetVotes",in:2,fee:A.c.ONE_THOUSAND,invoke:async e=>{let{context:t,args:a}=e;const n=a[0].asAccount().hash,s=a[1].asArray().map(e=>e.asECPoint()),r=await t.blockchain.account.get({hash:n}),i=t.blockchain.settings.governingToken.hashHex,o=r.balances[i],c=void 0===o?l.a.ZERO:o;if(r.isFrozen)throw new O.a(t);if(c.isZero()&&s.length>0)throw new O.A(t);if(!await re({context:t,hash:n}))throw new O.c(t);const d=await t.blockchain.account.update(r,{votes:s});return void 0!==t.init.listeners.onSetVotes&&t.init.listeners.onSetVotes({address:n,votes:s}),d.isDeletable()&&await t.blockchain.account.delete({hash:n}),{context:t}}}),"Neo.Account.IsStandard":ae({name:"Neo.Account.IsStandard",in:1,out:1,fee:A.c.ONE_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;const n=a[0].asUInt160(),s=await t.blockchain.contract.tryGet({hash:n});return{context:t,results:[new C.a(void 0===s||i.a.isStandardContract(s.script))]}}}),"Neo.Validator.Register":ae({name:"Neo.Validator.Register",in:1,out:1,fee:r.b.ONE_THOUSAND_FIXED8,invoke:async e=>{let{context:t,args:a}=e;const n=a[0].asECPoint();if(!await ie({context:t,publicKey:n}))throw new O.c(t);let s=await t.blockchain.validator.tryGet({publicKey:n});return void 0===s&&(s=new y.a({publicKey:n}),await t.blockchain.validator.add(s)),{context:t,results:[new Q.a(s)]}}}),"Neo.Asset.Create":ae({name:"Neo.Asset.Create",in:7,out:1,fee:r.b.FIVE_THOUSAND_FIXED8,invoke:async e=>{let{context:t,args:a}=e;const{scriptContainer:n,triggerType:s}=t.init;if(s!==h.b.Application)throw new O.w(t,"Neo.Asset.Create");if(n.type!==d.a.Transaction)throw new O.P(t);const r=n.value;if(r.type!==o.TransactionTypeModel.Invocation)throw new O.P(t);const i=Object(o.assertAssetType)(a[0].asBigIntegerUnsafe().toNumber());if(i===o.AssetTypeModel.GoverningToken||i===o.AssetTypeModel.UtilityToken)throw new O.j(t);const c=a[1].asString(),u=a[2].asBigIntegerUnsafe(),l=a[3].asBigIntegerUnsafe().toNumber(),f=a[4].asECPoint(),b=a[5].asUInt160(),p=a[6].asUInt160();if(!await ie({context:t,publicKey:f}))throw new O.c(t);const g=new m.a({hash:r.hash,type:i,name:c,amount:u,precision:l,owner:f,admin:b,issuer:p,expiration:t.blockchain.currentBlock.index+1+2e6}),y=new D.a(g);return await t.blockchain.asset.add(g),{context:t,results:[y]}}}),"Neo.Asset.Renew":e=>{let{context:t}=e;const a=t.stack[1].asBigInteger(t.blockchain.currentBlockIndex);return ae({name:"Neo.Asset.Renew",in:2,out:1,fee:r.b.FIVE_THOUSAND_FIXED8.mul(a),invoke:async e=>{let{context:a,args:n}=e;if(a.init.triggerType!==h.b.Application)throw new O.w(a,"Neo.Asset.Renew");const{hash:s}=n[0].asAsset(),r=n[1].asBigInteger(t.blockchain.currentBlockIndex),i=await a.blockchain.asset.get({hash:s});let{expiration:o}=i;o<a.blockchain.currentBlock.index+1&&(o=a.blockchain.currentBlock.index+1);let c=new T.BN(o).add(r.mul(new T.BN(A.b)));return c.gt(l.a.UINT_MAX)&&(c=l.a.UINT_MAX),await a.blockchain.asset.update(i,{expiration:c.toNumber()}),{context:a,results:[new U.a(c)]}}})({context:t})},"Neo.Contract.Create":ue((e,t)=>ae({name:"Neo.Contract.Create",in:9,out:1,fee:t,invoke:async e=>{let{context:t,args:a}=e;if(t.init.triggerType!==h.b.Application)throw new O.w(t,"Neo.Contract.Create");const{contract:n}=await ce({context:t,args:a}),s=new L.a(n);return{context:Object.assign({},t,{createdContracts:Object.assign({},t.createdContracts,{[n.hashHex]:t.scriptHash})}),results:[s]}}})(e)),"Neo.Contract.Migrate":ue((e,t)=>ae({name:"Neo.Contract.Migrate",in:9,out:1,fee:t,invoke:async e=>{if(e.context.init.triggerType!==h.b.Application)throw new O.w(e.context,"Neo.Contract.Migrate");const{context:t,args:a}=e;let n=t;const{contract:s,created:r}=await ce({context:n,args:a});return s.hasStorage&&r&&(await n.blockchain.storageItem.getAll$({hash:n.scriptHash}).pipe(Object(E.a)(e=>Object(x.a)(async()=>n.blockchain.storageItem.add(new f.a({hash:s.hash,key:e.key,value:e.value,flags:o.StorageFlagsModel.None}))))).toPromise(),n=Object.assign({},n,{createdContracts:Object.assign({},n.createdContracts,{[s.hashHex]:n.scriptHash})})),await le(e),void 0!==n.init.listeners.onMigrateContract&&n.init.listeners.onMigrateContract({from:n.scriptHash,to:s.hash}),{context:n,results:[new L.a(s)]}}})(e)),"Neo.Contract.GetStorageContext":ae({name:"Neo.Contract.GetStorageContext",in:1,out:1,invoke:e=>{let{context:t,args:a}=e;const n=a[0].asContract(),s=t.createdContracts[n.hashHex];if(!r.b.uInt160Equal(s,t.scriptHash))throw new O.l(t);return{context:t,results:[new J.a(n.hash)]}}}),"Neo.Contract.Destroy":ae({name:"Neo.Contract.Destroy",invoke:async e=>{if(e.context.init.triggerType!==h.b.Application)throw new O.w(e.context,"Neo.Contract.Destroy");return await le(e),{context:e.context}}}),"Neo.Storage.Put":he({name:"Neo.Storage.Put"}),"Neo.Storage.PutEx":he({name:"Neo.Storage.PutEx"}),"Neo.Storage.Delete":ae({name:"Neo.Storage.Delete",in:2,fee:A.c.ONE_HUNDRED,invoke:async e=>{let{context:t,args:a}=e;const n=te.a.toStorageContext({context:t,value:a[0],write:!0}).value;await de({context:t,hash:n});const s=a[1].asBuffer(),r=await t.blockchain.storageItem.tryGet({hash:n,key:s});if(void 0!==r){if(Object(o.hasStorageFlag)(r.flags,o.StorageFlagsModel.Constant))throw new O.e(t,s);await t.blockchain.storageItem.delete({hash:n,key:s})}return{context:t}}}),"System.ExecutionEngine.GetScriptContainer":ae({name:"System.ExecutionEngine.GetScriptContainer",out:1,invoke:async e=>{let t,{context:a}=e;const{scriptContainer:n}=a.init;switch(n.type){case d.a.Transaction:t=new R.a(n.value);break;case d.a.Block:t=new P.a(n.value);break;case d.a.Consensus:t=new ee.a(n.value);break;default:throw w.a.assertNever(n),new Error("For TS")}return{context:a,results:[t]}}}),"System.ExecutionEngine.GetExecutingScriptHash":ae({name:"System.ExecutionEngine.GetExecutingScriptHash",out:1,invoke:async e=>{let{context:t}=e;return{context:t,results:[new G.a(t.scriptHash)]}}}),"System.ExecutionEngine.GetCallingScriptHash":ae({name:"System.ExecutionEngine.GetCallingScriptHash",out:1,invoke:async t=>{let{context:a}=t;return{context:a,results:[a.scriptHashStack.length>1?new G.a(a.scriptHashStack[1]):new N.a(e.alloc(0,0))]}}}),"System.ExecutionEngine.GetEntryScriptHash":ae({name:"System.ExecutionEngine.GetEntryScriptHash",out:1,invoke:async e=>{let{context:t}=e;return{context:t,results:[new G.a(t.scriptHashStack[t.scriptHashStack.length-1])]}}})},be={"Neo.Iterator.Next":"Neo.Enumerator.Next","Neo.Iterator.Value":"Neo.Enumerator.Value","System.Runtime.GetTrigger":"Neo.Runtime.GetTrigger","System.Runtime.CheckWitness":"Neo.Runtime.CheckWitness","System.Runtime.Notify":"Neo.Runtime.Notify","System.Runtime.Log":"Neo.Runtime.Log","System.Runtime.GetTime":"Neo.Runtime.GetTime","System.Runtime.Serialize":"Neo.Runtime.Serialize","System.Runtime.Deserialize":"Neo.Runtime.Deserialize","System.Blockchain.GetHeight":"Neo.Blockchain.GetHeight","System.Blockchain.GetHeader":"Neo.Blockchain.GetHeader","System.Blockchain.GetBlock":"Neo.Blockchain.GetBlock","System.Blockchain.GetTransaction":"Neo.Blockchain.GetTransaction","System.Blockchain.GetTransactionHeight":"Neo.Blockchain.GetTransactionHeight","System.Blockchain.GetContract":"Neo.Blockchain.GetContract","System.Header.GetIndex":"Neo.Header.GetIndex","System.Header.GetHash":"Neo.Header.GetHash","System.Header.GetPrevHash":"Neo.Header.GetPrevHash","System.Header.GetTimestamp":"Neo.Header.GetTimestamp","System.Block.GetTransactionCount":"Neo.Block.GetTransactionCount","System.Block.GetTransactions":"Neo.Block.GetTransactions","System.Block.GetTransaction":"Neo.Block.GetTransaction","System.Transaction.GetHash":"Neo.Transaction.GetHash","System.Contract.Destroy":"Neo.Contract.Destroy","System.Contract.GetStorageContext":"Neo.Contract.GetStorageContext","System.Storage.GetContext":"Neo.Storage.GetContext","System.Storage.GetReadOnlyContext":"Neo.Storage.GetReadOnlyContext","System.Storage.Get":"Neo.Storage.Get","System.Storage.Put":"Neo.Storage.Put","System.Storage.Delete":"Neo.Storage.Delete","System.StorageContext.AsReadOnly":"Neo.StorageContext.AsReadOnly","AntShares.Runtime.CheckWitness":"Neo.Runtime.CheckWitness","AntShares.Runtime.Notify":"Neo.Runtime.Notify","AntShares.Runtime.Log":"Neo.Runtime.Log","AntShares.Blockchain.GetHeight":"Neo.Blockchain.GetHeight","AntShares.Blockchain.GetHeader":"Neo.Blockchain.GetHeader","AntShares.Blockchain.GetBlock":"Neo.Blockchain.GetBlock","AntShares.Blockchain.GetTransaction":"Neo.Blockchain.GetTransaction","AntShares.Blockchain.GetAccount":"Neo.Blockchain.GetAccount","AntShares.Blockchain.GetValidators":"Neo.Blockchain.GetValidators","AntShares.Blockchain.GetAsset":"Neo.Blockchain.GetAsset","AntShares.Blockchain.GetContract":"Neo.Blockchain.GetContract","AntShares.Header.GetHash":"Neo.Header.GetHash","AntShares.Header.GetVersion":"Neo.Header.GetVersion","AntShares.Header.GetPrevHash":"Neo.Header.GetPrevHash","AntShares.Header.GetMerkleRoot":"Neo.Header.GetMerkleRoot","AntShares.Header.GetTimestamp":"Neo.Header.GetTimestamp","AntShares.Header.GetConsensusData":"Neo.Header.GetConsensusData","AntShares.Header.GetNextConsensus":"Neo.Header.GetNextConsensus","AntShares.Block.GetTransactionCount":"Neo.Block.GetTransactionCount","AntShares.Block.GetTransactions":"Neo.Block.GetTransactions","AntShares.Block.GetTransaction":"Neo.Block.GetTransaction","AntShares.Transaction.GetHash":"Neo.Transaction.GetHash","AntShares.Transaction.GetType":"Neo.Transaction.GetType","AntShares.Transaction.GetAttributes":"Neo.Transaction.GetAttributes","AntShares.Transaction.GetInputs":"Neo.Transaction.GetInputs","AntShares.Transaction.GetOutputs":"Neo.Transaction.GetOutputs","AntShares.Transaction.GetReferences":"Neo.Transaction.GetReferences","AntShares.Attribute.GetUsage":"Neo.Attribute.GetUsage","AntShares.Attribute.GetData":"Neo.Attribute.GetData","AntShares.Input.GetHash":"Neo.Input.GetHash","AntShares.Input.GetIndex":"Neo.Input.GetIndex","AntShares.Output.GetAssetId":"Neo.Output.GetAssetId","AntShares.Output.GetValue":"Neo.Output.GetValue","AntShares.Output.GetScriptHash":"Neo.Output.GetScriptHash","AntShares.Account.GetScriptHash":"Neo.Account.GetScriptHash","AntShares.Account.GetVotes":"Neo.Account.GetVotes","AntShares.Account.GetBalance":"Neo.Account.GetBalance","AntShares.Asset.GetAssetId":"Neo.Asset.GetAssetId","AntShares.Asset.GetAssetType":"Neo.Asset.GetAssetType","AntShares.Asset.GetAmount":"Neo.Asset.GetAmount","AntShares.Asset.GetAvailable":"Neo.Asset.GetAvailable","AntShares.Asset.GetPrecision":"Neo.Asset.GetPrecision","AntShares.Asset.GetOwner":"Neo.Asset.GetOwner","AntShares.Asset.GetAdmin":"Neo.Asset.GetAdmin","AntShares.Asset.GetIssuer":"Neo.Asset.GetIssuer","AntShares.Contract.GetScript":"Neo.Contract.GetScript","AntShares.Storage.GetContext":"Neo.Storage.GetContext","AntShares.Storage.Get":"Neo.Storage.Get","AntShares.Account.SetVotes":"Neo.Account.SetVotes","AntShares.Validator.Register":"Neo.Validator.Register","AntShares.Asset.Create":"Neo.Asset.Create","AntShares.Asset.Renew":"Neo.Asset.Renew","AntShares.Contract.Create":"Neo.Contract.Create","AntShares.Contract.Migrate":"Neo.Contract.Migrate","AntShares.Contract.GetStorageContext":"Neo.Contract.GetStorageContext","AntShares.Contract.Destroy":"Neo.Contract.Destroy","AntShares.Storage.Put":"Neo.Storage.Put","AntShares.Storage.Delete":"Neo.Storage.Delete"},pe=s()(Object.entries(fe).map(e=>{let[t,a]=e;return[Object(o.toSysCallHash)(t),a]})),ge=e=>{let{context:t}=e;const{code:a,pc:n}=t,s=new v.a(a,n),r=s.readVarBytesLE(252);let i,c;if(4===r.length)i=r.readUInt32LE(0),c=r.toString("hex");else{const e=l.a.toASCII(r),t=be[e],a=void 0===t?e:t;i=Object(o.toSysCallHash)(Object(o.assertSysCall)(a)),c=a}const d=pe[i];if(void 0===d)throw new O.S(t,c);return d({context:Object.assign({},t,{pc:s.index})})}}).call(this,a(92).Buffer)},1950:function(e,t,a){"use strict";a.d(t,"a",function(){return i});a(85);var n=a(107),s=a(1893),r=a(129);class i extends r.a{constructor(e){super(),this.value=e}asECPoint(){return this.value}asBuffer(){return n.b.ecPointToBuffer(this.value)}toContractParameter(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return new s.a(this.value)}}},1951:function(e,t,a){"use strict";a.d(t,"a",function(){return i});a(85);var n=a(107),s=a(1892),r=a(129);class i extends r.a{constructor(e){super(),this.value=e}asUInt256(){return this.value}asBuffer(){return n.b.uInt256ToBuffer(this.value)}toContractParameter(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return new s.a(this.value)}}},1952:function(e,t,a){"use strict";a.d(t,"a",function(){return i});a(85);var n=a(107),s=a(764),r=a(129);class i extends r.a{constructor(e){super(),this.value=e}asUInt160(){return this.value}asBuffer(){return n.b.uInt160ToBuffer(this.value)}toContractParameter(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return new s.a(this.value)}}},1953:function(e,t,a){"use strict";a.d(t,"a",function(){return r});a(85);var n=a(1470),s=a(207);class r extends n.a{constructor(){super(...arguments),this.referenceID=Object(s.a)()}toStructuralKey(){return"".concat(this.referenceID)}equals(e){return this===e}asEnumerator(){return this.value}}},1954:function(e,t,a){"use strict";a.d(t,"a",function(){return i});a(123),a(174),a(36);var n=a(150),s=a(1471),r=a(140);class i{constructor(e){this.enumerator=e,this.mutableDone=!1}get done(){return this.mutableDone}equals(e){return this===e}async next(){if(!this.mutableDone){const e=await this.enumerator.next();return this.mutableCurrent=e.done?void 0:e.value,this.mutableDone=e.done,!this.mutableDone}return!1}value(){const{mutableCurrent:e}=this;if(void 0===e)throw new r.d;return e.value}concat(e){const t=Object(s.a)(n.a.from(this.enumerator),n.a.from(e.enumerator));return new i(t[Symbol.asyncIterator]())}}},1977:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return r});var n=a(831);const s=Object(n.a)("NEGOTIATION",(e,t)=>"Negotiation failed. Unexpected message received: ".concat(e.value.command).concat(void 0===t?"":". ".concat(t))),r=Object(n.a)("ALREADY_CONNECTED",e=>"Negotiation failed: ".concat(e))},1978:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return c});a(173),a(85);var n=a(90),s=a(107),r=a(860),i=a(1474);const o=16;class c{constructor(e){let{host:t,port:a,timestamp:s,services:r}=e;this.serializeWire=Object(n.createSerializeWire)(this.serializeWireBase.bind(this)),this.host=t,this.port=a,this.timestamp=s,this.services=r}static deserializeWireBase(e){let{reader:t}=e;const a=t.readUInt32LE(),n=t.readUInt64LE(),s=i.Address6.fromByteArray([...t.readBytes(16)]),r=t.readUInt16BE(),o=null==s?"":s.canonicalForm();return new this({timestamp:a,services:n,host:null==o?"":o,port:r})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new r.a(e.buffer)})}static isValid(e){const t=this.getAddress6(e);if(null==t)return!1;try{return t.toByteArray(),!0}catch(e){return!1}}static getAddress6(e){return 4===e.split(".").length?i.Address6.fromAddress4(e):new i.Address6(e)}serializeWireBase(t){const a=c.getAddress6(this.host);if(null==a)throw new s.a("Network IP address undefined");t.writeUInt32LE(this.timestamp),t.writeUInt64LE(this.services);const n=e.from(a.toByteArray());t.writeBytes(e.concat([e.alloc(o-n.length,0),n])),t.writeUInt16BE(this.port)}}}).call(this,a(92).Buffer)},1979:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return k}),a.d(t,"b",function(){return O});var n=a(107),s=a(152),r=a(90),i=a(162),o=a(1404),c=a(2324),d=a(2294),u=a(860),l=a(728),h=a(831),f=a(447),b=a(1480),p=a(2323),g=a(2326),y=a(2327),m=a(2321),v=a(2328),w=a(2329),S=a(2322),I=a(2330);const T=12,x=e=>n.b.toUInt32LE(s.a.hash256(e)),E=e=>{let{context:t,reader:a}=e;if(a.readUInt32LE()!==t.messageMagic)throw new n.a("Expected BinaryReader readUInt32LE(0) to equal ".concat(t.messageMagic,". Received: ").concat(t.messageMagic));const s=Object(b.b)(a.readFixedString(T)),r=a.readUInt32LE();if(r>33554432)throw new n.a("Expected buffer readout to be less than max payload size of ".concat(33554432,". Received: ").concat(r));return{command:s,length:r,checksum:a.readUInt32LE()}};class k{constructor(e){let{magic:t,value:a}=e;this.serializeWire=Object(r.createSerializeWire)(this.serializeWireBase.bind(this)),this.magic=t,this.value=a}static deserializeWireBase(e){const{reader:t,context:a}=e,{command:s,length:r,checksum:i}=E(e),u=t.readBytes(r),h=x(u);if(h!==i)throw new n.a("Expected payloadBuffer checksum to be ".concat(i,". Received: ").concat(h));const f={context:e.context,buffer:u};let T;switch(s){case b.a.addr:T={command:b.a.addr,payload:p.a.deserializeWire(f)};break;case b.a.block:T={command:b.a.block,payload:o.a.deserializeWire(f)};break;case b.a.consensus:T={command:b.a.consensus,payload:c.a.deserializeWire(f)};break;case b.a.filteradd:T={command:b.a.filteradd,payload:g.a.deserializeWire(f)};break;case b.a.filterclear:T={command:b.a.filterclear};break;case b.a.filterload:T={command:b.a.filterload,payload:y.a.deserializeWire(f)};break;case b.a.getaddr:T={command:b.a.getaddr};break;case b.a.getblocks:T={command:b.a.getblocks,payload:m.a.deserializeWire(f)};break;case b.a.getdata:T={command:b.a.getdata,payload:v.a.deserializeWire(f)};break;case b.a.getheaders:T={command:b.a.getheaders,payload:m.a.deserializeWire(f)};break;case b.a.headers:T={command:b.a.headers,payload:w.a.deserializeWire(f)};break;case b.a.inv:T={command:b.a.inv,payload:v.a.deserializeWire(f)};break;case b.a.mempool:T={command:b.a.mempool};break;case b.a.tx:T={command:b.a.tx,payload:Object(d.a)(f)};break;case b.a.verack:T={command:b.a.verack};break;case b.a.version:T={command:b.a.version,payload:S.b.deserializeWire(f)};break;case b.a.alert:T={command:b.a.alert};break;case b.a.merkleblock:T={command:b.a.merkleblock,payload:I.a.deserializeWire(f)};break;case b.a.notfound:T={command:b.a.notfound};break;case b.a.ping:T={command:b.a.ping};break;case b.a.pong:T={command:b.a.pong};break;case b.a.reject:T={command:b.a.reject};break;default:throw l.a.assertNever(s),new n.a("")}return new this({magic:a.messageMagic,value:T})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new u.a(e.buffer)})}serializeWireBase(t){const{value:a}=this;t.writeUInt32LE(this.magic),t.writeFixedString(a.command,T);let s=e.alloc(0);switch(a.command){case b.a.addr:case b.a.block:case b.a.consensus:case b.a.filteradd:s=a.payload.serializeWire();break;case b.a.filterclear:break;case b.a.filterload:s=a.payload.serializeWire();break;case b.a.getaddr:break;case b.a.getblocks:case b.a.getdata:case b.a.getheaders:case b.a.headers:case b.a.inv:s=a.payload.serializeWire();break;case b.a.mempool:break;case b.a.tx:s=a.payload.serializeWire();break;case b.a.verack:break;case b.a.version:s=a.payload.serializeWire();break;case b.a.alert:break;case b.a.merkleblock:s=a.payload.serializeWire();break;case b.a.notfound:case b.a.ping:case b.a.pong:case b.a.reject:break;default:throw l.a.assertNever(a),new n.a("Command does not exist")}t.writeUInt32LE(s.length),t.writeUInt32LE(x(s)),t.writeBytes(s)}}const B=Object(h.a)("INVALID_MESSAGE_TRANSFORM_ENCODING",e=>e),A=i.a.sizeOfUInt32LE+i.a.sizeOfFixedString(T)+i.a.sizeOfUInt32LE+i.a.sizeOfUInt32LE;class O extends f.Transform{constructor(t){super({readableObjectMode:!0}),this.context=t,this.mutableBuffer=e.from([])}_transform(t,a,n){if("string"==typeof t)throw new B("Invalid Message Transform Chunk Type. Expected chunk type to be 'string', found: ".concat(typeof t));if("buffer"!==a)throw new B("Invalid Message Transform Encoding. Expected: 'buffer', found: ".concat(a));this.mutableBuffer=e.concat([this.mutableBuffer,t]);try{const{remainingBuffer:e,mutableMessages:t}=this.processBuffer(new u.a(this.mutableBuffer));this.mutableBuffer=e,t.forEach(e=>this.push(e)),n(void 0)}catch(e){n(e)}}processBuffer(e){if(e.remaining<A)return{remainingBuffer:e.remainingBuffer,mutableMessages:[]};const{length:t}=E({context:this.context,reader:e.clone()});if(e.remaining<A+t)return{remainingBuffer:e.remainingBuffer,mutableMessages:[]};const a=k.deserializeWireBase({context:this.context,reader:e}),{remainingBuffer:n,mutableMessages:s}=this.processBuffer(e);return s.push(a),{remainingBuffer:n,mutableMessages:s}}}}).call(this,a(92).Buffer)},1980:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(728),s=a(90),r=a(860),i=a(2325);class o{constructor(e){let{version:t,previousHash:a,blockIndex:r,validatorIndex:i,timestamp:o,consensusMessage:c}=e;this.serializeWire=Object(s.createSerializeWire)(this.serializeWireBase.bind(this)),this.version=t,this.previousHash=a,this.blockIndex=r,this.validatorIndex=i,this.timestamp=void 0===o?n.a.nowSeconds():o,this.consensusMessage=c}static deserializeWireBase(e){return new this(this.deserializeUnsignedConsensusPayloadWireBase(e))}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new r.a(e.buffer)})}serializeWireBase(e){e.writeUInt32LE(this.version),e.writeUInt256(this.previousHash),e.writeUInt32LE(this.blockIndex),e.writeUInt16LE(this.validatorIndex),e.writeUInt32LE(this.timestamp),e.writeVarBytesLE(this.consensusMessage.serializeWire())}}o.deserializeUnsignedConsensusPayloadWireBase=e=>{const{reader:t}=e,a=t.readUInt32LE(),n=t.readUInt256(),s=t.readUInt32LE(),r=t.readUInt16LE(),o=t.readUInt32LE(),c=t.readVarBytesLE();return{version:a,previousHash:n,blockIndex:s,validatorIndex:r,timestamp:o,consensusMessage:Object(i.a)({context:e.context,buffer:c})}}},1981:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(107),s=a(881),r=a(778);class i extends s.a{static deserializeWireBase(e){const{reader:t}=e,a=super.deserializeConsensusMessageBaseWireBase(e),s=t.readUInt8();if(0===s)throw new n.a("Expected BinaryReader's readUInt8(0) to be 0. Received: ".concat(s));return new this({viewNumber:a.viewNumber,newViewNumber:s})}constructor(e){let{viewNumber:t,newViewNumber:a}=e;super({type:r.a.ChangeView,viewNumber:t}),this.newViewNumber=a}serializeWireBase(e){super.serializeWireBase(e),e.writeUInt8(this.newViewNumber)}}},1982:function(e,t,a){"use strict";a.d(t,"a",function(){return o});a(85);var n=a(107),s=a(1879),r=a(881),i=a(778);class o extends r.a{static deserializeWireBase(e){const{reader:t}=e,a=super.deserializeConsensusMessageBaseWireBase(e),r=t.readUInt64LE(),i=t.readUInt160(),o=t.readArray(()=>t.readUInt256()),c=new Set(o.map(e=>n.b.uInt256ToString(e)));if(c.size!==o.length)throw new n.a("Distinct hashes: ".concat(c.size," ")+"Transaction hashes: ".concat(o.length));const d=s.a.deserializeWireBase(e);if(!n.b.uInt256Equal(d.hash,o[0]))throw new n.a("Expected minerTransaction hash (".concat(d.hash,") to equal first transaction hash (").concat(o[0],")"));const u=t.readBytes(64);return new this({viewNumber:a.viewNumber,nonce:r,nextConsensus:i,transactionHashes:o,minerTransaction:d,signature:u})}constructor(e){let{viewNumber:t,nonce:a,nextConsensus:n,transactionHashes:s,minerTransaction:r,signature:o}=e;super({type:i.a.PrepareRequest,viewNumber:t}),this.nonce=a,this.nextConsensus=n,this.transactionHashes=s,this.minerTransaction=r,this.signature=o}serializeWireBase(e){super.serializeWireBase(e),e.writeUInt64LE(this.nonce),e.writeUInt160(this.nextConsensus),e.writeArray(this.transactionHashes,t=>{e.writeUInt256(t)}),this.minerTransaction.serializeWireBase(e),e.writeBytes(this.signature)}}},1983:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(881),s=a(778);class r extends n.a{static deserializeWireBase(e){const{reader:t}=e,a=super.deserializeConsensusMessageBaseWireBase(e),n=t.readBytes(64);return new this({viewNumber:a.viewNumber,signature:n})}constructor(e){let{viewNumber:t,signature:a}=e;super({type:s.a.PrepareResponse,viewNumber:t}),this.signature=a}serializeWireBase(e){super.serializeWireBase(e),e.writeBytes(this.signature)}}},1984:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i});var n,s=a(831);!function(e){e[e.Transaction=1]="Transaction",e[e.Block=2]="Block",e[e.Consensus=224]="Consensus"}(n||(n={}));const r=Object(s.a)("INVALID_INVENTORY_TYPE",e=>"Expected inventory type, found: ".concat(e)),i=e=>{if((e=>void 0!==n[e])(e))return e;throw new r(e)}},1987:function(e,t,a){"use strict";a.d(t,"a",function(){return n});a(123),a(174),a(36);class n{constructor(){this.mutableItems=[],this.mutableResolvers=[],this.mutableDoneInternal=!1}[Symbol.asyncIterator](){return this}async next(){const e=this.mutableItems.shift();return void 0!==e?"error"===e.type?Promise.reject(e.error):Promise.resolve({done:!1,value:e.value}):this.mutableDoneInternal?Promise.resolve({done:!0}):new Promise((e,t)=>{this.mutableResolvers.push({resolve:e,reject:t})})}write(e){let t=!1;"handlePersistBlock"===e.type&&(t=this.mutableItems.some(e=>"value"===e.type&&"timer"===e.value.type),this.clear()),this.push({type:"value",value:e}),t&&this.push({type:"value",value:{type:"timer"}})}error(e){this.push({type:"error",error:e})}clear(){this.mutableItems=[]}done(){this.clear(),this.mutableResolvers.forEach(e=>{let{resolve:t}=e;return t({done:!0})}),this.mutableResolvers=[],this.mutableDoneInternal=!0}push(e){if(this.mutableDoneInternal)throw new Error("ConsensusQueue already ended");const t=this.mutableResolvers.shift();if(void 0!==t){const{resolve:a,reject:n}=t;"error"===e.type?n(e.error):a({done:!1,value:e.value})}else this.mutableItems.push(e)}}},1988:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(728);class s{constructor(){this.mutableFastForwardSeconds=0}nowSeconds(){return n.a.nowSeconds()+this.mutableFastForwardSeconds}fastForwardOffset(e){if(!(e>=0))throw new Error("Can only fast forward to future time.");this.mutableFastForwardSeconds+=e}fastForwardToTime(e){this.fastForwardOffset(e-this.nowSeconds())}}},199:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return o});a(94);var n=a(122),s=a.n(n),r=a(101),i=a(107);const o={writeUInt64LE:e=>e.toString(16,16),readUInt64LE:e=>new r.BN(e,16),writeUInt64:e=>e.toString(10),readUInt64:e=>new s.a(e),writeUInt160:e=>i.b.uInt160ToString(e),readUInt160:e=>i.b.stringToUInt160(e),writeUInt256:e=>i.b.uInt256ToString(e),readUInt256:e=>i.b.stringToUInt256(e),writeFixed8:e=>i.b.fixed8ToDecimal(e).toString(),readFixed8:e=>i.b.fixed8FromDecimal(new s.a(e)),writeECPoint:e=>i.b.ecPointToString(e),readECPoint:e=>i.b.stringToECPoint(e),writeBuffer:e=>e.toString("hex"),readBuffer:t=>e.from(t,"hex")}}).call(this,a(92).Buffer)},2009:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(780);class s extends n.a{cloneExpectedView(e){let{expectedView:t}=e;return new s({type:this.type,previousHash:this.previousHash,blockIndex:this.blockIndex,viewNumber:this.viewNumber,myIndex:this.myIndex,primaryIndex:this.primaryIndex,expectedView:t,validators:this.validators,blockReceivedTimeSeconds:this.blockReceivedTimeSeconds})}}},2010:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(885),s=a(2011);class r extends n.a{clone(e){let{type:t,primaryIndex:a,viewNumber:n}=e;return new r({type:t,viewNumber:n,myIndex:this.myIndex,primaryIndex:a,expectedView:this.expectedView,validators:this.validators,blockReceivedTimeSeconds:this.blockReceivedTimeSeconds,transactions:this.transactions,signatures:this.signatures,header:{type:"existing",block:this.header,transactionHashes:this.transactionHashes}})}cloneExpectedView(e){let{expectedView:t}=e;return new r({type:this.type,viewNumber:this.viewNumber,myIndex:this.myIndex,primaryIndex:this.primaryIndex,expectedView:t,validators:this.validators,blockReceivedTimeSeconds:this.blockReceivedTimeSeconds,transactions:this.transactions,signatures:this.signatures,header:{type:"existing",block:this.header,transactionHashes:this.transactionHashes}})}cloneSignatures(e){let{signatures:t}=e;return new r({type:this.type,viewNumber:this.viewNumber,myIndex:this.myIndex,primaryIndex:this.primaryIndex,expectedView:this.expectedView,validators:this.validators,blockReceivedTimeSeconds:this.blockReceivedTimeSeconds,transactions:this.transactions,signatures:t,header:{type:"existing",block:this.header,transactionHashes:this.transactionHashes}})}cloneRequestSent(){return new s.a({viewNumber:this.viewNumber,myIndex:this.myIndex,primaryIndex:this.primaryIndex,expectedView:this.expectedView,validators:this.validators,blockReceivedTimeSeconds:this.blockReceivedTimeSeconds,transactions:this.transactions,signatures:this.signatures,header:{type:"existing",block:this.header,transactionHashes:this.transactionHashes}})}}},2011:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(885);class s extends n.a{constructor(e){let{viewNumber:t,myIndex:a,primaryIndex:n,expectedView:s,validators:r,blockReceivedTimeSeconds:i,transactions:o,signatures:c,header:d}=e;super({type:"primary",viewNumber:t,myIndex:a,primaryIndex:n,expectedView:s,validators:r,blockReceivedTimeSeconds:i,transactions:o,signatures:c,header:d})}cloneExpectedView(e){let{expectedView:t}=e;return new s({viewNumber:this.viewNumber,myIndex:this.myIndex,primaryIndex:this.primaryIndex,expectedView:t,validators:this.validators,blockReceivedTimeSeconds:this.blockReceivedTimeSeconds,transactions:this.transactions,signatures:this.signatures,header:{type:"existing",block:this.header,transactionHashes:this.transactionHashes}})}cloneSignatures(e){let{signatures:t}=e;return new s({viewNumber:this.viewNumber,myIndex:this.myIndex,primaryIndex:this.primaryIndex,expectedView:this.expectedView,validators:this.validators,blockReceivedTimeSeconds:this.blockReceivedTimeSeconds,transactions:this.transactions,signatures:t,header:{type:"existing",block:this.header,transactionHashes:this.transactionHashes}})}}},2012:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(780);class s extends n.a{cloneExpectedView(e){let{expectedView:t}=e;return new s({type:this.type,previousHash:this.previousHash,blockIndex:this.blockIndex,viewNumber:this.viewNumber,myIndex:this.myIndex,primaryIndex:this.primaryIndex,expectedView:t,validators:this.validators,blockReceivedTimeSeconds:this.blockReceivedTimeSeconds})}}},2013:function(e,t,a){"use strict";a.d(t,"a",function(){return s});a(36);var n=a(714);const s=async e=>{let{blockchain:t,publicKey:a,consensusContext:s}=e;return Object(n.g)({blockchain:t,publicKey:a,consensusContext:s})}},2014:function(e,t,a){"use strict";a.d(t,"a",function(){return u});a(36),a(85);var n=a(107),s=a(152),r=a(778),i=a(728),o=a(714),c=a(2336),d=a(885);const u=async e=>{let{context:t,node:a,privateKey:u,payload:l,consensusContext:h}=e;const{consensusMessage:f}=l;if(l.validatorIndex===t.myIndex||l.version!==t.version||!n.b.uInt256Equal(l.previousHash,t.previousHash)||l.blockIndex!==t.blockIndex||l.validatorIndex>=t.validators.length||f.type!==r.a.ChangeView&&f.viewNumber!==t.viewNumber)return{context:t};switch(f.type){case r.a.ChangeView:return(e=>{let{context:t,node:a,payload:n,consensusContext:s,message:r}=e,i=t;const c=r.newViewNumber;if(c>i.expectedView[n.validatorIndex]){const e=[...i.expectedView];if(e[n.validatorIndex]=c,i=i.cloneExpectedView({expectedView:e}),Object(o.b)({context:i,viewNumber:c}))return Object(o.e)({node:a,context:i,viewNumber:c,consensusContext:s})}return{context:i}})({context:t,node:a,payload:l,consensusContext:h,message:f});case r.a.PrepareRequest:return(async e=>{let{context:t,node:a,privateKey:r,payload:i,consensusContext:d,message:u}=e,l=t;if("backup"!==l.type||l instanceof c.a||i.validatorIndex!==l.primaryIndex||i.timestamp>d.nowSeconds()+600)return{context:l};const h=await a.blockchain.header.get({hashOrIndex:l.previousHash});if(i.timestamp<=h.timestamp)return{context:l};const f=[];f[i.validatorIndex]=u.signature;const b=new c.a({viewNumber:l.viewNumber,myIndex:l.myIndex,primaryIndex:l.primaryIndex,expectedView:l.expectedView,validators:l.validators,blockReceivedTimeSeconds:l.blockReceivedTimeSeconds,transactions:{},signatures:f,header:{type:"new",previousHash:l.previousHash,transactionHashes:u.transactionHashes.map(e=>n.b.uInt256ToHex(e)),blockIndex:l.blockIndex,nonce:u.nonce,timestamp:i.timestamp,nextConsensus:u.nextConsensus}});if(!s.a.verify({message:b.header.message,signature:u.signature,publicKey:l.validators[i.validatorIndex]}))return{context:l};let p=b;for(const e of b.transactionHashes.slice(1)){const t=a.memPool[e];if(void 0!==t){const e=await Object(o.a)({context:p,node:a,privateKey:r,transaction:t,verify:!1,consensusContext:d});if(!(e.context instanceof c.a))return e;p=e.context}}const g=await Object(o.a)({context:p,node:a,privateKey:r,transaction:u.minerTransaction,verify:!0,consensusContext:d});return g.context instanceof c.a?(l=g.context,a.syncMemPool(),{context:l}):g})({context:t,node:a,privateKey:u,payload:l,consensusContext:h,message:f});case r.a.PrepareResponse:return(async e=>{let{context:t,node:a,payload:n,message:r}=e;if(t instanceof d.a&&void 0===t.signatures[n.validatorIndex]&&s.a.verify({message:t.header.message,signature:r.signature,publicKey:t.validators[n.validatorIndex]})){const e=[...t.signatures];e[n.validatorIndex]=r.signature;const s=t.cloneSignatures({signatures:e});return Object(o.c)({context:s,node:a})}return{context:t}})({context:t,node:a,payload:l,message:f});default:throw i.a.assertNever(f),new Error("For TS")}}},2015:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(780);class s extends n.a{constructor(e){let{previousHash:t,blockIndex:a,viewNumber:n,myIndex:s,primaryIndex:r,expectedView:i,validators:o,blockReceivedTimeSeconds:c}=e;super({type:"backup",previousHash:t,blockIndex:a,viewNumber:n,myIndex:s,primaryIndex:r,expectedView:i,validators:o,blockReceivedTimeSeconds:c})}cloneExpectedView(e){let{expectedView:t}=e;return new s({previousHash:this.previousHash,blockIndex:this.blockIndex,viewNumber:this.viewNumber,myIndex:this.myIndex,primaryIndex:this.primaryIndex,expectedView:t,validators:this.validators,blockReceivedTimeSeconds:this.blockReceivedTimeSeconds})}}},2016:function(e,t,a){"use strict";a.d(t,"a",function(){return r});a(36);var n=a(714),s=a(2336);const r=async e=>{let{context:t,node:a,privateKey:r,transaction:i,consensusContext:o}=e;return t instanceof s.a&&void 0===t.transactions[i.hashHex]&&t.transactionHashesSet.has(i.hashHex)?Object(n.a)({context:t,node:a,privateKey:r,transaction:i,verify:!0,consensusContext:o}):{context:t}}},2017:function(e,t,a){"use strict";a.d(t,"a",function(){return m});a(36),a(94),a(85);var n=a(875),s=a.n(n),r=a(152),i=a(107),o=a(1404),c=a(1877),d=a(1879),u=a(859),l=a(1982),h=a(728),f=a(122),b=a.n(f),p=a(714),g=a(2011),y=a(2010);const m=async e=>{let{context:t,node:a,options:{privateKey:n,feeAddress:f,privateNet:m},consensusContext:v}=e;if("primary"===t.type&&!(t instanceof g.a)){let e;if(t instanceof y.a)e=t.cloneRequestSent();else{const i=u.a.randomUInt64();let l=Object.values(a.memPool);const h=await(async e=>{let{node:t,feeAddress:a,transactions:n,nonce:s}=e;const r=await o.a.calculateNetworkFee(t.blockchain.feeContext,n),i=r.isZero()?[]:[new c.a({asset:t.blockchain.settings.utilityToken.hash,value:r,address:a})];return new d.a({nonce:s.mod(u.a.UINT_MAX.addn(1)).toNumber(),outputs:i})})({node:a,feeAddress:f,transactions:l,nonce:i});if(l.length>=a.blockchain.settings.maxTransactionsPerBlock){const e=await Promise.all(l.map(async e=>{const t=await e.getNetworkFee(a.blockchain.feeContext);return[e,new b.a(t.toString(10))]}));e.sort((e,t)=>{let[a,n]=e,[s,r]=t;return r.div(s.size).comparedTo(n.div(a.size))}),l=s()(e,a.blockchain.settings.maxTransactionsPerBlock-1).map(e=>{let[t,a]=e;return t})}l.unshift(h);const[p,y]=await Promise.all([a.blockchain.header.get({hashOrIndex:t.previousHash}),a.blockchain.getValidators(l)]),m=new g.a({viewNumber:t.viewNumber,myIndex:t.myIndex,primaryIndex:t.primaryIndex,expectedView:t.expectedView,validators:t.validators,blockReceivedTimeSeconds:t.blockReceivedTimeSeconds,transactions:l.reduce((e,t)=>Object.assign({},e,{[t.hashHex]:t}),{}),signatures:[],header:{type:"new",previousHash:t.previousHash,transactionHashes:l.map(e=>e.hashHex),blockIndex:t.blockIndex,nonce:i,timestamp:Math.max(v.nowSeconds(),p.timestamp+1),nextConsensus:r.a.getConsensusAddress(y)}}),w=[];w[m.myIndex]=r.a.sign({message:m.header.message,privateKey:n}),e=m.cloneSignatures({signatures:w})}if(m)return Object(p.c)({node:a,context:e});Object(p.h)({context:e,node:a,privateKey:n,consensusMessage:new l.a({viewNumber:e.viewNumber,nonce:e.header.consensusData,nextConsensus:e.header.nextConsensus,transactionHashes:e.transactionHashes.map(e=>i.b.hexToUInt256(e)),minerTransaction:h.a.nullthrows(e.transactions[e.transactionHashes[0]]),signature:h.a.nullthrows(e.signatures[e.myIndex])})});const{secondsPerBlock:w}=a.blockchain.settings;return{context:e,timerSeconds:w<<e.viewNumber+1}}return t instanceof g.a||"backup"===t.type?(e=>{let{context:t,node:a,privateKey:n,consensusContext:s}=e,r=t;r=r.cloneExpectedView({expectedView:Object(p.d)(r)}),Object(p.i)({context:r,node:a,privateKey:n});const i=r.expectedView[r.myIndex];if(Object(p.b)({context:r,viewNumber:i}))return Object(p.f)({blockchain:a.blockchain,context:r,viewNumber:i,consensusContext:s});const{secondsPerBlock:o}=a.blockchain.settings;return{context:r,timerSeconds:o<<i+1}})({context:t,node:a,privateKey:n,consensusContext:v}):{context:t}}},2018:function(e,t,a){"use strict";a.d(t,"a",function(){return n});class n{constructor(){this.connectedPeers=[]}blacklistAndClose(e){}start(){}stop(){}relay(e){}permanentlyBlacklist(e){}addEndpoint(e){}}},207:function(e,t,a){"use strict";a.d(t,"a",function(){return s});let n=0;const s=()=>((n+=1)===Number.MAX_SAFE_INTEGER&&(n=0),n)},209:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(1470);class s extends n.a{toStructuralKey(){return this.value.toKeyString()}equals(e){return void 0!==e&&(this===e||e instanceof s&&this.value.equals(e.value))}}},2289:function(e,t,a){"use strict";a.d(t,"a",function(){return o});a(36);var n=a(288),s=a(1826);let r;const i=async(e,t)=>{const a=await(async e=>{if(void 0===r){const t=new s.a(e);r=t.start().then(()=>t)}return r})(e),{watchTimeoutMS:n,params:i=[]}=t;return a.handleRequest({jsonrpc:"2.0",id:1,method:t.method,params:void 0===n?i:i.concat([n])})};class o extends n.a{constructor(e){super(),this.options=e}async request(e){const t=await this.getOptions(),a=await i(t,e);return this.handleResponse(a)}async getOptions(){return this.options}}},2290:function(e,t,a){"use strict";a.d(t,"a",function(){return o});a(36),a(85);var n=a(201),s=a(728);let r=0;const i=()=>{const e=r;return r+=1,e};function o(e){return t=>new n.a(a=>{let n;const r=t.subscribe({next:e=>{n=e,a.next(e)},error:e=>a.error(e),complete:()=>a.complete()});return r.add(()=>{const t=e(n);if(s.a.isPromise(t)){const e=i();let a=!1;const n=t.then(()=>{a=!0,o.shutdownPromises.delete(e)});a||o.shutdownPromises.set(e,n)}}),r})}!function(e){e.shutdownPromises=new Map,e.wait=async()=>{const t=[...e.shutdownPromises.values()];e.shutdownPromises.clear(),0!==t.length&&(await Promise.all(t),await e.wait())}}(o||(o={}))},2291:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return c});var n=a(107),s=a(152),r=a(90),i=a(1866);const o=["03b209fd4f53a7170ea4444e0cb0a6bb6a53c2bd016926989cf85f9b0fba17a70c","02df48f60e8f3e01c48ff40b9b7f1310d7a8b2a193188befe1c2e3df740e895093","03b8d9d5771d8f513aa0869b9cc8d50986403b78c6da36890638c3d46a5adce04a","02ca0e27697b9c248f6f16e085fd0061e26f44da85b58ee835c110caa5ec3ba554","024c7b7fb6c310fccf1ba33b082519d82964ea93868d676662d4a59ad548df0e7d","02aaec38470f6aad0042c6e877cfd8087d2676b0f516fddd362801b9bd3936399e","02486fd15702c4490a26703112a5cc1d0923fd697a33406bd5a1c00e0013b09a70"],c=function(){let{privateNet:t=!1,standbyValidators:a=o,secondsPerBlock:c,address:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const u=a.map(e=>n.b.stringToECPoint(e)),l=a===o?n.b.asUInt160(e.from("59e75d652b5d3827bf04c165bbe9ef95cca4bf55","hex")):s.a.getConsensusAddress(u);let h;h=void 0===d?a===o?n.b.asUInt160(e.from("5fa99d93303775fe50ca119c327759313eccfa1c","hex")):s.a.toScriptHash(s.a.createMultiSignatureVerificationScript(u.length/2+1,u)):n.b.stringToUInt160(d);const f=Object(i.a)({privateNet:t,consensusAddress:l,address:h});return{genesisBlock:f.genesisBlock,governingToken:f.governingToken,utilityToken:f.utilityToken,decrementInterval:f.decrementInterval,generationAmount:f.generationAmount,secondsPerBlock:void 0===c?f.secondsPerBlock:c,maxTransactionsPerBlock:f.maxTransactionsPerBlock,memPoolSize:f.memPoolSize,fees:{[r.TransactionTypeModel.Enrollment]:n.b.fixed8FromDecimal(1e3),[r.TransactionTypeModel.Issue]:n.b.fixed8FromDecimal(500),[r.TransactionTypeModel.Publish]:n.b.fixed8FromDecimal(500),[r.TransactionTypeModel.Register]:n.b.fixed8FromDecimal(1e4)},registerValidatorFee:n.b.fixed8FromDecimal(1e3),messageMagic:7630401,addressVersion:n.b.NEO_ADDRESS_VERSION,privateKeyVersion:n.b.NEO_PRIVATE_KEY_VERSION,standbyValidators:u,vm:{storageContext:{v0:{index:0}}}}}}).call(this,a(92).Buffer)},2292:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(90),s=a(728),r=a(141),i=a(1876),o=a(1875),c=a(1873),d=a(1874);const u=e=>{const{reader:t}=e,a=Object(n.assertAttributeUsage)(t.clone().readUInt8());switch(a){case n.AttributeUsageModel.Script:return c.a.deserializeWireBase(e);case n.AttributeUsageModel.ContractHash:case n.AttributeUsageModel.Vote:case n.AttributeUsageModel.Hash1:case n.AttributeUsageModel.Hash2:case n.AttributeUsageModel.Hash3:case n.AttributeUsageModel.Hash4:case n.AttributeUsageModel.Hash5:case n.AttributeUsageModel.Hash6:case n.AttributeUsageModel.Hash7:case n.AttributeUsageModel.Hash8:case n.AttributeUsageModel.Hash9:case n.AttributeUsageModel.Hash10:case n.AttributeUsageModel.Hash11:case n.AttributeUsageModel.Hash12:case n.AttributeUsageModel.Hash13:case n.AttributeUsageModel.Hash14:case n.AttributeUsageModel.Hash15:return d.a.deserializeWireBase(e);case n.AttributeUsageModel.ECDH02:case n.AttributeUsageModel.ECDH03:return o.a.deserializeWireBase(e);case n.AttributeUsageModel.DescriptionUrl:case n.AttributeUsageModel.Description:case n.AttributeUsageModel.Remark:case n.AttributeUsageModel.Remark1:case n.AttributeUsageModel.Remark2:case n.AttributeUsageModel.Remark3:case n.AttributeUsageModel.Remark4:case n.AttributeUsageModel.Remark5:case n.AttributeUsageModel.Remark6:case n.AttributeUsageModel.Remark7:case n.AttributeUsageModel.Remark8:case n.AttributeUsageModel.Remark9:case n.AttributeUsageModel.Remark10:case n.AttributeUsageModel.Remark11:case n.AttributeUsageModel.Remark12:case n.AttributeUsageModel.Remark13:case n.AttributeUsageModel.Remark14:case n.AttributeUsageModel.Remark15:return i.a.deserializeWireBase(e);default:throw s.a.assertNever(a),new Error("For TS")}};Object(r.a)(u)},2293:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return h});var n=a(152),s=a(107),r=a(831);const i=Object(r.a)("INVALID_MERKLE_TREE",()=>"Invalid Merkle tree. (no nodes found)");class o{constructor(e){let{hash:t,leftChild:a,rightChild:n,parent:s}=e;this.hash=t,this.leftChild=a,this.rightChild=n,this.parent=s}clone(e){const t=new o({hash:this.hash,parent:e});return void 0!==this.leftChild&&(t.leftChild=this.leftChild.clone(t)),void 0!==this.rightChild&&(t.rightChild=this.rightChild.clone(t)),t}}const c=t=>{const a=t;if(0===a.length)throw new i;if(1===a.length)return a[0];const r=[],d=Math.floor((a.length+1)/2);for(let t=0;t<d;t+=1){const i=a[2*t],c=2*t+1===a.length?i:a[2*t+1],d=new o({hash:n.a.hash256(e.concat([s.b.uInt256ToBuffer(i.hash),s.b.uInt256ToBuffer(c.hash)])),leftChild:i,rightChild:c});r[t]=d,a[2*t].parent=d,2*t+1!==a.length&&(a[2*t+1].parent=d)}return c(r)},d=(e,t,a,n)=>{const{leftChild:s,rightChild:r}=e;1!==a&&void 0!==s&&(2===a?n[2*t]||n[2*t+1]||(e.leftChild=void 0,e.rightChild=void 0):void 0!==r&&(d(s,2*t,a-1,n),d(r,2*t+1,a-1,n),void 0===s.leftChild&&void 0===r.rightChild&&(e.leftChild=void 0,e.rightChild=void 0)))},u=(e,t)=>{const{leftChild:a,rightChild:n}=e;void 0===a||void 0===n?t.push(e.hash):(u(a,t),u(n,t))},l=e=>{const t=[];return u(e,t),t};class h{static computeRoot(e){return new this(e).root.hash}constructor(e){this.root=Array.isArray(e)?c(e.map(e=>new o({hash:e}))):e,this.depth=1;for(let e=this.root;void 0!==e.leftChild;e=e.leftChild)this.depth+=1}trim(e){const t=this.root.clone();return d(t,0,this.depth,e),new h(t)}depthFirstSearch(){return l(this.root)}toHashArray(){return this.depthFirstSearch()}}}).call(this,a(92).Buffer)},2294:function(e,t,a){"use strict";a.d(t,"b",function(){return p}),a.d(t,"a",function(){return g});var n=a(90),s=a(728),r=a(141),i=a(1881),o=a(1883),c=a(1882),d=a(1886),u=a(1880),l=a(1879),h=a(1885),f=a(1867),b=a(1884);const p=e=>{const{reader:t}=e,a=Object(n.assertTransactionType)(t.clone().readUInt8());switch(a){case n.TransactionTypeModel.Miner:return l.a.deserializeWireBase(e);case n.TransactionTypeModel.Issue:return u.a.deserializeWireBase(e);case n.TransactionTypeModel.Claim:return i.a.deserializeWireBase(e);case n.TransactionTypeModel.Enrollment:return c.a.deserializeWireBase(e);case n.TransactionTypeModel.Register:return f.a.deserializeWireBase(e);case n.TransactionTypeModel.Contract:return o.a.deserializeWireBase(e);case n.TransactionTypeModel.State:return b.a.deserializeWireBase(e);case n.TransactionTypeModel.Publish:return h.a.deserializeWireBase(e);case n.TransactionTypeModel.Invocation:return d.a.deserializeWireBase(e);default:throw s.a.assertNever(a),new Error("For TS")}},g=Object(r.a)(p)},2295:function(e,t,a){"use strict";a.d(t,"a",function(){return b});a(36),a(85);var n=a(162),s=a(90),r=a(107),i=a(152),o=a(199),c=a(728),d=a(184),u=a(859),l=a(860);const h="Votes",f="Registered";class b{constructor(e){let{type:t,key:a,field:r,value:i}=e;this.serializeWire=Object(s.createSerializeWire)(this.serializeWireBase.bind(this)),this.sizeInternal=u.a.lazy(()=>n.a.sizeOfUInt8+n.a.sizeOfVarBytesLE(this.key)+n.a.sizeOfVarString(this.field)+n.a.sizeOfVarBytesLE(this.value)),this.type=t,this.key=a,this.field=r,this.value=i}static deserializeWireBase(e){const{reader:t}=e,a=Object(s.assertStateDescriptorType)(t.readUInt8()),n=t.readVarBytesLE(100),i=t.readVarString(32),o=t.readVarBytesLE(65535);switch(a){case s.StateDescriptorTypeModel.Account:if(20!==n.length)throw new r.a("Expected StateDescriptor account key length to equal 20. Received: ".concat(n.length));if(i!==h)throw new r.a("Expected StateDescriptor account field to equal ".concat(h,". Received: ").concat(i));break;case s.StateDescriptorTypeModel.Validator:if(33!==n.length)throw new r.a("Expected StateDescriptor validator key length to equal 33. Received: ".concat(n.length));if(i!==f)throw new r.a("Expected StateDescriptor validator field to equal ".concat(f,". Received: ").concat(i));break;default:c.a.assertNever(a)}return new this({type:a,key:n,field:i,value:o})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new l.a(e.buffer)})}get size(){return this.sizeInternal()}getSystemFee(e){const{type:t}=this;switch(t){case s.StateDescriptorTypeModel.Account:return u.a.ZERO;case s.StateDescriptorTypeModel.Validator:return this.value.some(e=>0!==e)?e.registerValidatorFee:u.a.ZERO;default:throw c.a.assertNever(t),new Error("For TS")}}getScriptHashesForVerifying(){const{type:e}=this;switch(e){case s.StateDescriptorTypeModel.Account:return[r.b.uInt160ToHex(r.b.bufferToUInt160(this.key))];case s.StateDescriptorTypeModel.Validator:return[r.b.uInt160ToHex(i.a.getVerificationScriptHash(r.b.bufferToECPoint(this.key)))];default:throw c.a.assertNever(e),new Error("For TS")}}async verify(e){const{type:t}=this;switch(t){case s.StateDescriptorTypeModel.Account:return this.verifyAccount(e);case s.StateDescriptorTypeModel.Validator:return this.verifyValidator();default:throw c.a.assertNever(t),new Error("For TS")}}serializeWireBase(e){e.writeUInt8(this.type),e.writeVarBytesLE(this.key),e.writeVarString(this.field),e.writeVarBytesLE(this.value)}serializeJSON(e){return{type:this.getJSONType(),key:o.a.writeBuffer(this.key),field:this.field,value:o.a.writeBuffer(this.value)}}getJSONType(){return s.StateDescriptorTypeModel[this.type]}async verifyAccount(e){if(this.field!==h)throw new d.f("Invalid field ".concat(this.field));const t=new l.a(this.value),a=r.b.bufferToUInt160(this.key),[n,s]=await Promise.all([e.tryGetAccount({hash:a}),e.getAllValidators()]);if(void 0===n||n.isFrozen)throw new d.f("Account is frozen");const i=t.readArray(()=>t.readECPoint());if(i.length>0){if(n.getBalance(e.governingToken.hashHex).eq(u.a.ZERO))throw new d.f("Account does not have NEO");const t=new Set(s.filter(e=>e.registered).map(e=>e.publicKey).concat(e.standbyValidators).map(e=>r.b.ecPointToHex(e)));i.forEach(e=>{if(!t.has(r.b.ecPointToHex(e)))throw new d.f("Invalid validator public key")})}}async verifyValidator(){if(this.field!==f)throw new d.f("Invalid field ".concat(this.field))}}},2296:function(e,t,a){"use strict";a.d(t,"a",function(){return x});a(36),a(85);var n=a(870),s=a(1404),r=a(2294),i=a(1877),o=a(1406),c=a(1407),d=a(1408),u=a(1409),l=a(2298),h=a(1411),f=a(1412),b=a(871),p=a(1413),g=a(1414),y=a(1415),m=a(1419),v=a(2297),w=a(1405),S=a(1902),I=a(872),T=a(1887);const x=e=>{let{db:t,context:a}=e;const x=async e=>{let{hashOrIndex:a}=e,n=a;if("number"==typeof n)try{const e=await t.get(v.a.serializeHeaderIndexHashKey(n));n=w.b(e)}catch(e){if(e.notFound)throw new I.a("".concat(n));throw e}return n},E=T.d({db:t,serializeKey:v.a.typeKeyToSerializeKey.header,deserializeValue:e=>n.a.deserializeWire({context:a,buffer:e})}),k=async e=>{let{hashOrIndex:t}=e;const a=await x({hashOrIndex:t});return E.get({hash:a})},B={get:k,tryGet:T.e({get:k}),tryGetLatest:T.f({db:t,latestKey:v.a.maxHeaderHashKey,deserializeResult:e=>({hash:w.b(e)}),get:E.get})},A=T.d({db:t,serializeKey:v.a.typeKeyToSerializeKey.block,deserializeValue:e=>s.a.deserializeWire({context:a,buffer:e})}),O=async e=>{let{hashOrIndex:t}=e;const a=await x({hashOrIndex:t});return A.get({hash:a})},N={get:O,tryGet:T.e({get:O}),tryGetLatest:T.f({db:t,latestKey:v.a.maxBlockHashKey,deserializeResult:e=>({hash:w.a(e)}),get:A.get})},U=T.d({db:t,serializeKey:v.a.typeKeyToSerializeKey.transaction,deserializeValue:e=>Object(r.a)({context:a,buffer:e})}),C=T.d({db:t,serializeKey:v.a.typeKeyToSerializeKey.output,deserializeValue:e=>i.a.deserializeWire({context:a,buffer:e})});return{header:B,block:N,blockData:T.d({db:t,serializeKey:v.a.typeKeyToSerializeKey.blockData,deserializeValue:e=>o.a.deserializeWire({context:a,buffer:e})}),account:T.a({db:t,serializeKey:v.a.typeKeyToSerializeKey.account,minKey:v.a.accountMinKey,maxKey:v.a.accountMaxKey,deserializeValue:e=>c.a.deserializeWire({context:a,buffer:e})}),accountUnclaimed:T.b({db:t,serializeKey:v.a.typeKeyToSerializeKey.accountUnclaimed,getMinKey:v.a.getAccountUnclaimedKeyMin,getMaxKey:v.a.getAccountUnclaimedKeyMax,deserializeValue:e=>d.a.deserializeWire({context:a,buffer:e})}),accountUnspent:T.b({db:t,serializeKey:v.a.typeKeyToSerializeKey.accountUnspent,getMinKey:v.a.getAccountUnspentKeyMin,getMaxKey:v.a.getAccountUnspentKeyMax,deserializeValue:e=>u.a.deserializeWire({context:a,buffer:e})}),action:T.b({db:t,serializeKey:v.a.typeKeyToSerializeKey.action,getMinKey:v.a.getActionKeyMin,getMaxKey:v.a.getActionKeyMax,deserializeValue:e=>Object(l.a)({context:a,buffer:e})}),asset:T.d({db:t,serializeKey:v.a.typeKeyToSerializeKey.asset,deserializeValue:e=>h.a.deserializeWire({context:a,buffer:e})}),transaction:U,transactionData:T.d({db:t,serializeKey:v.a.typeKeyToSerializeKey.transactionData,deserializeValue:e=>f.a.deserializeWire({context:a,buffer:e})}),output:C,contract:T.d({db:t,serializeKey:v.a.typeKeyToSerializeKey.contract,deserializeValue:e=>b.a.deserializeWire({context:a,buffer:e})}),storageItem:T.b({db:t,serializeKey:v.a.typeKeyToSerializeKey.storageItem,getMinKey:v.a.getStorageItemKeyMin,getMaxKey:v.a.getStorageItemKeyMax,deserializeValue:e=>p.a.deserializeWire({context:a,buffer:e})}),validator:T.a({db:t,serializeKey:v.a.typeKeyToSerializeKey.validator,minKey:v.a.validatorMinKey,maxKey:v.a.validatorMaxKey,deserializeValue:e=>g.a.deserializeWire({context:a,buffer:e})}),invocationData:T.d({db:t,serializeKey:v.a.typeKeyToSerializeKey.invocationData,deserializeValue:e=>y.a.deserializeWire({context:a,buffer:e})}),validatorsCount:T.c({db:t,key:v.a.validatorsCountKey,deserializeValue:e=>m.a.deserializeWire({context:a,buffer:e})}),async close(){await t.close()},async commit(e){const a=e.map(S.a).reduce((e,t)=>(e.push(...t),e),[]);await t.batch(a)},async reset(){const e=[];await new Promise((a,n)=>{t.createKeyStream().on("data",t=>{e.push({type:"del",key:t})}).on("error",e=>{n(e)}).on("end",()=>{a()})}),await t.batch(e)}}}},2297:function(e,t,a){"use strict";a.d(t,"a",function(){return G});a(94);var n=a(107),s=a(728);const r=e=>"".concat(e).concat("\0"),i=e=>"".concat(e).concat(""),o=r("0"),c=r("1"),d=r("2"),u=r("3"),l=r("4"),h=r("5"),f=r("6"),b=r("7"),p=r("8"),g=r("9"),y=r("a"),m=r("b"),v=r("c"),w=r("d"),S=r("e"),I=r("f"),T=r("g"),x=r("h"),E="".concat(T,"0"),k="".concat(T,"1"),B=e=>t=>{let{hash:a,input:s}=t;return"".concat(e).concat(n.b.uInt160ToString(a)).concat(n.b.uInt256ToString(s.hash)).concat(s.index)},A=e=>t=>{let{hash:a}=t;return"".concat(e).concat(n.b.uInt160ToString(a))},O=e=>t=>{let{hash:a}=t;return i("".concat(e).concat(n.b.uInt160ToString(a)))},N=A(c),U=O(c),C=A(d),H=O(d),z=e=>{let{hash:t,prefix:a}=e;return[w,void 0===t?void 0:n.b.uInt160ToString(t),void 0===a?void 0:a.toString("hex")].filter(s.a.notNull).join("")},P=e=>{let{index:t}=e;return"".concat(u).concat(t.toString(10,8))},R=S,M=i(S),V=e=>t=>"".concat(e).concat((e=>{let{hash:t}=e;return n.b.uInt160ToString(t)})(t)),_=e=>t=>"".concat(e).concat((e=>{let{hash:t}=e;return n.b.uInt256ToString(t)})(t)),D=o,L=i(o),K={account:V(o),accountUnclaimed:B(c),accountUnspent:B(d),action:P,asset:_(l),block:_(h),blockData:_(f),header:_(b),transaction:_(g),output:e=>{let{index:t,hash:a}=e;return"".concat(y).concat(n.b.uInt256ToString(a)).concat(t)},transactionData:_(m),contract:V(v),storageItem:e=>{let{hash:t,key:a}=e;return"".concat(w).concat(n.b.uInt160ToString(t)).concat(a.toString("hex"))},validator:e=>{let{publicKey:t}=e;return"".concat(S).concat(n.b.ecPointToString(t))},invocationData:_(I)},G={validatorsCountKey:x,serializeHeaderIndexHashKey:e=>"".concat(p).concat(e),maxHeaderHashKey:E,maxBlockHashKey:k,getAccountUnclaimedKeyMin:N,getAccountUnclaimedKeyMax:U,getAccountUnspentKeyMin:C,getAccountUnspentKeyMax:H,getStorageItemKeyMin:z,getStorageItemKeyMax:e=>i(z(e)),serializeActionKey:P,getActionKeyMin:e=>{let{indexStart:t}=e;return[u,void 0===t?void 0:t.toString(10,8)].filter(s.a.notNull).join("")},getActionKeyMax:e=>{let{indexStop:t}=e;return i([u,void 0===t?void 0:t.toString(10,8)].filter(s.a.notNull).join(""))},validatorMinKey:R,validatorMaxKey:M,accountMinKey:D,accountMaxKey:L,typeKeyToSerializeKey:K}},2298:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(728),s=a(141),r=a(873),i=a(1889),o=a(1890);const c=Object(s.a)(e=>{const{reader:t}=e,a=Object(r.b)(t.clone().readUInt8());switch(a){case r.a.Log:return i.a.deserializeWireBase(e);case r.a.Notification:return o.a.deserializeWireBase(e);default:throw n.a.assertNever(a),new Error("For TS")}})},2299:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(90),s=a(728),r=a(141),i=a(766),o=a(763),c=a(761),d=a(764),u=a(1892),l=a(765),h=a(1895),f=a(767),b=a(1893),p=a(1891),g=a(1894),y=a(1896);const m=e=>{const{reader:t}=e,a=Object(n.assertContractParameterType)(t.clone().readUInt8());switch(a){case n.ContractParameterTypeModel.Signature:return p.a.deserializeWireBase(e);case n.ContractParameterTypeModel.Boolean:return o.a.deserializeWireBase(e);case n.ContractParameterTypeModel.Integer:return l.a.deserializeWireBase(e);case n.ContractParameterTypeModel.Hash160:return d.a.deserializeWireBase(e);case n.ContractParameterTypeModel.Hash256:return u.a.deserializeWireBase(e);case n.ContractParameterTypeModel.ByteArray:return c.a.deserializeWireBase(e);case n.ContractParameterTypeModel.PublicKey:return b.a.deserializeWireBase(e);case n.ContractParameterTypeModel.String:return g.a.deserializeWireBase(e);case n.ContractParameterTypeModel.Array:return i.a.deserializeWireBase(e);case n.ContractParameterTypeModel.Map:return f.a.deserializeWireBase(e);case n.ContractParameterTypeModel.InteropInterface:return h.a.deserializeWireBase(e);case n.ContractParameterTypeModel.Void:return y.a.deserializeWireBase(e);default:throw s.a.assertNever(a),new Error("For TS")}};Object(r.a)(m);i.a.deserializeWireBase=e=>{const{reader:t}=e;t.readUInt8();const a=t.readArray(()=>m(e));return new i.a(a)},i.a.deserializeWire=Object(r.a)(i.a.deserializeWireBase.bind(i.a)),f.a.deserializeWireBase=e=>{const{reader:t}=e;t.readUInt8();const a=t.readArray(()=>t.readArray(()=>m(e)));return new f.a(a)},f.a.deserializeWire=Object(r.a)(f.a.deserializeWireBase.bind(f.a))},230:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"c",function(){return r}),a.d(t,"b",function(){return i}),a.d(t,"d",function(){return o});var n,s=a(114);!function(e){e[e.CreditFlag=64]="CreditFlag",e[e.DutyFlag=128]="DutyFlag",e[e.GoverningToken=0]="GoverningToken",e[e.UtilityToken=1]="UtilityToken",e[e.Currency=8]="Currency",e[e.Share=144]="Share",e[e.Invoice=152]="Invoice",e[e.Token=96]="Token"}(n||(n={}));const r=(e,t)=>(e&t)===t,i=e=>{if(!(e=>void 0!==n[e])(e))throw new s.c(e);return e},o=e=>c(n[e]),c=e=>{if(!(e=>void 0!==n[e])(e))throw new s.d(e);return e}},2300:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(90),s=a(141),r=a(1897),i=a(1898);const o=e=>{const{reader:t}=e;switch(Object(n.assertVMState)(t.clone().readUInt8())){case n.VMState.Fault:return r.a.deserializeWireBase(e);case n.VMState.Halt:return i.a.deserializeWireBase(e);default:throw new Error("Invalid VM state")}};Object(s.a)(o)},2301:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(141),s=a(1900),r=a(1901),i=a(1899),o=a(711);const c=e=>{const{reader:t}=e;switch(Object(o.b)(t.clone().readUInt8())){case o.a.Modify:return i.a.deserializeWireBase(e);case o.a.Add:return s.a.deserializeWireBase(e);case o.a.Delete:return r.a.deserializeWireBase(e);default:throw new Error("Invalid Storage Change Type")}};Object(n.a)(c)},2302:function(e,t,a){"use strict";a.d(t,"a",function(){return _});a(36),a(94),a(332),a(85);var n=a(107),s=a(186),r=a(152),i=a(90),o=a(2303),c=a(859),d=a(1427),u=a(1889),l=a(1890),h=a(1886),f=a(710),b=a(728),p=a(845),g=a(846),y=a(183),m=a(101),v=a(1903),w=a.n(v),S=a(444),I=a(2282),T=a(2304),x=a(1426),E=a(1425),k=a(1428),B=a(1941);const A=o.a.child({component:"blockchain"}),O=g.a.createMeasureInt64("persist/failures",y.b.UNIT),N=g.a.createMeasureInt64("persist/current",y.b.UNIT),U=g.a.createMeasureInt64("persist/progress",y.b.UNIT),C=g.a.createMeasureDouble("persist/duration",y.b.MS,"time to persist block in milliseconds"),H=g.a.createMeasureDouble("persist/latency",y.b.SEC,"'The latency from block timestamp to persist'"),z=g.a.createView("neo_blockchain_persist_block_duration_ms",C,y.a.DISTRIBUTION,[],"distribution of the persist duration",[5,10,25,50,100,250,500,1e3,2500,5e3,1e4]);g.a.registerView(z);const P=g.a.createView("neo_blockchain_persist_block_failures_total",O,y.a.COUNT,[],"total blockchain failures");g.a.registerView(P);const R=g.a.createView("neo_blockchain_block_index",N,y.a.LAST_VALUE,[],"the current block index");g.a.registerView(R);const M=g.a.createView("neo_blockchain_persisting_block_index",U,y.a.LAST_VALUE,[],"The current in progress persist index");g.a.registerView(M);const V=g.a.createView("neo_blockchain_persist_block_latency_seconds",H,y.a.DISTRIBUTION,[],"The latency from block timestamp to persist",[1,2,5,7.5,10,12.5,15,17.5,20]);g.a.registerView(V);class _{constructor(e){this.mutablePersistingBlocks=!1,this.mutableBlockQueue=new w.a({comparator:(e,t)=>e.block.index-t.block.index}),this.mutableInQueue=new Set,this.mutableRunning=!1,this.mutableBlock$=new S.a,this.getValidators=async e=>(A.debug({title:"neo_blockchain_get_validators"}),Object(E.b)(this,e)),this.calculateClaimAmount=async e=>{A.debug({title:"neo_blockchain_calculate_claim_amount"});const t=await Promise.all(e.map(async e=>this.tryGetSpentCoin(e))),a=t.filter(b.a.notNull);if(t.length!==a.length)throw new x.b(t.length-a.length);const s=a.filter(e=>{if(e.claimed)throw new x.a(n.b.uInt256ToString(e.output.asset),e.output.value.toString(10));if(!n.b.uInt256Equal(e.output.asset,this.settings.governingToken.hash))throw new x.d(n.b.uInt256ToString(e.output.asset),n.b.uInt256ToString(this.settings.governingToken.hash));return!0});return c.a.calculateClaimAmount({coins:s.map(e=>({value:e.output.value,startHeight:e.startHeight,endHeight:e.endHeight})),decrementInterval:this.settings.decrementInterval,generationAmount:this.settings.generationAmount,getSystemFee:async e=>{const t=await this.header.get({hashOrIndex:e});return(await this.blockData.get({hash:t.hash})).systemFee}})},this.verifyScript=async e=>{let{scriptContainer:t,hash:a,witness:o}=e,{verification:h}=o;if(0===h.length){const e=new s.a;e.emitAppCallVerification(a),h=e.build()}else if(!n.b.uInt160Equal(a,r.a.toScriptHash(h)))throw new x.f;const f=this.createWriteBlockchain(),b=[];let p=new m.BN(0);const g=await this.vm.executeScripts({scripts:[{code:o.invocation},{code:h}],blockchain:f,scriptContainer:t,triggerType:d.b.Verification,action:d.a,gas:c.a.ONE_HUNDRED_MILLION,listeners:{onLog:e=>{let{message:t,scriptHash:a}=e;b.push(new u.a({index:p,scriptHash:a,message:t})),p=p.add(c.a.ONE)},onNotify:e=>{let{args:t,scriptHash:a}=e;b.push(new l.a({index:p,scriptHash:a,args:t})),p=p.add(c.a.ONE)}}}),y={actions:b,hash:a,witness:o},{stack:v,state:w,errorMessage:S}=g;return w===i.VMState.Fault?Object.assign({},y,{failureMessage:void 0===S?"Script execution ended in a FAULT state":S}):1!==v.length?Object.assign({},y,{failureMessage:"Verification did not return one result. This may be a bug in the "+"smart contract compiler or the smart contract itself. If you are using the NEOONE compiler please file an issue. Found ".concat(v.length," results.")}):v[0].asBoolean()?y:Object.assign({},y,{failureMessage:"Verification did not succeed."})},this.tryGetInvocationData=async e=>{const t=await this.invocationData.tryGet({hash:e.hash});if(void 0===t)return;const[a,n,s]=await Promise.all([void 0===t.assetHash?Promise.resolve(void 0):this.asset.get({hash:t.assetHash}),Promise.all(t.contractHashes.map(async e=>this.contract.tryGet({hash:e}))),t.actionIndexStart.eq(t.actionIndexStop)?Promise.resolve([]):this.action.getAll$({indexStart:t.actionIndexStart,indexStop:t.actionIndexStop.sub(c.a.ONE)}).pipe(Object(T.a)()).toPromise()]);return{asset:a,contracts:n.filter(b.a.notNull),deletedContractHashes:t.deletedContractHashes,migratedContractHashes:t.migratedContractHashes,voteUpdates:t.voteUpdates,result:t.result,actions:s,storageChanges:t.storageChanges}},this.tryGetTransactionData=async e=>this.transactionData.tryGet({hash:e.hash}),this.getUnclaimed=async e=>this.accountUnclaimed.getAll$({hash:e}).pipe(Object(T.a)()).toPromise().then(e=>e.map(e=>e.input)),this.getUnspent=async e=>{return(await this.accountUnspent.getAll$({hash:e}).pipe(Object(T.a)()).toPromise()).map(e=>e.input)},this.getAllValidators=async()=>this.validator.all$.pipe(Object(T.a)()).toPromise(),this.isSpent=async e=>{const t=await this.transactionData.tryGet({hash:e.hash});return void 0!==t&&void 0!==t.endHeights[e.index]},this.tryGetSpentCoin=async e=>{const[t,a]=await Promise.all([this.transactionData.tryGet({hash:e.hash}),this.output.get(e)]);if(void 0===t)return;const n=t.endHeights[e.index];if(void 0===n)return;const s=t.claimed[e.index];return{output:a,startHeight:t.startHeight,endHeight:n,claimed:!!s}},this.storage=e.storage,this.mutableCurrentBlock=e.currentBlock,this.mutablePreviousBlock=e.previousBlock,this.mutableCurrentHeader=e.currentHeader,this.vm=e.vm,this.settings$=new I.a(e.settings),g.a.record([{measure:U,value:this.currentBlockIndex},{measure:N,value:this.currentBlockIndex}]);const t=this;this.deserializeWireContext={get messageMagic(){return t.settings.messageMagic}},this.feeContext={get getOutput(){return t.output.get},get governingToken(){return t.settings.governingToken},get utilityToken(){return t.settings.utilityToken},get fees(){return t.settings.fees},get registerValidatorFee(){return t.settings.registerValidatorFee}},this.serializeJSONContext={get addressVersion(){return t.settings.addressVersion},get feeContext(){return t.feeContext},get tryGetInvocationData(){return t.tryGetInvocationData},get tryGetTransactionData(){return t.tryGetTransactionData},get getUnclaimed(){return t.getUnclaimed},get getUnspent(){return t.getUnspent}},this.start()}static async create(e){let{settings:t,storage:a,vm:n}=e;const[s,r]=await Promise.all([a.block.tryGetLatest(),a.header.tryGetLatest()]);let i;void 0!==s&&(i=await a.block.tryGet({hashOrIndex:s.index-1}));const o=new _({currentBlock:s,currentHeader:r,previousBlock:i,settings:t,storage:a,vm:n});return void 0===r&&await o.persistHeaders([t.genesisBlock.header]),void 0===s&&await o.persistBlock({block:t.genesisBlock}),o}get settings(){return this.settings$.getValue()}get currentBlock(){if(void 0===this.mutableCurrentBlock)throw new x.c;return this.mutableCurrentBlock}get previousBlock(){return this.mutablePreviousBlock}get currentHeader(){if(void 0===this.mutableCurrentHeader)throw new x.c;return this.mutableCurrentHeader}get currentBlockIndex(){return void 0===this.mutableCurrentBlock?-1:this.currentBlock.index}get block$(){return this.mutableBlock$}get isPersistingBlock(){return this.mutablePersistingBlocks}get account(){return this.storage.account}get accountUnclaimed(){return this.storage.accountUnclaimed}get accountUnspent(){return this.storage.accountUnspent}get action(){return this.storage.action}get asset(){return this.storage.asset}get block(){return this.storage.block}get blockData(){return this.storage.blockData}get header(){return this.storage.header}get transaction(){return this.storage.transaction}get transactionData(){return this.storage.transactionData}get output(){return this.storage.output}get contract(){return this.storage.contract}get storageItem(){return this.storage.storageItem}get validator(){return this.storage.validator}get invocationData(){return this.storage.invocationData}get validatorsCount(){return this.storage.validatorsCount}async stop(){if(this.mutableRunning){if(this.mutablePersistingBlocks){const e=new Promise(e=>{this.mutableDoneRunningResolve=e});this.mutableRunning=!1,await e,this.mutableDoneRunningResolve=void 0}else this.mutableRunning=!1;A.info({title:"neo_blockchain_stop"},"NEO blockchain stopped.")}}updateSettings(e){this.settings$.next(e)}async persistBlock(e){let{block:t,unsafe:a=!1}=e;return new Promise((e,n)=>{this.mutableInQueue.has(t.hashHex)?e():(this.mutableInQueue.add(t.hashHex),this.mutableBlockQueue.queue({block:t,resolve:e,reject:n,unsafe:a}),this.persistBlocksAsync())})}async persistHeaders(e){}async verifyBlock(e){await e.verify({genesisBlock:this.settings.genesisBlock,tryGetBlock:this.block.tryGet,tryGetHeader:this.header.tryGet,isSpent:this.isSpent,getAsset:this.asset.get,getOutput:this.output.get,tryGetAccount:this.account.tryGet,getValidators:this.getValidators,standbyValidators:this.settings.standbyValidators,getAllValidators:this.getAllValidators,calculateClaimAmount:async e=>this.calculateClaimAmount(e),verifyScript:async e=>this.verifyScript(e),currentHeight:void 0===this.mutableCurrentBlock?0:this.mutableCurrentBlock.index,governingToken:this.settings.governingToken,utilityToken:this.settings.utilityToken,fees:this.settings.fees,registerValidatorFee:this.settings.registerValidatorFee})}async verifyConsensusPayload(e){await e.verify({getValidators:async()=>this.getValidators([]),verifyScript:async e=>this.verifyScript(e),currentIndex:void 0===this.mutableCurrentBlock?0:this.mutableCurrentBlock.index,currentBlockHash:this.currentBlock.hash})}async verifyTransaction(e){let{transaction:t,memPool:a}=e;try{return{verifications:await t.verify({calculateClaimAmount:this.calculateClaimAmount,isSpent:this.isSpent,getAsset:this.asset.get,getOutput:this.output.get,tryGetAccount:this.account.tryGet,standbyValidators:this.settings.standbyValidators,getAllValidators:this.getAllValidators,verifyScript:async e=>this.verifyScript(e),governingToken:this.settings.governingToken,utilityToken:this.settings.utilityToken,fees:this.settings.fees,registerValidatorFee:this.settings.registerValidatorFee,currentHeight:this.currentBlockIndex,memPool:a})}}catch(e){if(void 0===e.code||"string"!=typeof e.code||!e.code.includes("VERIFY"))throw new x.e(e.message);throw e}}async invokeScript(e){const t=new h.a({script:e,gas:n.b.ONE_HUNDRED_FIXED8});return this.invokeTransaction(t)}async invokeTransaction(e){const t=this.createWriteBlockchain(),a=[];let n=new m.BN(0);return{result:await Object(k.a)(async()=>this.vm.executeScripts({scripts:[{code:e.script}],blockchain:t,scriptContainer:{type:f.a.Transaction,value:e},listeners:{onLog:e=>{let{message:t,scriptHash:s}=e;a.push(new u.a({index:n,scriptHash:s,message:t})),n=n.add(c.a.ONE)},onNotify:e=>{let{args:t,scriptHash:s}=e;a.push(new l.a({index:n,scriptHash:s,args:t})),n=n.add(c.a.ONE)}},triggerType:d.b.Application,action:d.a,gas:e.gas,skipWitnessVerify:!0})),actions:a}}async reset(){await this.stop(),await this.storage.reset(),this.mutableCurrentHeader=void 0,this.mutableCurrentBlock=void 0,this.mutablePreviousBlock=void 0,this.start(),await this.persistHeaders([this.settings.genesisBlock.header]),await this.persistBlock({block:this.settings.genesisBlock})}async persistBlocksAsync(){if(this.mutablePersistingBlocks||!this.mutableRunning)return;let e;this.mutablePersistingBlocks=!0;try{for(e=this.cleanBlockQueue();this.mutableRunning&&void 0!==e&&e.block.index===this.currentBlockIndex+1;){const t=Date.now(),a=e,n={[p.a.NEO_BLOCK_INDEX]:e.block.index,title:"neo_blockchain_persist_block_top_level"};try{await this.persistBlockInternal(a.block,a.unsafe),A.debug(n),g.a.record([{measure:C,value:Date.now()-t}])}catch(e){throw A.error(Object.assign({error:e},n)),g.a.record([{measure:O,value:1}]),e}e.resolve(),this.mutableBlock$.next(e.block),g.a.record([{measure:N,value:e.block.index},{measure:H,value:Date.now()-e.block.timestamp}]),e=this.cleanBlockQueue()}void 0!==e&&this.mutableBlockQueue.queue(e)}catch(t){void 0!==e&&e.reject(t)}finally{this.mutablePersistingBlocks=!1,void 0!==this.mutableDoneRunningResolve&&(this.mutableDoneRunningResolve(),this.mutableDoneRunningResolve=void 0)}}cleanBlockQueue(){let e=this.dequeBlockQueue();for(;void 0!==e&&e.block.index<=this.currentBlockIndex;)e.resolve(),e=this.dequeBlockQueue();return e}dequeBlockQueue(){if(this.mutableBlockQueue.length>0)return this.mutableBlockQueue.dequeue()}start(){this.mutableBlock$=new S.a,this.mutablePersistingBlocks=!1,this.mutableBlockQueue=new w.a({comparator:(e,t)=>e.block.index-t.block.index}),this.mutableInQueue=new Set,this.mutableDoneRunningResolve=void 0,this.mutableRunning=!0,A.info({title:"neo_blockchain_start"},"NEO blockchain started.")}async persistBlockInternal(e,t){g.a.record([{measure:U,value:e.index}]),t||await this.verifyBlock(e);const a=this.createWriteBlockchain();await a.persistBlock(e),await this.storage.commit(a.getChangeSet()),this.mutablePreviousBlock=this.mutableCurrentBlock,this.mutableCurrentBlock=e,this.mutableCurrentHeader=e.header}createWriteBlockchain(){return new B.a({settings:this.settings,currentBlock:this.mutableCurrentBlock,currentHeader:this.mutableCurrentHeader,storage:this.storage,vm:this.vm,getValidators:this.getValidators})}}},2303:function(e,t,a){"use strict";a.d(t,"a",function(){return f});var n=a(1904),s=a.n(n),r=a(119),i=a.n(r),o=a(1932),c=a.n(o),d=a(1934);const u=Object(d.a)(),l={},h=e=>{const{path:t,level:a}=u[e];return l[e]=t,void 0===t?c()({name:e,level:a,useLevelLabels:!0}):c()({name:e,level:a,useLevelLabels:!0},((e,t)=>{const a=i.a.resolve(e,t,"".concat(t,".log"));return s.a.ensureDirSync(i.a.dirname(a)),c.a.extreme(a)})(t,e))},f=(h("editor-server"),h("server"),h("node"));h("cli"),h("http"),h("test")},2306:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(209);class s extends n.a{asHeader(){return this.value}asBlockBase(){return this.value}}},2307:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(209);class s extends n.a{asBlock(){return this.value}asHeader(){return this.value.header}asBlockBase(){return this.value}}},2308:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(209);class s extends n.a{asTransaction(){return this.value}}},2309:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(209);class s extends n.a{asAccount(){return this.value}}},231:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"c",function(){return r}),a.d(t,"b",function(){return i}),a.d(t,"d",function(){return o});var n,s=a(114);!function(e){e[e.Signature=0]="Signature",e[e.Boolean=1]="Boolean",e[e.Integer=2]="Integer",e[e.Hash160=3]="Hash160",e[e.Hash256=4]="Hash256",e[e.ByteArray=5]="ByteArray",e[e.PublicKey=6]="PublicKey",e[e.String=7]="String",e[e.Array=16]="Array",e[e.Map=18]="Map",e[e.InteropInterface=240]="InteropInterface",e[e.Void=255]="Void"}(n||(n={}));const r=e=>void 0!==n[e],i=e=>{if(r(e))return e;throw new s.m(e)},o=e=>c(n[e]),c=e=>{if((e=>void 0!==n[e])(e))return e;throw new s.n(e)}},2310:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(209);class s extends n.a{asAsset(){return this.value}}},2311:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(209);class s extends n.a{asContract(){return this.value}}},2312:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(85);var n=a(1875),s=a(1873),r=a(1874),i=a(344),o=a(1950),c=a(209),d=a(1952),u=a(1951);class l extends c.a{asAttribute(){return this.value}asUInt160(){return this.toValueStackItem().asUInt160()}asUInt256(){return this.toValueStackItem().asUInt256()}asECPoint(){return this.toValueStackItem().asECPoint()}asBuffer(){return this.toValueStackItem().asBuffer()}toValueStackItem(){const{value:e}=this;return e instanceof n.a?new o.a(e.value):e instanceof s.a?new d.a(e.value):e instanceof r.a?new u.a(e.value):new i.a(e.value)}toContractParameter(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return this.toValueStackItem().toContractParameter()}asAttributeStackItem(){return this}}},2313:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(209);class s extends n.a{asInput(){return this.value}}},2314:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(209);class s extends n.a{asOutput(){return this.value}}},2315:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(209);class s extends n.a{asWitness(){return this.value}}},2316:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(1953);class s extends n.a{asIterator(){return this.value}}},2317:function(e,t,a){"use strict";a.d(t,"a",function(){return c});a(123),a(174);var n=a(150),s=a(1471),r=a(335),i=a(140),o=a(1954);class c extends o.a{key(){const{mutableCurrent:e}=this;if(void 0===e)throw new i.e;return e.key}keys(){const e=n.a.from(this.enumerator).pipe(Object(r.a)(e=>{let{key:t}=e;return{value:t}}));return new o.a(e[Symbol.asyncIterator]())}values(){const e=n.a.from(this.enumerator).pipe(Object(r.a)(e=>{let{value:t}=e;return{value:t}}));return new o.a(e[Symbol.asyncIterator]())}concatIterator(e){const t=Object(s.a)(n.a.from(this.enumerator),n.a.from(e.enumerator));return new c(t[Symbol.asyncIterator]())}}},2318:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(209);class s extends n.a{asValidator(){return this.value}}},2319:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(209);class s extends n.a{asConsensusPayload(){return this.value}}},232:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n,s=a(114);!function(e){e[e.Account=64]="Account",e[e.Validator=72]="Validator"}(n||(n={}));const r=e=>{if((e=>void 0!==n[e])(e))return e;throw new s.t(e)}},2320:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return Be});a(36),a(181),a(332),a(387),a(85);var n=a(151),s=a.n(n),r=a(1955),i=a.n(r),o=a(1956),c=a.n(o),d=a(1957),u=a.n(d),l=a(1960),h=a.n(l),f=a(875),b=a.n(f),p=a(1963),g=a.n(p),y=a(1472),m=a.n(y),v=a(125),w=a(107),S=a(152),I=a(2303),T=a(2332),x=a(106),E=a(90),k=a(1867),B=a(2293),A=a(845),O=a(728),N=a(2331),U=a(2290),C=a(846),H=a(183),z=a(1965),P=a(1968),R=a.n(P),M=a(386),V=a.n(M),_=a(1474),D=a(1974),L=a.n(D),K=a(1632),G=a(1061),W=a(2284),F=a(970),j=a(2285),Y=a(2283),J=a(2287),q=a(1480),Z=a(1977),X=a(1979),$=a(2321),Q=a(2322),ee=a(1978),te=a(2328),ae=a(1984),ne=a(2323),se=a(2329),re=a(2330);const ie=I.a.child({component:"node-protocol"}),oe=Object(A.b)(A.a.COMMAND_NAME),ce=C.a.createMeasureInt64("messages/received",H.b.UNIT),de=C.a.createMeasureInt64("messages/failed",H.b.UNIT),ue=C.a.createMeasureInt64("mempool/size",H.b.UNIT),le=C.a.createView("neo_protocol_messages_received_total",ce,H.a.COUNT,[oe],"number of messages received");C.a.registerView(le);const he=C.a.createView("neo_protocol_messages_failures_total",de,H.a.COUNT,[oe],"number of message failures");C.a.registerView(he);const fe=C.a.createView("neo_protocol_mempool_size",ue,H.a.LAST_VALUE,[],"current mempool size");C.a.registerView(fe);const be=t=>{let{filter:a,k:n,tweak:s}=t;return new R.a({vData:e.from(a),nHashFuncs:n,nTweak:s})},pe=()=>new z.ScalingBloem(.05,{initial_capacity:1e5,scaling:4}),ge=(e,t)=>{const a=e.networkFee.divn(e.transaction.size),n=t.networkFee.divn(t.transaction.size);return a.lt(n)?-1:n.lt(a)?1:e.transaction.hash.compare(t.transaction.hash)},ye=5e3,me=200,ve=500,we=ve/3,Se=1e4,Ie=1e3,Te=5e3,xe=2,Ee=300,ke=new Set(["","0.0.0.0","localhost","127.0.0.1","::","::1"]);class Be{constructor(e){let{blockchain:t,createNetwork:a,environment:n={},options$:s}=e;this.mutableUnhealthyPeerSeconds=Ee,this.requestBlocks=m()(()=>{const e=this.mutableBestPeer,t=this.blockchain.previousBlock,a=void 0===t?this.blockchain.currentBlock:t;void 0!==e&&a.index<e.data.startHeight&&(this.mutableGetBlocksRequestsCount>xe?(this.mutableBestPeer=this.findBestPeer(e),this.network.blacklistAndClose(e),this.mutableGetBlocksRequestsCount=0):this.shouldRequestBlocks()&&(this.mutableGetBlocksRequestsIndex===a.index?this.mutableGetBlocksRequestsCount+=1:(this.mutableGetBlocksRequestsCount=1,this.mutableGetBlocksRequestsIndex=a.index),this.mutableGetBlocksRequestTime=Date.now(),this.sendMessage(e,this.createMessage({command:q.a.getblocks,payload:new $.a({hashStart:[a.hash]})}))),this.requestBlocks())},Ie),this.onRequestEndpoints=g()(()=>{this.relay(this.createMessage({command:q.a.getaddr})),this.fetchEndpointsFromRPC()},5e3),this.trimMemPool=g()(async()=>{const e=Object.values(this.mutableMemPool);if(e.length>ye){const t=await Promise.all(e.map(async e=>{const t=await e.getNetworkFee({getOutput:this.blockchain.output.get,governingToken:this.blockchain.settings.governingToken,utilityToken:this.blockchain.settings.utilityToken,fees:this.blockchain.settings.fees,registerValidatorFee:this.blockchain.settings.registerValidatorFee});return{transaction:e,networkFee:t}}));b()(t.slice().sort(ge),this.blockchain.settings.memPoolSize).map(e=>e.transaction.hashHex).forEach(e=>{delete this.mutableMemPool[e]}),C.a.record([{measure:ue,value:Object.keys(this.mutableMemPool).length}])}},Te),this.negotiate=async e=>{this.sendMessage(e,this.createMessage({command:q.a.version,payload:new Q.b({protocolVersion:0,services:Q.a.NODE_NETWORK,timestamp:Math.round(Date.now()/1e3),port:this.externalPort,nonce:this.nonce,userAgent:this.userAgent,startHeight:this.blockchain.currentBlockIndex,relay:!0})}));const t=await e.receiveMessage(3e4);let a;if(t.value.command!==q.a.version)throw new Z.b(t);a=t.value.payload,this.checkVersion(e,t,a);const{host:n}=Object(x.getEndpointConfig)(e.endpoint);let s;ee.a.isValid(n)&&(s=new ee.a({host:n,port:a.port,timestamp:a.timestamp,services:a.services})),this.sendMessage(e,this.createMessage({command:q.a.verack}));const r=await e.receiveMessage(3e4);if(r.value.command!==q.a.verack)throw new Z.b(r);return{data:{nonce:a.nonce,startHeight:a.startHeight,mutableBloomFilter:void 0,address:s},relay:a.relay}},this.checkPeerHealth=(e,t)=>{const a=O.a.nowSeconds(),n=this.mutableBlockIndex[e.endpoint];return void 0===t?{healthy:!0,checkTimeSeconds:a,blockIndex:n}:void 0!==t.blockIndex&&void 0!==n&&t.blockIndex<n?{healthy:!0,checkTimeSeconds:a,blockIndex:n}:t.blockIndex===n&&O.a.nowSeconds()-t.checkTimeSeconds<this.mutableUnhealthyPeerSeconds?{healthy:!0,checkTimeSeconds:t.checkTimeSeconds,blockIndex:t.blockIndex}:{healthy:!1,checkTimeSeconds:a,blockIndex:n}},this.onEvent=e=>{if("PEER_CONNECT_SUCCESS"===e.event){const{connectedPeer:t}=e;(void 0===this.mutableBestPeer||this.mutableBestPeer.data.startHeight+100<t.data.startHeight)&&(this.mutableBestPeer=t,this.resetRequestBlocks(),this.requestBlocks())}else"PEER_CLOSED"===e.event&&void 0!==this.mutableBestPeer&&this.mutableBestPeer.endpoint===e.peer.endpoint&&(this.mutableBestPeer=this.findBestPeer(),this.resetRequestBlocks(),this.requestBlocks())},this.blockchain=t,this.network=a({negotiate:this.negotiate,checkPeerHealth:this.checkPeerHealth,createMessageTransform:()=>new X.b(this.blockchain.deserializeWireContext),onMessageReceived:(e,t)=>{this.onMessageReceived(e,t)},onRequestEndpoints:this.onRequestEndpoints.bind(this),onEvent:this.onEvent}),this.options$=s;const{externalPort:r=0}=n;this.externalPort=r,this.nonce=Math.floor(Math.random()*v.a.UINT_MAX_NUMBER),this.userAgent="NEO:neo-one-js:1.0.0-preview",this.mutableMemPool={},this.mutableKnownBlockHashes=pe(),this.tempKnownBlockHashes=new Set,this.mutableKnownTransactionHashes=pe(),this.tempKnownTransactionHashes=new Set,this.mutableKnownHeaderHashes=pe(),this.tempKnownHeaderHashes=new Set,this.mutableGetBlocksRequestsCount=1,this.consensusCache=new L.a(1e4),this.mutableBlockIndex={}}get consensus(){return this.mutableConsensus}get connectedPeers(){return this.network.connectedPeers.map(e=>e.endpoint)}get memPool(){return this.mutableMemPool}async reset(){this.mutableMemPool={},this.mutableKnownBlockHashes=pe(),this.tempKnownBlockHashes.clear(),this.mutableKnownTransactionHashes=pe(),this.tempKnownTransactionHashes.clear(),this.mutableKnownHeaderHashes=pe(),this.tempKnownHeaderHashes.clear(),this.mutableGetBlocksRequestsCount=1,this.consensusCache.reset(),this.mutableBlockIndex={}}start$(){const e=Object(K.a)(async()=>{this.network.start(),ie.debug({title:"neo_protocol_start"},"Protocol started.")}).pipe(Object(N.a)(),Object(U.a)(()=>{this.network.stop(),ie.debug({title:"neo_protocol_stop"},"Protocol stopped.")})),t={enabled:!1,options:{privateKey:"unused",privateNet:!1}},a=this.options$.pipe(Object(F.a)(e=>{let{consensus:a=t}=e;return a.enabled}),Object(j.a)(),Object(Y.a)(e=>{if(e){const e=new T.a({options$:this.options$.pipe(Object(F.a)(e=>{let{consensus:a=t}=e;return a.options}),Object(j.a)()),node:this});return this.mutableConsensus=e,e.start$()}return Object(G.a)(void 0)})),n=this.options$.pipe(Object(F.a)(e=>{let{unhealthyPeerSeconds:t=Ee}=e;this.mutableUnhealthyPeerSeconds=t}));return Object(W.a)([e,a,n])}async relayTransaction(e){let{throwVerifyError:t=!1,forceAdd:a=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{throwVerifyError:!1,forceAdd:!1};const n={};if(e.type===E.TransactionTypeModel.Miner||void 0!==this.mutableMemPool[e.hashHex]||this.tempKnownTransactionHashes.has(e.hashHex))return n;if(!this.mutableKnownTransactionHashes.has(e.hash)){this.tempKnownTransactionHashes.add(e.hashHex);try{if(Object.values(this.mutableMemPool).length>ye/2&&!a)return this.mutableKnownTransactionHashes.add(e.hash),n;let s,r={[A.a.NEO_TRANSACTION_HASH]:e.hashHex};try{let t,a;try{t=await this.blockchain.transaction.tryGet({hash:e.hash})}finally{r=Object.assign({[A.a.NEO_TRANSACTION_FOUND]:void 0!==t},r)}if(void 0===t){(a=await this.blockchain.verifyTransaction({transaction:e,memPool:Object.values(this.mutableMemPool)})).verifications.every(e=>{let{failureMessage:t}=e;return void 0===t})&&(this.mutableMemPool[e.hashHex]=e,C.a.record([{measure:ue,value:Object.keys(this.mutableMemPool).length}]),void 0!==this.mutableConsensus&&this.mutableConsensus.onTransactionReceived(e),this.relayTransactionInternal(e),await this.trimMemPool())}this.mutableKnownTransactionHashes.add(e.hash),s={verifyResult:a},ie.debug(Object.assign({title:"neo_relay_transaction"},r))}catch(e){throw ie.error(Object.assign({title:"neo_relay_transaction",error:e},r)),e}return s}catch(e){if(void 0===e.code||"string"!=typeof e.code||!e.code.includes("VERIFY")||t)throw e}finally{this.tempKnownTransactionHashes.delete(e.hashHex)}}return n}async relayBlock(e){await this.persistBlock(e)}relayConsensusPayload(e){const t=this.createMessage({command:q.a.inv,payload:new te.a({type:ae.a.Consensus,hashes:[e.hash]})});this.consensusCache.set(e.hashHex,e),this.relay(t)}syncMemPool(){this.relay(this.createMessage({command:q.a.mempool}))}relay(e){this.network.relay(e.serializeWire())}relayTransactionInternal(e){const t=this.createMessage({command:q.a.inv,payload:new te.a({type:ae.a.Transaction,hashes:[e.hash]})}).serializeWire();this.network.connectedPeers.forEach(a=>{a.relay&&this.testFilter(a.data.mutableBloomFilter,e)&&a.write(t)})}sendMessage(e,t){e.write(t.serializeWire())}findBestPeer(e){let t=this.network.connectedPeers;void 0!==e&&(t=t.filter(t=>t.endpoint!==e.endpoint));const a=h()(t,e=>e.data.startHeight);if(void 0!==a)return u()(t.filter(e=>e.data.startHeight===a.data.startHeight))[0]}resetRequestBlocks(){this.mutableGetBlocksRequestsIndex=void 0,this.mutableGetBlocksRequestsCount=0}shouldRequestBlocks(){const e=this.blockchain.currentBlock,t=this.mutableGetBlocksRequestTime;return void 0===this.mutableGetBlocksRequestsIndex||e.index-this.mutableGetBlocksRequestsIndex>we||void 0===t||Date.now()-t>Se}checkVersion(e,t,a){if(a.nonce===this.nonce)throw this.network.permanentlyBlacklist(e.endpoint),new Z.b(t,"Nonce equals my nonce.");if(void 0!==this.network.connectedPeers.find(e=>a.nonce===e.data.nonce))throw new Z.a("Already connected to nonce.")}ready(){const e=this.mutableBestPeer,t=this.blockchain.currentBlock;return void 0!==e&&t.index>=e.data.startHeight}async fetchEndpointsFromRPC(){try{await this.doFetchEndpointsFromRPC()}catch(e){}}async doFetchEndpointsFromRPC(){const{rpcURLs:e=[]}=await this.options$.pipe(Object(J.a)(1)).toPromise();await Promise.all(e.map(async e=>this.fetchEndpointsFromRPCURL(e)))}async fetchEndpointsFromRPCURL(e){try{const t=await V()(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"getpeers",params:[]})});if(!t.ok)throw new Error("Failed to fetch peers from ".concat(e,": ").concat(t.status," ").concat(t.statusText));const a=await t.json();if("object"==typeof a&&void 0!==a.error&&"object"==typeof a.error&&"number"==typeof a.error.code&&"string"==typeof a.error.message)throw new Error(a.error);a.result.connected.map(e=>{const{address:t,port:a}=e;let n=new _.Address6(t).canonicalForm();return null==n&&(n=_.Address6.fromAddress4(t).canonicalForm()),{host:null==n?"":n,port:a}}).filter(e=>!ke.has(e.host)).map(e=>Object(x.createEndpoint)({type:"tcp",host:e.host,port:e.port})).forEach(e=>this.network.addEndpoint(e))}catch(t){ie.error({title:"neo_protocol_fetch_endpoints_error",[A.a.HTTP_URL]:e,error:t},"Failed to fetch endpoints from ".concat(e))}}onMessageReceived(e,t){try{new Promise(async a=>{switch(t.value.command){case q.a.addr:this.onAddrMessageReceived(t.value.payload);break;case q.a.block:await this.onBlockMessageReceived(e,t.value.payload);break;case q.a.consensus:await this.onConsensusMessageReceived(t.value.payload);break;case q.a.filteradd:this.onFilterAddMessageReceived(e,t.value.payload);break;case q.a.filterclear:this.onFilterClearMessageReceived(e);break;case q.a.filterload:this.onFilterLoadMessageReceived(e,t.value.payload);break;case q.a.getaddr:this.onGetAddrMessageReceived(e);break;case q.a.getblocks:await this.onGetBlocksMessageReceived(e,t.value.payload);break;case q.a.getdata:await this.onGetDataMessageReceived(e,t.value.payload);break;case q.a.getheaders:await this.onGetHeadersMessageReceived(e,t.value.payload);break;case q.a.headers:await this.onHeadersMessageReceived(e,t.value.payload);break;case q.a.inv:this.onInvMessageReceived(e,t.value.payload);break;case q.a.mempool:this.onMemPoolMessageReceived(e);break;case q.a.tx:await this.onTransactionReceived(t.value.payload);break;case q.a.verack:this.onVerackMessageReceived(e);break;case q.a.version:this.onVersionMessageReceived(e);break;case q.a.alert:case q.a.merkleblock:case q.a.notfound:case q.a.ping:case q.a.pong:case q.a.reject:break;default:O.a.assertNever(t.value)}a()}).catch(()=>{})}catch(e){}}onAddrMessageReceived(e){e.addresses.filter(e=>!ke.has(e.host)).map(e=>Object(x.createEndpoint)({type:"tcp",host:e.host,port:e.port})).forEach(e=>this.network.addEndpoint(e))}async onBlockMessageReceived(e,t){const a=this.mutableBlockIndex[e.endpoint];this.mutableBlockIndex[e.endpoint]=Math.max(t.index,void 0===a?0:a),await this.relayBlock(t)}async persistBlock(e){if(!(this.blockchain.currentBlockIndex>e.index||this.tempKnownBlockHashes.has(e.hashHex)||this.mutableKnownBlockHashes.has(e.hash))){this.tempKnownBlockHashes.add(e.hashHex);try{if(void 0===await this.blockchain.block.tryGet({hashOrIndex:e.hash}))try{await this.blockchain.persistBlock({block:e}),void 0!==this.mutableConsensus&&this.mutableConsensus.onPersistBlock();const t=this.mutableBestPeer;void 0!==t&&e.index>t.data.startHeight&&this.relay(this.createMessage({command:q.a.inv,payload:new te.a({type:ae.a.Block,hashes:[e.hash]})})),ie.info({title:"neo_relay_block",[A.a.NEO_BLOCK_INDEX]:e.index})}catch(t){throw ie.error({title:"neo_relay_block",[A.a.NEO_BLOCK_INDEX]:e.index,error:t}),t}this.mutableKnownBlockHashes.add(e.hash),this.mutableKnownHeaderHashes.add(e.hash),e.transactions.forEach(e=>{delete this.mutableMemPool[e.hashHex],this.mutableKnownTransactionHashes.add(e.hash)}),C.a.record([{measure:ue,value:Object.keys(this.mutableMemPool).length}])}finally{this.tempKnownBlockHashes.delete(e.hashHex)}}}async onConsensusMessageReceived(e){const{consensus:t}=this;void 0!==t&&(await this.blockchain.verifyConsensusPayload(e),t.onConsensusPayloadReceived(e))}onFilterAddMessageReceived(e,t){void 0!==e.data.mutableBloomFilter&&e.data.mutableBloomFilter.insert(t.data)}onFilterClearMessageReceived(e){e.data.mutableBloomFilter=void 0}onFilterLoadMessageReceived(e,t){e.data.mutableBloomFilter=be(t)}onGetAddrMessageReceived(e){const t=b()(u()(this.network.connectedPeers.map(e=>e.data.address).filter(O.a.notNull)),me);t.length>0&&this.sendMessage(e,this.createMessage({command:q.a.addr,payload:new ne.a({addresses:t})}))}async onGetBlocksMessageReceived(e,t){const a=await this.getHeaders(t,this.blockchain.currentBlockIndex);this.sendMessage(e,this.createMessage({command:q.a.inv,payload:new te.a({type:ae.a.Block,hashes:a.map(e=>e.hash)})}))}async onGetDataMessageReceived(e,t){switch(t.type){case ae.a.Transaction:await Promise.all(t.hashes.map(async t=>{let a=this.mutableMemPool[w.b.uInt256ToHex(t)];void 0===a&&(a=await this.blockchain.transaction.tryGet({hash:t})),void 0!==a&&this.sendMessage(e,this.createMessage({command:q.a.tx,payload:a}))}));break;case ae.a.Block:await Promise.all(t.hashes.map(async t=>{const a=await this.blockchain.block.tryGet({hashOrIndex:t});void 0!==a&&(void 0===e.data.mutableBloomFilter?this.sendMessage(e,this.createMessage({command:q.a.block,payload:a})):this.sendMessage(e,this.createMessage({command:q.a.merkleblock,payload:this.createMerkleBlockPayload({block:a,flags:a.transactions.map(t=>this.testFilter(e.data.mutableBloomFilter,t))})})))}));break;case ae.a.Consensus:t.hashes.forEach(t=>{const a=this.consensusCache.get(w.b.uInt256ToHex(t));void 0!==a&&this.sendMessage(e,this.createMessage({command:q.a.consensus,payload:a}))});break;default:O.a.assertNever(t.type)}}async onGetHeadersMessageReceived(e,t){const a=await this.getHeaders(t,this.blockchain.currentHeader.index);this.sendMessage(e,this.createMessage({command:q.a.headers,payload:new se.a({headers:a})}))}async onHeadersMessageReceived(e,t){const a=t.headers.filter(e=>!this.mutableKnownHeaderHashes.has(e.hash)&&!this.tempKnownHeaderHashes.has(e.hashHex));if(a.length>0){a.forEach(e=>{this.tempKnownHeaderHashes.add(e.hashHex)});try{await this.blockchain.persistHeaders(a),a.forEach(e=>{this.mutableKnownHeaderHashes.add(e.hash)})}finally{a.forEach(e=>{this.tempKnownHeaderHashes.delete(e.hashHex)})}}this.blockchain.currentHeader.index<e.data.startHeight&&this.sendMessage(e,this.createMessage({command:q.a.getheaders,payload:new $.a({hashStart:[this.blockchain.currentHeader.hash]})}))}onInvMessageReceived(e,t){let a;switch(t.type){case ae.a.Transaction:a=t.hashes.filter(e=>!this.mutableKnownTransactionHashes.has(e)&&!this.tempKnownTransactionHashes.has(w.b.uInt256ToHex(e)));break;case ae.a.Block:a=t.hashes.filter(e=>!this.mutableKnownBlockHashes.has(e)&&!this.tempKnownBlockHashes.has(w.b.uInt256ToHex(e)));break;case ae.a.Consensus:a=t.hashes;break;default:O.a.assertNever(t.type),a=[]}a.length>0&&this.sendMessage(e,this.createMessage({command:q.a.getdata,payload:new te.a({type:t.type,hashes:a})}))}onMemPoolMessageReceived(e){this.sendMessage(e,this.createMessage({command:q.a.inv,payload:new te.a({type:ae.a.Transaction,hashes:Object.values(this.mutableMemPool).map(e=>e.hash)})}))}async onTransactionReceived(e){this.ready()&&(e.type===E.TransactionTypeModel.Miner?void 0!==this.mutableConsensus&&this.mutableConsensus.onTransactionReceived(e):await this.relayTransaction(e))}onVerackMessageReceived(e){e.close()}onVersionMessageReceived(e){e.close()}async getHeaders(e,t){let a=Promise.resolve(t);e.hashStop.equals(w.b.ZERO_UINT256)||(a=this.blockchain.header.tryGet({hashOrIndex:e.hashStop}).then(e=>void 0===e?t:Math.min(e.index,t)));const[n,r]=await Promise.all([Promise.all(e.hashStart.map(async e=>this.blockchain.header.tryGet({hashOrIndex:e}))),a]),o=c()(i()(n.filter(O.a.notNull),[e=>e.index]));if(void 0===o)return[];const d=o.index+1;return d>t?[]:Promise.all(s()(d,Math.min(d+ve,r)).map(async e=>this.blockchain.header.get({hashOrIndex:e})))}testFilter(e,t){const a=e;return void 0===a||(a.contains(t.hash)||t.outputs.some(e=>a.contains(e.address))||t.inputs.some(e=>a.contains(e.serializeWire()))||t.scripts.some(e=>a.contains(S.a.toScriptHash(e.verification)))||t.type===E.TransactionTypeModel.Register&&t instanceof k.a&&a.contains(t.asset.admin))}createMerkleBlockPayload(t){let{block:a,flags:n}=t;const s=new B.a(a.transactions.map(e=>e.hash)).trim(n),r=e.allocUnsafe(Math.floor((n.length+7)/8));for(let e=0;e<n.length;e+=1)n[e]&&(r[Math.floor(e/8)]|=1<<e%8);return new re.a({version:a.version,previousHash:a.previousHash,merkleRoot:a.merkleRoot,timestamp:a.timestamp,index:a.index,consensusData:a.consensusData,nextConsensus:a.nextConsensus,script:a.script,transactionCount:a.transactions.length,hashes:s.toHashArray(),flags:r})}createMessage(e){return new X.a({magic:this.blockchain.settings.messageMagic,value:e})}}}).call(this,a(92).Buffer)},2321:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(107),s=a(90),r=a(860);class i{constructor(e){let{hashStart:t,hashStop:a=n.b.ZERO_UINT256}=e;this.serializeWire=Object(s.createSerializeWire)(this.serializeWireBase.bind(this)),this.hashStart=t,this.hashStop=a}static deserializeWireBase(e){let{reader:t}=e;return new this({hashStart:t.readArray(()=>t.readUInt256()),hashStop:t.readUInt256()})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new r.a(e.buffer)})}serializeWireBase(e){e.writeArray(this.hashStart,t=>{e.writeUInt256(t)}),e.writeUInt256(this.hashStop)}}},2322:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return o});var n=a(90),s=a(860),r=a(101);const i={NODE_NETWORK:new r.BN(1)};class o{constructor(e){let{protocolVersion:t,services:a,timestamp:s,port:r,nonce:i,userAgent:o,startHeight:c,relay:d}=e;this.serializeWire=Object(n.createSerializeWire)(this.serializeWireBase.bind(this)),this.protocolVersion=t,this.services=a,this.timestamp=s,this.port=r,this.nonce=i,this.userAgent=o,this.startHeight=c,this.relay=d}static deserializeWireBase(e){let{reader:t}=e;return new this({protocolVersion:t.readUInt32LE(),services:t.readUInt64LE(),timestamp:t.readUInt32LE(),port:t.readUInt16LE(),nonce:t.readUInt32LE(),userAgent:t.readVarString(1024),startHeight:t.readUInt32LE(),relay:t.readBoolean()})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new s.a(e.buffer)})}serializeWireBase(e){e.writeUInt32LE(this.protocolVersion),e.writeUInt64LE(this.services),e.writeUInt32LE(this.timestamp),e.writeUInt16LE(this.port),e.writeUInt32LE(this.nonce),e.writeVarString(this.userAgent),e.writeUInt32LE(this.startHeight),e.writeBoolean(this.relay)}}},2323:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(90),s=a(860),r=a(1978);class i{constructor(e){let{addresses:t}=e;this.serializeWire=Object(n.createSerializeWire)(this.serializeWireBase.bind(this)),this.addresses=t}static deserializeWireBase(e){const{reader:t}=e;return new this({addresses:t.readArray(()=>r.a.deserializeWireBase(e))})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new s.a(e.buffer)})}serializeWireBase(e){e.writeArray(this.addresses,t=>t.serializeWireBase(e))}}},2324:function(e,t,a){"use strict";a.d(t,"a",function(){return h});a(36),a(85);var n=a(107),s=a(152),r=a(159),i=a(184),o=a(710),c=a(859),d=a(860),u=a(709),l=a(1980);class h extends l.a{constructor(e){let{version:t,previousHash:a,blockIndex:r,validatorIndex:o,timestamp:d,consensusMessage:u,script:l}=e;super({version:t,previousHash:a,blockIndex:r,validatorIndex:o,timestamp:d,consensusMessage:u}),this.toKeyString=c.a.toKeyString(this.constructor,()=>this.hashHex),this.equals=c.a.equals(this.constructor,this,e=>n.b.uInt256Equal(this.hash,e.hash)),this.getScriptHashesForVerifying=c.a.lazyAsync(async e=>{let{getValidators:t,currentBlockHash:a}=e;if(!n.b.uInt256Equal(this.previousHash,a))throw new i.f("Previous hash not equal to current block hash");const r=await t();if(r.length<=this.validatorIndex)throw new i.f("Invalid validator index");return new Set([n.b.uInt160ToHex(s.a.getVerificationScriptHash(r[this.validatorIndex]))])}),this.hashInternal=c.a.lazy(()=>s.a.hash256(this.message)),this.hashHexInternal=c.a.lazy(()=>n.b.uInt256ToHex(this.hash)),this.messageInternal=c.a.lazy(()=>this.serializeUnsigned()),this.script=l}static sign(e,t){return new h({version:e.version,previousHash:e.previousHash,blockIndex:e.blockIndex,validatorIndex:e.validatorIndex,timestamp:e.timestamp,consensusMessage:e.consensusMessage,script:s.a.createWitness(e.serializeWire(),t,u.a)})}static deserializeWireBase(e){const{reader:t}=e,{version:a,previousHash:s,blockIndex:r,validatorIndex:i,timestamp:o,consensusMessage:c}=super.deserializeUnsignedConsensusPayloadWireBase(e);if(1!==t.readUInt8())throw new n.a("Expected BinaryReader's readUInt8(0) to be 1. Received: ".concat(t.readUInt8()));return new this({version:a,previousHash:s,blockIndex:r,validatorIndex:i,timestamp:o,consensusMessage:c,script:u.a.deserializeWireBase(e)})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new d.a(e.buffer)})}get hash(){return this.hashInternal()}get hashHex(){return this.hashHexInternal()}get message(){return this.messageInternal()}serializeUnsigned(){const e=new r.a;return super.serializeWireBase(e),e.toBuffer()}serializeWireBase(e){super.serializeWireBase(e),e.writeUInt8(1),this.script.serializeWireBase(e)}async verify(e){let{verifyScript:t,getValidators:a,currentBlockHash:s,currentIndex:r}=e;if(this.blockIndex!==r+1)throw new i.f("Invalid block index.");const c=await this.getScriptHashesForVerifying({getValidators:a,currentBlockHash:s}),d={type:o.a.Consensus,value:this};(await Promise.all([...c].map(async e=>t({scriptContainer:d,hash:n.b.hexToUInt160(e),witness:this.script})))).forEach(e=>{let{failureMessage:t}=e;if(void 0!==t)throw new i.f(t)})}}},2325:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(728),s=a(141),r=a(1981),i=a(778),o=a(1982),c=a(1983);const d=Object(s.a)(e=>{const{reader:t}=e,a=Object(i.b)(t.clone().readUInt8());switch(a){case i.a.ChangeView:return r.a.deserializeWireBase(e);case i.a.PrepareRequest:return o.a.deserializeWireBase(e);case i.a.PrepareResponse:return c.a.deserializeWireBase(e);default:throw n.a.assertNever(a),new Error("For TS")}})},2326:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(90),s=a(860);class r{constructor(e){let{data:t}=e;this.serializeWire=Object(n.createSerializeWire)(this.serializeWireBase.bind(this)),this.data=t}static deserializeWireBase(e){let{reader:t}=e;return new this({data:t.readVarBytesLE(520)})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new s.a(e.buffer)})}serializeWireBase(e){e.writeVarBytesLE(this.data)}}},2327:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(90),s=a(107),r=a(860);class i{constructor(e){let{filter:t,k:a,tweak:s}=e;this.serializeWire=Object(n.createSerializeWire)(this.serializeWireBase.bind(this)),this.filter=t,this.k=a,this.tweak=s}static deserializeWireBase(e){let{reader:t}=e;const a=t.readVarBytesLE(36e3),n=t.readUInt8(),r=t.readUInt32LE();if(n>50)throw new s.a("Expected BinaryReader's readUInt8(0) to be less than 50. Received: ".concat(n));return new this({filter:a,k:n,tweak:r})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new r.a(e.buffer)})}serializeWireBase(e){e.writeVarBytesLE(this.filter),e.writeUInt8(this.k),e.writeUInt32LE(this.tweak)}}},2328:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(90),s=a(860),r=a(1984);class i{constructor(e){let{type:t,hashes:a}=e;this.serializeWire=Object(n.createSerializeWire)(this.serializeWireBase.bind(this)),this.type=t,this.hashes=a}static deserializeWireBase(e){let{reader:t}=e;return new this({type:Object(r.b)(t.readUInt8()),hashes:t.readArray(()=>t.readUInt256())})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new s.a(e.buffer)})}serializeWireBase(e){e.writeUInt8(this.type),e.writeArray(this.hashes,t=>{e.writeUInt256(t)})}}},2329:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(90),s=a(870),r=a(860);class i{constructor(e){let{headers:t}=e;this.serializeWire=Object(n.createSerializeWire)(this.serializeWireBase.bind(this)),this.headers=t}static deserializeWireBase(e){const{reader:t}=e;return new this({headers:t.readArray(()=>s.a.deserializeWireBase(e))})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new r.a(e.buffer)})}serializeWireBase(e){e.writeArray(this.headers,t=>t.serializeWireBase(e))}}},233:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"c",function(){return r}),a.d(t,"b",function(){return i}),a.d(t,"d",function(){return o});var n,s=a(114);!function(e){e[e.None=0]="None",e[e.Constant=1]="Constant"}(n||(n={}));const r=(e,t)=>(e&t)===t,i=e=>{if(!(e=>void 0!==n[e])(e))throw new s.u(e);return e},o=e=>c(n[e]),c=e=>{if(!(e=>void 0!==n[e])(e))throw new s.v(e);return e}},2330:function(e,t,a){"use strict";a.d(t,"a",function(){return o});a(181);var n=a(162),s=a(771),r=a(859),i=a(860);class o extends s.a{static deserializeWireBase(e){const{reader:t}=e,a=super.deserializeBlockBaseWireBase(e),n=t.readVarUIntLE(r.a.INT_MAX_VALUE).toNumber(),s=t.readArray(()=>t.readUInt256()),i=t.readVarBytesLE();return new this({version:a.version,previousHash:a.previousHash,merkleRoot:a.merkleRoot,timestamp:a.timestamp,index:a.index,consensusData:a.consensusData,nextConsensus:a.nextConsensus,script:a.script,transactionCount:n,hashes:s,flags:i})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new i.a(e.buffer)})}constructor(e){let{version:t,previousHash:a,merkleRoot:s,timestamp:i,index:o,consensusData:c,nextConsensus:d,script:u,transactionCount:l,hashes:h,flags:f}=e;super({version:t,previousHash:a,merkleRoot:s,timestamp:i,index:o,consensusData:c,nextConsensus:d,script:u}),this.transactionCount=l,this.hashes=h,this.flags=f,this.merkleBlockPayloadSizeInternal=r.a.lazy(()=>super.size+n.a.sizeOfUInt32LE+n.a.sizeOfArray(this.hashes,()=>n.a.sizeOfUInt256)+n.a.sizeOfVarBytesLE(this.flags))}get size(){return this.merkleBlockPayloadSizeInternal()}serializeWireBase(e){super.serializeWireBase(e),e.writeVarUIntLE(this.transactionCount),e.writeArray(this.hashes,t=>{e.writeUInt256(t)}),e.writeVarBytesLE(this.flags)}}},2331:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(201);function s(){return e=>new n.a(t=>e.subscribe({next:e=>t.next(e),error:e=>t.error(e),complete:()=>{}}))}},2332:function(e,t,a){"use strict";a.d(t,"a",function(){return I});a(36);var n=a(107),s=a(152),r=a(2303),i=a(2333),o=a(2290),c=a(728),d=a(150),u=a(1985),l=a(970),h=a(2287),f=a(714),b=a(1988),p=a(1987),g=a(2014),y=a(2013),m=a(2016),v=a(2017);const w=r.a.child({component:"consensus"}),S=1e3;class I{constructor(e){let{options$:t,node:a}=e;this.mutableQueue=new p.a,this.options$=t.pipe(Object(l.a)(e=>{const t=n.b.stringToPrivateKey(e.privateKey),a=s.a.privateKeyToPublicKey(t);return{privateKey:t,publicKey:a,feeAddress:s.a.publicKeyToScriptHash(a),privateNet:e.privateNet}})),this.node=a,this.mutableConsensusContext=new b.a}start$(){return this.options$.pipe(Object(i.a)(async(e,t)=>{await this.pause(),this.doStart(t)}),Object(o.a)(async()=>{await this.pause()}))}onPersistBlock(){this.mutableQueue.write({type:"handlePersistBlock"})}onConsensusPayloadReceived(e){this.mutableQueue.write({type:"handleConsensusPayload",payload:e})}onTransactionReceived(e){this.mutableQueue.write({type:"handleTransactionReceived",transaction:e})}async runConsensusNow(){if(!(await this.options$.pipe(Object(h.a)(1)).toPromise()).privateNet)throw new Error("Can only force consensus on a private network.");await new Promise((e,t)=>{this.mutableQueue.write({type:"timer",promise:{resolve:e,reject:t}})})}nowSeconds(){return this.mutableConsensusContext.nowSeconds()}async fastForwardOffset(e){if(!(await this.options$.pipe(Object(h.a)(1)).toPromise()).privateNet)throw new Error("Can only fast forward on a private network.");this.mutableConsensusContext.fastForwardOffset(e)}async fastForwardToTime(e){if(!(await this.options$.pipe(Object(h.a)(1)).toPromise()).privateNet)throw new Error("Can only fast forward on a private network.");this.mutableConsensusContext.fastForwardToTime(e)}async pause(){this.clearTimer(),this.mutableQueue.done(),this.mutableQueue=new p.a,void 0!==this.mutableStartPromise&&await this.mutableStartPromise}async reset(){this.mutableConsensusContext=new b.a}async resume(){const e=await this.options$.pipe(Object(h.a)(1)).toPromise();this.doStart(e)}doStart(e){let t=!1;const a=this.start(e).then(()=>{t=!0,this.mutableStartPromise=void 0});t||(this.mutableStartPromise=a)}async start(e){w.debug({title:"neo_consensus_start"},"Consensus started.");const t=await Object(f.g)({blockchain:this.node.blockchain,publicKey:e.publicKey,consensusContext:this.mutableConsensusContext});await d.a.from(this.mutableQueue).pipe(Object(u.a)(async(t,a)=>{let n;switch(a.type){case"handlePersistBlock":n=await Object(y.a)({blockchain:this.node.blockchain,publicKey:e.publicKey,consensusContext:this.mutableConsensusContext});break;case"handleConsensusPayload":n=await Object(g.a)({context:t,node:this.node,privateKey:e.privateKey,payload:a.payload,consensusContext:this.mutableConsensusContext});break;case"handleTransactionReceived":n=await Object(m.a)({context:t,node:this.node,privateKey:e.privateKey,transaction:a.transaction,consensusContext:this.mutableConsensusContext});break;case"timer":n=await Object(v.a)({context:t,node:this.node,options:e,consensusContext:this.mutableConsensusContext}).catch(e=>{throw void 0!==a.promise&&a.promise.reject(e),e}),void 0!==a.promise&&a.promise.resolve();break;default:throw c.a.assertNever(a),new Error("For TS")}return this.handleResult(n)},this.handleResult(t))).forEach(()=>{}),w.debug({title:"neo_consensus_stop"},"Consensus stopped.")}handleResult(e){return void 0!==e.timerSeconds&&this.handleTimer(e.timerSeconds),e.context}handleTimer(e){this.clearTimer(),this.mutableTimer=setTimeout(()=>this.mutableQueue.write({type:"timer"}),e*S)}clearTimer(){void 0!==this.mutableTimer&&(clearTimeout(this.mutableTimer),this.mutableTimer=void 0)}}},2333:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(1989),s=a(1993);const r={type:"empty"};class i extends n.OuterSubscriber{constructor(e,t,a){super(e),this.hasValue=!1,this.hasCompleted=!1,this.lastValue=r,this.active=!1,this.index=0,this.accumulator=t,this.acc=a}notifyNext(e,t){const{destination:a}=this;this.acc=t,this.hasValue=!0,void 0!==a.next&&a.next(t)}notifyComplete(e){const{lastValue:t}=this;this.remove(e),this.active=!1,"value"===t.type?(this.lastValue=r,this.next(t.value)):!this.active&&this.hasCompleted&&(this.hasValue||void 0===this.destination.next||this.destination.next(this.acc),void 0!==this.destination.complete&&this.destination.complete())}_next(e){if(this.active)this.lastValue={type:"value",value:e};else{const{index:t,destination:a}=this;this.index+=1;try{const n=this.accumulator(this.acc,e);this.active=!0,this._innerSub(n,e,t)}catch(e){void 0!==a.error&&a.error(e)}}}_complete(){this.hasCompleted=!0,this.active||"empty"!==this.lastValue.type||(this.hasValue||void 0===this.destination.next||this.destination.next(this.acc),void 0!==this.destination.complete&&this.destination.complete())}_innerSub(e,t,a){this.add(Object(s.subscribeToResult)(this,e,t,a))}}class o{constructor(e,t){this.accumulator=e,this.seed=t}call(e,t){return t.subscribe(new i(e,this.accumulator,this.seed))}}function c(e,t){return a=>a.lift(new o(e,t))}},2334:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(2009);function s(e,t){let{type:a,previousHash:s,blockIndex:r,viewNumber:i,myIndex:o,primaryIndex:c,expectedView:d,validators:u,blockReceivedTimeSeconds:l}=t;return new n.a({type:a,previousHash:void 0===s?e.previousHash:s,blockIndex:void 0===r?e.blockIndex:r,viewNumber:i,myIndex:void 0===o?e.myIndex:o,primaryIndex:c,expectedView:void 0===d?e.expectedView:d,validators:void 0===u?e.validators:u,blockReceivedTimeSeconds:void 0===l?e.blockReceivedTimeSeconds:l})}},2335:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(2012);function s(e){return new n.a({type:e.type,previousHash:e.previousHash,blockIndex:e.blockIndex,viewNumber:e.viewNumber,myIndex:e.myIndex,primaryIndex:e.primaryIndex,expectedView:e.expectedView,validators:e.validators,blockReceivedTimeSeconds:e.blockReceivedTimeSeconds})}},2336:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(885),s=a(2010),r=a(2015);class i extends n.a{constructor(e){let{viewNumber:t,myIndex:a,primaryIndex:n,expectedView:s,validators:r,blockReceivedTimeSeconds:i,transactions:o,signatures:c,header:d}=e;super({type:"backup",viewNumber:t,myIndex:a,primaryIndex:n,expectedView:s,validators:r,blockReceivedTimeSeconds:i,transactions:o,signatures:c,header:d})}clone(e){let{transactions:t}=e;return new i({viewNumber:this.viewNumber,myIndex:this.myIndex,primaryIndex:this.primaryIndex,expectedView:this.expectedView,validators:this.validators,blockReceivedTimeSeconds:this.blockReceivedTimeSeconds,transactions:t,header:{type:"existing",block:this.header,transactionHashes:this.transactionHashes},signatures:this.signatures})}cloneViewChanging(e){let{expectedView:t}=e;return new r.a({previousHash:this.previousHash,blockIndex:this.blockIndex,viewNumber:this.viewNumber,myIndex:this.myIndex,primaryIndex:this.primaryIndex,expectedView:t,validators:this.validators,blockReceivedTimeSeconds:this.blockReceivedTimeSeconds})}cloneSignatureSent(e){let{signatures:t}=e;return new s.a({type:this.type,viewNumber:this.viewNumber,myIndex:this.myIndex,primaryIndex:this.primaryIndex,expectedView:this.expectedView,validators:this.validators,blockReceivedTimeSeconds:this.blockReceivedTimeSeconds,transactions:this.transactions,header:{type:"existing",block:this.header,transactionHashes:this.transactionHashes},signatures:t})}cloneExpectedView(e){let{expectedView:t}=e;return new i({viewNumber:this.viewNumber,myIndex:this.myIndex,primaryIndex:this.primaryIndex,expectedView:t,validators:this.validators,blockReceivedTimeSeconds:this.blockReceivedTimeSeconds,transactions:this.transactions,signatures:this.signatures,header:{type:"existing",block:this.header,transactionHashes:this.transactionHashes}})}cloneSignatures(e){let{signatures:t}=e;return new i({viewNumber:this.viewNumber,myIndex:this.myIndex,primaryIndex:this.primaryIndex,expectedView:this.expectedView,validators:this.validators,blockReceivedTimeSeconds:this.blockReceivedTimeSeconds,transactions:this.transactions,signatures:t,header:{type:"existing",block:this.header,transactionHashes:this.transactionHashes}})}}},2337:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return H});a(36),a(94),a(85);var n=a(199),s=a(152),r=a(107),i=a(125),o=a(2303),c=a(1407),d=a(2294),u=a(106),l=a(1402),h=a(1886),f=a(90),b=a(845),p=a(846),g=a(183),y=a(351),m=a(2286),v=a(2287),w=a(2338),S=a(2304),I=a(2283);const T=o.a.child({component:"rpc-handler"});class x{constructor(e,t){this.code=e,this.message=t}}const E={getaccountstate:"getaccountstate",getassetstate:"getassetstate",getbestblockhash:"getbestblockhash",getblock:"getblock",getblockcount:"getblockcount",getblockhash:"getblockhash",getblocksysfee:"getblocksysfee",getconnectioncount:"getconnectioncount",getcontractstate:"getcontractstate",getrawmempool:"getrawmempool",getrawtransaction:"getrawtransaction",getstorage:"getstorage",gettxout:"gettxout",invoke:"invoke",invokefunction:"invokefunction",invokescript:"invokescript",sendrawtransaction:"sendrawtransaction",submitblock:"submitblock",validateaddress:"validateaddress",getpeers:"getpeers",relaytransaction:"relaytransaction",getoutput:"getoutput",getclaimamount:"getclaimamount",getallstorage:"getallstorage",testinvocation:"testinvocation",gettransactionreceipt:"gettransactionreceipt",getinvocationdata:"getinvocationdata",getvalidators:"getvalidators",getnetworksettings:"getnetworksettings",runconsensusnow:"runconsensusnow",updatesettings:"updatesettings",getsettings:"getsettings",fastforwardoffset:"fastforwardoffset",fastforwardtotime:"fastforwardtotime",reset:"reset",UNKNOWN:"UNKNOWN",INVALID:"INVALID"},k=Object(b.b)(b.a.RPC_METHOD),B=p.a.createMeasureDouble("request/duration",g.b.MS),A=p.a.createMeasureInt64("request/failures",g.b.UNIT),O=p.a.createView("jsonrpc_server_single_request_duration_ms",B,g.a.DISTRIBUTION,[k],"distribution of request durations",[5,10,25,50,100,250,500,1e3,2500,5e3,1e4]);p.a.registerView(O);const N=p.a.createView("jsonrpc_server_single_request_failures_total",A,g.a.COUNT,[k],"total number of request errors");p.a.registerView(N);const U=e=>{const t=async t=>{const a=Date.now();let n={},s=E.UNKNOWN;try{let r;try{r=(e=>{if(void 0!==e&&"object"==typeof e&&"2.0"===e.jsonrpc&&void 0!==e.method&&"string"==typeof e.method&&(void 0===e.params||Array.isArray(e.params)||"object"==typeof e.params)&&(void 0===e.id||"string"==typeof e.id||"number"==typeof e.id))return e;throw new x(-32600,"Invalid Request")})(t)}finally{void 0!==r?({method:s}=r):"object"==typeof t&&({method:s}=t),void 0===E[s]&&(s=E.INVALID),n={[b.a.RPC_METHOD]:s}}const i=e[r.method];if(void 0===i)throw new x(-32601,"Method not found");const{params:o}=r;let c;c=void 0===o?[]:Array.isArray(o)?o:[o];const d=await i(c);return T.debug(Object.assign({title:"jsonrpc_server_single_request"},n)),p.a.record([{measure:B,value:Date.now()-a}]),{jsonrpc:"2.0",result:d,id:void 0===r.id?void 0:r.id}}catch(e){T.error(Object.assign({title:"jsonrpc_server_single_request"},n,{error:e.message}));const t=new y.a;throw t.set(k,{value:s}),p.a.record([{measure:A,value:1}],t),e}},a=async(e,a)=>{try{let n;try{n=await(async e=>Array.isArray(e)?Promise.all(e.map(async e=>t(e))):t(e))(a),T.debug(Object.assign({title:"jsonrpc_server_request"},e))}catch(t){throw T.error(Object.assign({title:"jsonrpc_server_request"},e,{error:t})),t}return n}catch(e){let t={code:-32603,message:void 0===e.message?"Internal error":e.message};return void 0!==e.code&&void 0!==e.message&&"number"==typeof e.code&&"string"==typeof e.message&&(t={code:e.code,message:e.message}),{jsonrpc:"2.0",error:t,id:void 0}}};return async e=>a({[b.a.RPC_TYPE]:"jsonrpc"},e)},C=e=>({blockIndex:e.startHeight,blockHash:n.a.writeUInt256(e.blockHash),transactionIndex:e.index,globalIndex:n.a.writeUInt64(e.globalIndex)}),H=t=>{let{blockchain:a,node:o}=t;const b=e=>{if(e<0||e>a.currentBlockIndex)throw new x(-100,"Invalid Height")};return U({[E.getaccountstate]:async e=>{const t=s.a.addressToScriptHash({addressVersion:a.settings.addressVersion,address:e[0]});let n=await a.account.tryGet({hash:t});return void 0===n&&(n=new c.a({hash:t})),n.serializeJSON(a.serializeJSONContext)},[E.getassetstate]:async e=>{const t=await a.asset.tryGet({hash:n.a.readUInt256(e[0])});if(void 0===t)throw new x(-100,"Unknown asset");return t.serializeJSON(a.serializeJSONContext)},[E.getbestblockhash]:async()=>n.a.writeUInt256(a.currentBlock.hash),[E.getblock]:async e=>{let t,s=e[0];"string"==typeof e[0]&&(s=n.a.readUInt256(e[0])),void 0!==e[1]&&"number"==typeof e[1]&&1!==e[1]?t=e[1]:void 0!==e[2]&&"number"==typeof e[2]&&(t=e[2]);let r=await a.block.tryGet({hashOrIndex:s});if(void 0===r){if(void 0===t)throw new x(-100,"Unknown block");try{r=await a.block$.pipe(Object(m.a)(t=>t.hashHex===e[0]||t.index===e[0]),Object(v.a)(1),Object(w.a)(new Date(Date.now()+t))).toPromise()}catch(e){throw new x(-100,"Unknown block")}}return!0===e[1]||1===e[1]?r.serializeJSON(a.serializeJSONContext):r.serializeWire().toString("hex")},[E.getblockcount]:async()=>a.currentBlockIndex+1,[E.getblockhash]:async e=>{const t=e[0];b(t);const s=await a.block.get({hashOrIndex:t});return n.a.writeUInt256(s.hash)},[E.getblocksysfee]:async e=>{const t=e[0];b(t);const n=await a.header.get({hashOrIndex:t});return(await a.blockData.get({hash:n.hash})).systemFee.toString(10)},[E.getconnectioncount]:async()=>o.connectedPeers.length,[E.getcontractstate]:async e=>{const t=n.a.readUInt160(e[0]),s=await a.contract.tryGet({hash:t});if(void 0===s)throw new x(-100,"Unknown contract");return s.serializeJSON(a.serializeJSONContext)},[E.getrawmempool]:async()=>Object.values(o.memPool).map(e=>n.a.writeUInt256(e.hash)),[E.getrawtransaction]:async e=>{const t=n.a.readUInt256(e[0]);let s=o.memPool[r.b.uInt256ToHex(t)];if(void 0===s&&(s=await a.transaction.tryGet({hash:t})),void 0===s)throw new x(-100,"Unknown transaction");return!0===e[1]||1===e[1]?s.serializeJSON(a.serializeJSONContext):s.serializeWire().toString("hex")},[E.getstorage]:async t=>{const s=n.a.readUInt160(t[0]),r=e.from(t[1],"hex"),i=await a.storageItem.tryGet({hash:s,key:r});return void 0===i?void 0:i.value.toString("hex")},[E.gettxout]:async e=>{const t=n.a.readUInt256(e[0]),s=e[1],[r,i]=await Promise.all([a.output.tryGet({hash:t,index:s}),a.transactionData.tryGet({hash:t})]);if(void 0===i||void 0===i.endHeights[s])return void 0===r?void 0:r.serializeJSON(a.serializeJSONContext,s)},[E.invoke]:async()=>{throw new x(-101,"Not implemented")},[E.invokefunction]:async()=>{throw new x(-101,"Not implemented")},[E.invokescript]:async e=>{const t=n.a.readBuffer(e[0]),s=await a.invokeScript(t);return{result:s.result.serializeJSON(a.serializeJSONContext),actions:s.actions.map(e=>e.serializeJSON(a.serializeJSONContext))}},[E.sendrawtransaction]:async e=>{const t=Object(d.a)({context:a.deserializeWireContext,buffer:n.a.readBuffer(e[0])});try{return await o.relayTransaction(t,{throwVerifyError:!0,forceAdd:!0}),!0}catch(e){return!1}},[E.submitblock]:async()=>{throw new x(-101,"Not implemented")},[E.validateaddress]:async e=>{let t;try{t=s.a.addressToScriptHash({addressVersion:a.settings.addressVersion,address:e[0]})}catch(e){}return{address:e[0],isvalid:void 0!==t}},[E.getpeers]:async()=>({connected:o.connectedPeers.map(e=>{const{host:t,port:a}=Object(u.getEndpointConfig)(e);return{address:t,port:a}})}),[E.relaytransaction]:async e=>{const t=Object(d.a)({context:a.deserializeWireContext,buffer:n.a.readBuffer(e[0])});try{const[e,s]=await Promise.all([t.serializeJSON(a.serializeJSONContext),o.relayTransaction(t,{forceAdd:!0,throwVerifyError:!0})]),r=void 0===s.verifyResult?{}:{verifyResult:{verifications:s.verifyResult.verifications.map(e=>({hash:n.a.writeUInt160(e.hash),witness:e.witness.serializeJSON(a.serializeJSONContext),actions:e.actions.map(e=>e.serializeJSON(a.serializeJSONContext)),failureMessage:e.failureMessage}))}};return Object.assign({},r,{transaction:e})}catch(e){throw new x(-110,"Relay transaction failed: ".concat(e.message))}},[E.getoutput]:async e=>{const t=n.a.readUInt256(e[0]),s=e[1],r=await a.output.tryGet({hash:t,index:s});if(void 0===r)throw new x(-100,"Unknown output");return r.serializeJSON(a.serializeJSONContext,s)},[E.getclaimamount]:async e=>{const t=n.a.readUInt256(e[0]),s=e[1];try{const e=await a.calculateClaimAmount([new l.a({hash:t,index:s})]);return r.b.fixed8ToDecimal(e).toString()}catch(e){throw new x(-102,e.message)}},[E.getallstorage]:async e=>{const t=n.a.readUInt160(e[0]);return(await a.storageItem.getAll$({hash:t}).pipe(Object(S.a)()).toPromise()).map(e=>e.serializeJSON(a.serializeJSONContext))},[E.testinvocation]:async e=>{const t=Object(d.a)({context:a.deserializeWireContext,buffer:n.a.readBuffer(e[0])});if(t instanceof h.a){const e=await a.invokeTransaction(t);return{result:e.result.serializeJSON(a.serializeJSONContext),actions:e.actions.map(e=>e.serializeJSON(a.serializeJSONContext))}}throw new x(-103,"Invalid InvocationTransaction")},[E.gettransactionreceipt]:async e=>{const t=await a.transactionData.tryGet({hash:n.a.readUInt256(e[0])});let s,r;if(void 0!==e[1]&&"number"==typeof e[1]&&(s=e[1]),void 0===t){if(void 0===s)throw new x(-100,"Unknown transaction");try{r=await a.block$.pipe(Object(I.a)(async()=>{const t=await a.transactionData.tryGet({hash:n.a.readUInt256(e[0])});return void 0===t?void 0:C(t)}),Object(m.a)(e=>void 0!==e),Object(v.a)(1),Object(w.a)(new Date(Date.now()+s))).toPromise()}catch(e){throw new x(-100,"Unknown transaction")}}else r=C(t);return r},[E.getinvocationdata]:async e=>{const t=await a.transaction.get({hash:n.a.readUInt256(e[0])}),s=await t.serializeJSON(a.serializeJSONContext);if("InvocationTransaction"!==s.type||void 0===s.invocationData)throw new x(-103,"Invalid InvocationTransaction");return s.invocationData},[E.getvalidators]:async()=>{return(await a.validator.all$.pipe(Object(S.a)()).toPromise()).map(e=>e.serializeJSON(a.serializeJSONContext))},[E.getnetworksettings]:async()=>{const e=a.settings.fees[f.TransactionTypeModel.Issue];return{issueGASFee:r.b.fixed8ToDecimal(void 0===e?i.a.ZERO:e).toString()}},[E.runconsensusnow]:async()=>{if(!o.consensus)throw new Error("This node does not support triggering consensus.");return await o.consensus.runConsensusNow(),!0},[E.updatesettings]:async e=>{const{settings:t}=a,n=Object.assign({},t,{secondsPerBlock:e[0].secondsPerBlock});return a.updateSettings(n),!0},[E.getsettings]:async()=>({secondsPerBlock:a.settings.secondsPerBlock}),[E.fastforwardoffset]:async e=>{if(!o.consensus)throw new Error("This node does not support fast forwarding.");return await o.consensus.fastForwardOffset(e[0]),!0},[E.fastforwardtotime]:async e=>{if(void 0===o.consensus)throw new Error("This node does not support fast forwarding.");return await o.consensus.fastForwardToTime(e[0]),!0},[E.reset]:async()=>(void 0!==o.consensus&&(await o.consensus.pause(),await o.consensus.reset()),await o.reset(),await a.reset(),void 0!==o.consensus&&await o.consensus.resume(),!0)})}}).call(this,a(92).Buffer)},234:function(e,t,a){"use strict";var n=a(235);a.o(n,"AttributeUsageModel")&&a.d(t,"AttributeUsageModel",function(){return n.AttributeUsageModel}),a.o(n,"BufferAttributeModel")&&a.d(t,"BufferAttributeModel",function(){return n.BufferAttributeModel}),a.o(n,"Byte")&&a.d(t,"Byte",function(){return n.Byte}),a.o(n,"ByteBuffer")&&a.d(t,"ByteBuffer",function(){return n.ByteBuffer}),a.o(n,"ClaimTransactionModel")&&a.d(t,"ClaimTransactionModel",function(){return n.ClaimTransactionModel}),a.o(n,"ECPointAttributeModel")&&a.d(t,"ECPointAttributeModel",function(){return n.ECPointAttributeModel}),a.o(n,"InputModel")&&a.d(t,"InputModel",function(){return n.InputModel}),a.o(n,"InvocationTransactionModel")&&a.d(t,"InvocationTransactionModel",function(){return n.InvocationTransactionModel}),a.o(n,"MAX_TRANSACTION_ATTRIBUTES")&&a.d(t,"MAX_TRANSACTION_ATTRIBUTES",function(){return n.MAX_TRANSACTION_ATTRIBUTES}),a.o(n,"Op")&&a.d(t,"Op",function(){return n.Op}),a.o(n,"OutputModel")&&a.d(t,"OutputModel",function(){return n.OutputModel}),a.o(n,"TransactionBaseModel")&&a.d(t,"TransactionBaseModel",function(){return n.TransactionBaseModel}),a.o(n,"TransactionTypeModel")&&a.d(t,"TransactionTypeModel",function(){return n.TransactionTypeModel}),a.o(n,"UInt160AttributeModel")&&a.d(t,"UInt160AttributeModel",function(){return n.UInt160AttributeModel}),a.o(n,"UInt256AttributeModel")&&a.d(t,"UInt256AttributeModel",function(){return n.UInt256AttributeModel}),a.o(n,"VMState")&&a.d(t,"VMState",function(){return n.VMState}),a.o(n,"assertAttributeUsage")&&a.d(t,"assertAttributeUsage",function(){return n.assertAttributeUsage}),a.o(n,"assertAttributeUsageJSON")&&a.d(t,"assertAttributeUsageJSON",function(){return n.assertAttributeUsageJSON}),a.o(n,"assertSysCall")&&a.d(t,"assertSysCall",function(){return n.assertSysCall}),a.o(n,"assertTransactionType")&&a.d(t,"assertTransactionType",function(){return n.assertTransactionType}),a.o(n,"assertVMState")&&a.d(t,"assertVMState",function(){return n.assertVMState}),a.o(n,"isByteCode")&&a.d(t,"isByteCode",function(){return n.isByteCode}),a.o(n,"toAttributeUsage")&&a.d(t,"toAttributeUsage",function(){return n.toAttributeUsage}),a.o(n,"toJSONAttributeUsage")&&a.d(t,"toJSONAttributeUsage",function(){return n.toJSONAttributeUsage}),a.o(n,"toSysCallHash")&&a.d(t,"toSysCallHash",function(){return n.toSysCallHash});var s=a(241);a.d(t,"ClaimTransactionModel",function(){return s.a});var r=a(242);a.d(t,"InputModel",function(){return r.a});var i=a(243);a.d(t,"InvocationTransactionModel",function(){return i.a});var o=a(244);a.d(t,"OutputModel",function(){return o.a});var c=a(160);a.d(t,"MAX_TRANSACTION_ATTRIBUTES",function(){return c.a}),a.d(t,"TransactionBaseModel",function(){return c.b});var d=a(245);a.o(d,"AttributeUsageModel")&&a.d(t,"AttributeUsageModel",function(){return d.AttributeUsageModel}),a.o(d,"BufferAttributeModel")&&a.d(t,"BufferAttributeModel",function(){return d.BufferAttributeModel}),a.o(d,"Byte")&&a.d(t,"Byte",function(){return d.Byte}),a.o(d,"ByteBuffer")&&a.d(t,"ByteBuffer",function(){return d.ByteBuffer}),a.o(d,"ECPointAttributeModel")&&a.d(t,"ECPointAttributeModel",function(){return d.ECPointAttributeModel}),a.o(d,"Op")&&a.d(t,"Op",function(){return d.Op}),a.o(d,"TransactionTypeModel")&&a.d(t,"TransactionTypeModel",function(){return d.TransactionTypeModel}),a.o(d,"UInt160AttributeModel")&&a.d(t,"UInt160AttributeModel",function(){return d.UInt160AttributeModel}),a.o(d,"UInt256AttributeModel")&&a.d(t,"UInt256AttributeModel",function(){return d.UInt256AttributeModel}),a.o(d,"VMState")&&a.d(t,"VMState",function(){return d.VMState}),a.o(d,"assertAttributeUsage")&&a.d(t,"assertAttributeUsage",function(){return d.assertAttributeUsage}),a.o(d,"assertAttributeUsageJSON")&&a.d(t,"assertAttributeUsageJSON",function(){return d.assertAttributeUsageJSON}),a.o(d,"assertSysCall")&&a.d(t,"assertSysCall",function(){return d.assertSysCall}),a.o(d,"assertTransactionType")&&a.d(t,"assertTransactionType",function(){return d.assertTransactionType}),a.o(d,"assertVMState")&&a.d(t,"assertVMState",function(){return d.assertVMState}),a.o(d,"isByteCode")&&a.d(t,"isByteCode",function(){return d.isByteCode}),a.o(d,"toAttributeUsage")&&a.d(t,"toAttributeUsage",function(){return d.toAttributeUsage}),a.o(d,"toJSONAttributeUsage")&&a.d(t,"toJSONAttributeUsage",function(){return d.toJSONAttributeUsage}),a.o(d,"toSysCallHash")&&a.d(t,"toSysCallHash",function(){return d.toSysCallHash});var u=a(161);a.d(t,"TransactionTypeModel",function(){return u.a}),a.d(t,"assertTransactionType",function(){return u.b})},235:function(e,t,a){"use strict";var n=a(236);a.o(n,"AttributeUsageModel")&&a.d(t,"AttributeUsageModel",function(){return n.AttributeUsageModel}),a.o(n,"BufferAttributeModel")&&a.d(t,"BufferAttributeModel",function(){return n.BufferAttributeModel}),a.o(n,"Byte")&&a.d(t,"Byte",function(){return n.Byte}),a.o(n,"ByteBuffer")&&a.d(t,"ByteBuffer",function(){return n.ByteBuffer}),a.o(n,"ClaimTransactionModel")&&a.d(t,"ClaimTransactionModel",function(){return n.ClaimTransactionModel}),a.o(n,"ECPointAttributeModel")&&a.d(t,"ECPointAttributeModel",function(){return n.ECPointAttributeModel}),a.o(n,"InputModel")&&a.d(t,"InputModel",function(){return n.InputModel}),a.o(n,"InvocationTransactionModel")&&a.d(t,"InvocationTransactionModel",function(){return n.InvocationTransactionModel}),a.o(n,"MAX_TRANSACTION_ATTRIBUTES")&&a.d(t,"MAX_TRANSACTION_ATTRIBUTES",function(){return n.MAX_TRANSACTION_ATTRIBUTES}),a.o(n,"Op")&&a.d(t,"Op",function(){return n.Op}),a.o(n,"OutputModel")&&a.d(t,"OutputModel",function(){return n.OutputModel}),a.o(n,"TransactionBaseModel")&&a.d(t,"TransactionBaseModel",function(){return n.TransactionBaseModel}),a.o(n,"TransactionTypeModel")&&a.d(t,"TransactionTypeModel",function(){return n.TransactionTypeModel}),a.o(n,"UInt160AttributeModel")&&a.d(t,"UInt160AttributeModel",function(){return n.UInt160AttributeModel}),a.o(n,"UInt256AttributeModel")&&a.d(t,"UInt256AttributeModel",function(){return n.UInt256AttributeModel}),a.o(n,"VMState")&&a.d(t,"VMState",function(){return n.VMState}),a.o(n,"assertAttributeUsage")&&a.d(t,"assertAttributeUsage",function(){return n.assertAttributeUsage}),a.o(n,"assertAttributeUsageJSON")&&a.d(t,"assertAttributeUsageJSON",function(){return n.assertAttributeUsageJSON}),a.o(n,"assertSysCall")&&a.d(t,"assertSysCall",function(){return n.assertSysCall}),a.o(n,"assertTransactionType")&&a.d(t,"assertTransactionType",function(){return n.assertTransactionType}),a.o(n,"assertVMState")&&a.d(t,"assertVMState",function(){return n.assertVMState}),a.o(n,"isByteCode")&&a.d(t,"isByteCode",function(){return n.isByteCode}),a.o(n,"toAttributeUsage")&&a.d(t,"toAttributeUsage",function(){return n.toAttributeUsage}),a.o(n,"toJSONAttributeUsage")&&a.d(t,"toJSONAttributeUsage",function(){return n.toJSONAttributeUsage}),a.o(n,"toSysCallHash")&&a.d(t,"toSysCallHash",function(){return n.toSysCallHash});var s=a(189);a.d(t,"AttributeUsageModel",function(){return s.a}),a.d(t,"assertAttributeUsage",function(){return s.b}),a.d(t,"assertAttributeUsageJSON",function(){return s.c}),a.d(t,"toAttributeUsage",function(){return s.d}),a.d(t,"toJSONAttributeUsage",function(){return s.e});var r=a(237);a.d(t,"BufferAttributeModel",function(){return r.a});var i=a(238);a.d(t,"ECPointAttributeModel",function(){return i.a});var o=a(239);a.d(t,"UInt160AttributeModel",function(){return o.a});var c=a(240);a.d(t,"UInt256AttributeModel",function(){return c.a})},236:function(e,t){},237:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(134),s=a(189);class r extends n.a{constructor(e){let{usage:t,value:a}=e;super(),this.usage=t,this.value=a}serializeWireBase(e){super.serializeWireBase(e),this.usage===s.a.DescriptionUrl?(e.writeUInt8(this.value.length),e.writeBytes(this.value)):e.writeVarBytesLE(this.value)}}},238:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(107),s=a(134);class r extends s.a{constructor(e){let{usage:t,value:a}=e;super(),this.usage=t,this.value=a}serializeWireBase(e){super.serializeWireBase(e),e.writeBytes(n.b.ecPointToBuffer(this.value).slice(1))}}},239:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(134);class s extends n.a{constructor(e){let{usage:t,value:a}=e;super(),this.usage=t,this.value=a}serializeWireBase(e){super.serializeWireBase(e),e.writeUInt160(this.value)}}},240:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(134);class s extends n.a{constructor(e){let{usage:t,value:a}=e;super(),this.usage=t,this.value=a}serializeWireBase(e){super.serializeWireBase(e),e.writeUInt256(this.value)}}},241:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(107),s=a(160),r=a(161);class i extends s.b{constructor(e){let{version:t,attributes:a,inputs:s,outputs:i,scripts:o,hash:c,claims:d}=e;if(super({version:t,type:r.a.Claim,attributes:a,inputs:s,outputs:i,scripts:o,hash:c}),this.claims=d,0!==this.version)throw new n.a("expected version 0, found: ".concat(this.version));if(0===this.claims.length)throw new n.a("expected claims, found none.")}clone(e){let{scripts:t=this.scripts,attributes:a=this.attributes,inputs:n=this.inputs,outputs:s=this.outputs}=e;return new this.constructor({version:this.version,attributes:a,inputs:n,outputs:s,scripts:t,claims:this.claims})}serializeExclusiveBase(e){e.writeArray(this.claims,t=>{t.serializeWireBase(e)})}}},242:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(107),s=a(162),r=a(127);const i=s.a.sizeOfUInt256+s.a.sizeOfUInt16LE;class o{constructor(e){let{hash:t,index:a}=e;this.size=i,this.serializeWire=Object(r.a)(this.serializeWireBase.bind(this)),this.hash=t,this.hashHex=n.b.uInt256ToHex(t),this.index=a}serializeWireBase(e){e.writeUInt256(this.hash),e.writeUInt16LE(this.index)}}o.size=i},243:function(e,t,a){"use strict";a.d(t,"a",function(){return o});a(94);var n=a(107),s=a(125),r=a(160),i=a(161);class o extends r.b{constructor(e){let{version:t,attributes:a,inputs:r,outputs:o,scripts:c,hash:d,gas:u,script:l}=e;if(super({version:t,type:i.a.Invocation,attributes:a,inputs:r,outputs:o,scripts:c,hash:d}),this.gas=u,this.script=l,this.version>1)throw new n.a("expected version <= 1, found: ".concat(this.version));if(0===this.script.length)throw new n.a("expected script");if(this.gas.lt(s.a.ZERO))throw new n.a("expected valid gas, found: ".concat(this.gas.toString()))}clone(e){let{scripts:t=this.scripts,attributes:a=this.attributes,inputs:n=this.inputs,outputs:s=this.outputs}=e;return new this.constructor({version:this.version,attributes:a,inputs:n,outputs:s,scripts:t,gas:this.gas,script:this.script})}serializeExclusiveBase(e){e.writeVarBytesLE(this.script),this.version>=1&&e.writeFixed8(this.gas)}}o.VERSION=1},244:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(162),s=a(127);const r=n.a.sizeOfUInt256+n.a.sizeOfFixed8+n.a.sizeOfUInt160;class i{constructor(e){let{asset:t,value:a,address:n}=e;this.size=r,this.serializeWire=Object(s.a)(this.serializeWireBase.bind(this)),this.asset=t,this.value=a,this.address=n}clone(e){let{value:t=this.value}=e;return new i({asset:this.asset,value:t,address:this.address})}serializeWireBase(e){e.writeUInt256(this.asset),e.writeFixed8(this.value),e.writeUInt160(this.address)}}i.size=r},245:function(e,t){},246:function(e,t){},247:function(e,t){},251:function(e,t,a){"use strict";a.d(t,"a",function(){return i});a(85);var n=a(252),s=a(207),r=a(128);class i extends n.a{constructor(){super(...arguments),this.referenceID=Object(s.a)()}toStructuralKey(){return"".concat(this.referenceID)}equals(e){return this===e}}i.type=r.a.Array},252:function(e,t,a){"use strict";a.d(t,"a",function(){return o});a(85);var n=a(159),s=a(766),r=a(140),i=a(129);class o extends i.a{constructor(e){super(),this.value=e}isArray(){return!0}asArray(){return this.value}asBoolean(){return!0}asBuffer(){throw new r.m}toContractParameter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;if(e.has(this))throw new r.a;const t=new Set([...e]);return t.add(this),new s.a(this.value.map(e=>e.toContractParameter(t)))}get size(){return this.value.length}incrementInternal(e){return this.incrementInternalArray(this.value,e)}decrementInternal(e){return this.decrementInternalArray(this.value,e)}convertJSONInternal(e){return this.value.map(t=>t.convertJSON(e))}serializeInternal(e){const t=new n.a;return t.writeUInt8(this.constructor.type),t.writeVarUIntLE(this.value.length),this.value.forEach(a=>{t.writeBytes(a.serialize(e))}),t.toBuffer()}}},254:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return r});a(94);var n=a(831);const s=Object(n.a)("INVALID_CONTRACT_PROPERTY_STATE",e=>"Expected contract parameter type, found: ".concat(e.toString(16))),r=Object(n.a)("INVALID_VERSION",(e,t)=>"Expected version to be ".concat(e,", found: ").concat(t))},288:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(112);class s{constructor(){this.handleResponse=e=>{if(void 0!==e.error){if(-100===e.error.code&&"Unknown block"===e.error.message)throw new n.D;throw new n.p(e.error)}return e.result}}}},293:function(e,t,a){"use strict";a.d(t,"a",function(){return k});a(36),a(85);var n=a(216),s=a.n(n),r=a(280),i=a.n(r),o=a(1400),c=a.n(o),d=a(107),u=a(162),l=a(90),h=a(199),f=a(728),b=a(1878),p=a(184),g=a(710),y=a(859),m=a(860),v=a(709),w=a(1873),S=a(2292),I=a(1403),T=a(1402),x=a(1877);const E=e=>{let{outputs:t,utilityToken:a}=e;return t.filter(e=>d.b.uInt256Equal(e.asset,a.hash)).reduce((e,t)=>e.add(t.value),y.a.ZERO)};function k(e){class t extends e{constructor(){super(...arguments),this.equals=y.a.equals(this.constructor,this,e=>d.b.uInt256Equal(this.hash,e.hash)),this.toKeyString=y.a.toKeyString(k,()=>this.hashHex),this.getSortedScriptHashesForVerifying=y.a.lazyAsync(async e=>{return[...await this.getScriptHashesForVerifying(e)].sort()}),this.sizeInternal=y.a.lazy(()=>u.a.sizeOfUInt8+u.a.sizeOfArray(this.attributes,e=>e.size)+u.a.sizeOfArray(this.inputs,e=>e.size)+u.a.sizeOfArray(this.outputs,e=>e.size)+u.a.sizeOfArray(this.scripts,e=>e.size)+this.sizeExclusive()),this.networkFee=y.a.lazyAsync(async e=>{const{getOutput:t,utilityToken:a}=e,n=await Promise.all(this.inputs.map(t)),s=E({outputs:n,utilityToken:a}),r=E({outputs:this.outputs,utilityToken:a}),i=s.sub(r).sub(this.getSystemFee(e));return i.lt(y.a.ZERO)?y.a.ZERO:i}),this.getReferencesInternal=y.a.lazyAsync(async e=>{let{getOutput:t}=e;return Promise.all(this.inputs.map(async e=>t(e)))}),this.getTransactionResultsInternal=y.a.lazyAsync(async e=>{let{getOutput:t}=e;const a=await this.getReferences({getOutput:t}),n={},s=(e,t)=>{e.forEach(e=>{const a=d.b.uInt256ToHex(e.asset);let s=n[a];void 0===s&&(n[a]=s=y.a.ZERO),n[a]=s.add(!0===t?e.value.neg():e.value)})};return s(a),s(this.outputs,!0),c()(n,e=>void 0!==e&&!e.eq(y.a.ZERO))}),this.baseGetScriptHashesForVerifyingInternal=y.a.lazyAsync(async e=>{let{getOutput:t,getAsset:a}=e;const[n,s]=await Promise.all([Promise.all(this.inputs.map(async e=>{const a=await t(e);return d.b.uInt160ToHex(a.address)})),Promise.all(this.outputs.map(async e=>{const t=await a({hash:e.asset});if(Object(l.hasFlag)(t.type,l.AssetTypeModel.DutyFlag))return d.b.uInt160ToHex(e.address)})).then(e=>e.filter(f.a.notNull))]),r=this.attributes.map(e=>e instanceof w.a&&e.usage===l.AttributeUsageModel.Script?d.b.uInt160ToHex(e.value):void 0).filter(f.a.notNull);return new Set([...n,...s,...r])}),this.sizeExclusive=()=>0}static deserializeTransactionBaseStartWireBase(e){let{reader:t}=e;return{type:Object(l.assertTransactionType)(t.readUInt8()),version:t.readUInt8()}}static deserializeTransactionBaseEndWireBase(e){const{reader:t}=e;return{attributes:t.readArray(()=>Object(S.a)(e),l.MAX_TRANSACTION_ATTRIBUTES),inputs:t.readArray(()=>T.a.deserializeWireBase(e)),outputs:t.readArray(()=>x.a.deserializeWireBase(e),y.a.USHORT_MAX_NUMBER+1),scripts:t.readArray(()=>v.a.deserializeWireBase(e))}}static deserializeWireBase(e){throw new Error("Not Implemented")}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new m.a(e.buffer)})}get size(){return this.sizeInternal()}async serializeTransactionBaseJSON(e){const[t,a]=await Promise.all([this.getNetworkFee(e.feeContext),e.tryGetTransactionData(this)]);return{txid:d.b.uInt256ToString(this.hashHex),size:this.size,version:this.version,attributes:this.attributes.map(t=>t.serializeJSON(e)),vin:this.inputs.map(t=>t.serializeJSON(e)),vout:this.outputs.map((t,a)=>t.serializeJSON(e,a)),scripts:this.scripts.map(t=>t.serializeJSON(e)),sys_fee:h.a.writeFixed8(this.getSystemFee(e.feeContext)),net_fee:h.a.writeFixed8(t),data:void 0===a?void 0:{blockHash:d.b.uInt256ToString(a.blockHash),blockIndex:a.startHeight,transactionIndex:a.index,globalIndex:h.a.writeUInt64(a.globalIndex)}}}async serializeJSON(e){throw new Error("Not Implemented")}async getNetworkFee(e){return this.networkFee(e)}getSystemFee(e){let{fees:t}=e;const a=t[this.type];return void 0===a?y.a.ZERO:a}async getReferences(e){return this.getReferencesInternal(e)}async getTransactionResults(e){return this.getTransactionResultsInternal(e)}async getScriptHashesForVerifying(e){return this.baseGetScriptHashesForVerifyingInternal(e)}async verify(e){if(this.size>b.a)throw new p.f("Transaction too large.");const{memPool:t=[]}=e;if(Object(I.a)(this.inputs))throw new p.f("Duplicate inputs");if(t.some(e=>!e.equals(this)&&Object(I.b)(e.inputs,this.inputs)))throw new p.f("Input already exists in mempool");if(this.attributes.filter(e=>e.usage===l.AttributeUsageModel.ECDH02||e.usage===l.AttributeUsageModel.ECDH03).length>1)throw new p.f("Too many ECDH attributes.");const[a]=await Promise.all([this.verifyScripts(e),this.verifyDoubleSpend(e),this.verifyOutputs(e),this.verifyTransactionResults(e)]);return a}async verifyDoubleSpend(e){let{isSpent:t}=e;if((await Promise.all(this.inputs.map(t))).some(e=>e))throw new p.f("Transaction is a double spend")}async verifyOutputs(e){let{getAsset:t,currentHeight:a}=e;const n=Object.entries(i()(this.outputs,e=>d.b.uInt256ToHex(e.asset)));if((await Promise.all(n.map(async e=>{let[n,s]=e;const r=await t({hash:d.b.hexToUInt256(n)});return r.expiration<=a+1&&r.type!==l.AssetTypeModel.GoverningToken&&r.type!==l.AssetTypeModel.UtilityToken||s.some(e=>!e.value.mod(y.a.TEN.pow(y.a.EIGHT.subn(r.precision))).eq(y.a.ZERO))}))).some(e=>e))throw new p.f("Transaction has invalid output")}async verifyTransactionResults(e){let{getOutput:t,utilityToken:a,governingToken:n,fees:s,registerValidatorFee:r}=e;const i=await this.getTransactionResults({getOutput:t}),o=Object.entries(i).filter(e=>{let[t,a]=e;return a.gt(y.a.ZERO)});if(o.length>1||1===o.length&&!d.b.uInt256Equal(d.b.hexToUInt256(o[0][0]),a.hash))throw new p.f("Invalid destroyed output.");const c={getOutput:t,governingToken:n,utilityToken:a,fees:s,registerValidatorFee:r},u=this.getSystemFee(c);if(u.gt(y.a.ZERO)&&(0===o.length||o[0][1].lt(u)))throw new p.f("Not enough output value for system fee.");const h=Object.entries(i).filter(e=>{let[t,a]=e;return a.lt(y.a.ZERO)});switch(this.type){case l.TransactionTypeModel.Miner:case l.TransactionTypeModel.Claim:if(h.some(e=>{let[t]=e;return!d.b.uInt256Equal(d.b.hexToUInt256(t),a.hash)}))throw new p.f("Invalid miner/claim result");break;case l.TransactionTypeModel.Issue:if(h.some(e=>{let[t,n]=e;return d.b.uInt256Equal(d.b.hexToUInt256(t),a.hash)}))throw new p.f("Invalid issue result");break;default:if(h.length>0)throw new p.f("Invalid results.")}}async verifyScripts(e){let{getAsset:t,getOutput:a,verifyScript:n}=e;const r=await this.getSortedScriptHashesForVerifying({getAsset:t,getOutput:a});if(r.length!==this.scripts.length)throw new p.f("Invalid witnesses. Found ".concat(r.length," hashes and ").concat(this.scripts.length," scripts."));const i=r.map(e=>d.b.hexToUInt160(e));return Promise.all(s()(i,this.scripts).map(async e=>{let[t,a]=e;return n({scriptContainer:{type:g.a.Transaction,value:this},hash:t,witness:a})}))}}return t.WitnessConstructor=v.a,t}},344:function(e,t,a){"use strict";a.d(t,"a",function(){return r});a(85);var n=a(761),s=a(129);class r extends s.a{constructor(e){super(),this.value=e}asBuffer(){return this.value}toContractParameter(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return new n.a(this.value)}}},384:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(382);const s={type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296","4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5",{doubles:{step:4,points:[["76a94d138a6b41858b821c629836315fcd28392eff6ca038a5eb4787e1277c6e","a985fe61341f260e6cb0a1b5e11e87208599a0040fc78baa0e9ddd724b8c5110"],["34a2d4a3b009165987ffd1528603ed61190d0b710d6a564c2db2e35f12d0441b","beaaed6a53a1e3c22bca71046e777fc0e7d766b9deddd81db424e7845e93b146"],["e716aed2cf069e4d997789672e6d6bd2508676f2f4fd0a64f077e8daa245573f","353663e694fc72ab5912b06687b9a851d13d0df2fa07c9b3505fc26b469218d1"],["a018366f4e91e90d8e5c643340e586b4714ab749c9052a0503e8465c6eade3c4","e2bbec1714110b167c6ce578349d8369d5f7284e44614f37f45c42026b26e8d0"],["ec73885141fe54ffef6a0b570cd98d530e431c1aad5fcfe8f7dcecb7d96dff1","d6224f4e87ae875d91acc4ef580652511d5264ce87ed78aa9ec841ac7c7b552c"],["f8f5dccf4c6a93d7a4a54daafaa3449aa87a8069875405d43725c5dce392d805","e58176cf66d63054389d3e336461327351f3da64a52143ba026619516cda02fa"],["6d28b6bffd4daf313f85eaad8e4d71b91ca631161f99218f984a23176f922dbd","af39d905141dd2fa40fbe1a61ccb4a1c4c24e9f0b84da29944abff02a0ef3cff"],["7fe36b40af22af8921656b32262c71da1ab919365c65dfb63a5a9e22185a5943","e697d45825b636249f09f40407dca6f174b3d5867b8af212d50d152c699ca101"],["6965b6384d7061e685371fe7ff26519e76bba9dda2aea7817aff4fe1fdde3445","d1bcdae39c482511325e496638732dbef47ce6051a5f99d97cc4389e18855113"],["fbc341c8c669d7632ca9f0d41bc43dc1efe47b273b95775258fca6c4d9aefbd","bd8022632f360e3fe4014b1d4957d3d3950b069e200a9ff1ed3b6ea9d3e71ca0"],["6608c243773c85dcbc666b9ba97323b234a8bfe70a2e3338c6e3197aa3fe67b2","a1a916bec521c168846f640da746e03fc22b159f40c543081923fe5ce5b47a28"],["d8de765227b7873763de93c34d8b561cf73a835fbb8e9c71c2ebaf8017e55104","2fd29465be13f2d15c4c628ad1dcf924c2f73fce1940db1b2a02ef80e52e08cd"],["54ccc9415026d73f20a845b72a58e5b18bd27f198542a0beeea6bc92071e5c83","1c433f45b45145323a8f8715dad2bf22929e0bcc5d8ee496cfd08ef7140916a1"],["c5440c597814a47d9f6cc7d1513d7f38e40cd02e32847f01c30fb77122d32936","d27ee9ba383e1fa72edc1e1d23ecf4acd8a6d28631e41e5d9a42fa3747cabfd4"],["241c567a4227f1c506c79b97a6badca61c37101cb8971583bf9f4172b066fd48","40a62d93d4302d4b9363817c043203a48ea87138aea366057f7d2c6792857b08"],["fa822bc2811aaa58492592e326e25de29493baaad651f7e90e75cb48e14db63","bff44ae8f5dba80d6f4ad4bcb3df188b34b1a65050fe82f5e41124545f462ee7"],["54bc18d7a99899547ddc6988d7ee1b3f2b481ab443da43ff68f41305b76a6987","4b2c8c1211e6eaf37391b851ba73e2fd52eb8ed4bb73b119fe457cd05b9aae49"],["1d35c9699761e3f285f248239267756f5194b85279f96b7c60aafad170aae231","c7226cb62df608231d660ab622ebf810edf58aa4729a66f15867063accd6ac71"],["55d9a959844b5aef388ff0f7aa02f29acbf5ca9aa567e0e65572aea8750e4f5f","69cb7f9aa5dad203766d574fbcc8ec524c9810c633ad1b15c858eb76bca97db0"],["6e29f959be28c47fae5abca185755c08346924376f5412c1d4d3d2de4351964c","34565d9f500f32f65052ec6cc184246def640c527a0bfb63118824bd563fd88f"],["ff046a9eb2bfeed9c00f2ef0796f458ec141c259a845631128a7d4110cb71280","432f55acc0953a170a01eddbdd4cfcc9012b6e6ebd28487a7ec3271f5ec33919"],["e486c7dffeabb058c1f9aa2349ee7eff8b2c7e63cf570cc5c7d0b24cc5852e50","51fd75ed5606a12e9ee88a5c9f51e05a694463d63392ebd866ba3cadaecf107d"],["f41d7f4bb5e50430cfe08cf8b5e2ee0ab63b9998a43d1fc584b6b8ec2b519178","e6a669bebd9af8d6f1046de3faa82347ab49acc36919e1f9a7a1665dca6a3551"],["4a5b506612a677a657880b3a18a2e902e9a521b074ca0141a84aa9397512218e","eb13461ceac089f1c42604fbe1627d40626db15419e26d9d0beada7a4c4f3840"],["2eb3910bde2ab995012c29df8bbe0f5032c3b2574328e5f76628d837008e2df0","3f29c02337474b3a77d37d348da4999f9540d120ecf65f490910cc4ed274eaae"],["7ef2ee3c5c792a0c0fef6335224d9428a7d2c98f6743333ec739a5ea3ecca7e0","afb6862730acc011a4f67f51d5e609db81b21450dfbd3d20302b22dd552ac094"],["e51416421640aeb57802554eb5fa77aa9cb53529975e04a6701f090ec49e853","cf331cea65905469278eb4a53a91030df568394190c9ee36336e3d1376405cb2"],["224a02299eecc99a0634a786f116445779c3bb5b5501d267f0699bf9e2f2b734","fa41a8d29b6d22b4149a08ad871d7fff07b704b673c7afd0840f585491ec7fdf"],["4a89a61457374b4ccdb5d111b56493fe167d5ee4d1041ce2ea6065ad7789b84d","45b04e87ed480d5c08c2ea979fe677e6a72e280634711999ef9b7d7f018e3ea8"],["e5e892363a31885cedc2f995f36d1f90ba82337d0b1fc80d3438c84a72bd05a0","77439de4da1b87d21301eb01e79b5c3eca73995b9cd099aec936de2be1a69f5d"],["e4107e431e221f5071e7474104fa90a45312f0c21fb084de21579992fab5c2cf","1e5f11e6cf701c9a3948c668741c2b323c7892dcff7b2410d028403f2b955c2b"],["447d739beedb5e67fb982fd588c6766efc35ff7dc297eac357c84fc9d789bd85","2d4825ab834131eee12e9d953a4aaff73d349b95a7fae5000c7e33c972e25b32"],["9022e314949ccf3e8937542b8cdec18ea2f8d5618688ce241ebd8bac137de736","2fae5e4f2904a39466d0bb045226ce087f49366c44ea7657f4ef5c0844c42ecc"],["73baff0419eda72389386cf2b5156deddc34c10619515eb5741145c144cd3397","1e97de634977ac5f6a00d1e8c18f825e779ef92cf826134941ef2a139adcb8e4"],["9cf646b91a4c25bbc974446c2976fb982683bec78b098cb30e2e5fb31fa4e33c","37b0624dc1f65a891e408e258b821f319e205827ebc1603219c45e060e0d4563"],["f81f5be38b8ca534e8a5c7938d18df9e0d238966f74e1a6b826fadc0523b716d","dc7f49329c1f06df1d56d29d380e0328660758503a878330464002f512632401"],["85685474d77e08482397f463e53cde1d022eca56c3915c978ed9c7e787354b7a","20b50eb50bf587b6eebc913b2a6f728706a891dc1fd6fdbd8954402bd16e04c6"],["1136b759c12b3b11b319e52d6bf9597d9e3607554615622addc6dc1b12378c16","7dec0fcf45168fdd09f0abc60fe9ecb29614aa28e751cce379f59bd0b3488127"],["d2bf28ba7c2a51a90f573a82589f18e07e50ab01786df709c762ef1943e832a","cac3f4313bd00ac7087a10a94b4e7ed27ec9db96055144648263af15b20d37c"],["8a535f566ec73617f5622df4373713269e4c35874afdf43aaee9c75df7f82f2a","455c08468b08bd737e02819085a92bfcde533864c8c7669c5f9a0ac223094b7"],["ad6090dfdcb41a019af7cd273da8a366b7a3030e99e53d5e9c837f4fe476c81d","77b5d1dd48f4c91eaccd75c2cc5bd8a8393fdc364f3048df818abc84ee6705dd"],["b6e06c516305bbc4e466557075b929fcde1adf89f510a848a52f2c3693c4a205","bdb4277c21b323f5c5e1f126e79ed73b63f99419a82a9f87537f4d865db36d05"],["45a511c97f608bf76dbc4189d991ece618c452b1b42a627f3cd5f4e4a9aa52df","73be0ec773ea9b6d3fe3337fcb625ad25a919b27d22955ce7b52bd12125ec16c"],["20e118564880c79cb927e3501cf2a53f030b86e3cecac60728cf1ab99076f57b","ff67b352ac437ef731bdc3e3fb6de9979fe0dc9b40e1b71e8583bedbada7afe6"],["5c9cc4f8723a027b0318ec7fdfd7dac93fdd478e694fd54add1452e899273a8f","84efe07a1dfed259a827589d3708af964f003675a11acab5addaca695ce80d6e"],["baffd4ebf8a8b5ab46ac18444f3dcde3351a3a75556c6c4ae7dd9ab328523eb3","fa93dc5dbc95e83003a8eb3795ac09c24511ccfbf48b6ee1978300cd5acf387"],["6ad2a098fced766ed22a34d257e4c96479f0b1a76db3c5f835208d8ba111101","2d5b8b1c58f85e3559a4c01bb9eb62a0de429d82b70e89aec1a7ba9d5fb37ef4"],["a6d39677a78492762736ff8344315fc596439591a3c6b94a6cf20ffb313728be","674f84749b0b881666b8babd2d27ecdf824a920c2284059bf2bab833c357f5f4"],["ac25da80089cf4e033d4db5710ff5936fd683b4d0dab013e6eef62ff4514c6fd","ebc69d985cb44c7b883da9312a1b338c810983e8243bf37a60b5397705830541"],["285250edc3bcfcd9027bba12176d343a26035672d5b4a81155d4e37a2fd20bae","7866c086f4ad7ea83f7284ad1046c1716e9b1a2cf1eff323f9de455a54e0ab97"],["c472c1062ed0366f818debc07ef8890e1fc5147dd0dc267c171f3a2a3e07e4f1","41820e01945f70e96432ab5a84d667d885f3b7b1e22b5d8a571c683d86b0daa9"],["55d5398d1666432b557582c99ad534580101fb06a050e62c320f09c3839bb85f","576e229049ff8e2d059c6a9e8ebaa72ad90d6a7f1833d9e1f7f631184fed936f"],["884286463ca0872694febab24bfc3383cc268940efec85ecc62dbc9c32513926","f778429c01c2dd5a69660db365d81207ce0eb122ebdbc15a0ee4282aafb8a54d"],["b4958c4e21de21d47fb60c55edb925559eaa8520a5ed115e3e0b5d5ad4441fbb","fcd6e7bf996640efe5c041fbc38cb7e12db9f6132d4638414c7e3c9f4add7118"],["d0e0919688e932b64134bf13b346027cd8a7fd0b7d761d04ac24e6436e12e1df","69c9a59fe7d1452b4eb60b691dbf867544cc4bd9846b8df6a6544db9fd28fbe"],["68f6b8542783dfeeeb5b06e70ce08ffefd75f3fa01876bd86a703f10e895df07","cbe1feba92e40ce6fbc8044dfda45028cf5293d2f310bf7f90c76f8a78712655"],["7f9460a23d474b66c3b41d1793b353d6646bd35404739e0dd34dab1767ea1f34","d0d516778fb0618769f1f2bf8f076661c6ff815124e34ffc58bec2cacd9063ec"],["9c39cb60a33d563d2958f49f1b6ee94582f2d7a846967f0dcec9b4d78e6d8483","f097bf1ee493e51003d196b7bca16546bbade52f3dbe436894b3356f6b2c50fb"],["3d9285261122993897566e7430181e25e2fd65f1b1b173747dda97c55c38d4e4","d32ca0a5d468eab53ff057035c2869eacc0ab138197abc7f6faaef00c0ccf0d3"],["f50b99b7468810b73a5a7dcf08bd17915c08966a2ecc1e07606304b1a44e8de3","e2b5061e55f18f0c8789973a2dedcebbe975f18d21721e854a3f3ba6db7f3588"],["42531823ff5ed0b0d77f4880da0b0e07400f246c3cdaa859e1994056037cfb4","c90e8bccfae00f7e628ca4d0c8661faceea3e4f534ec5dd400b7325ed8775d23"],["9bbf06dad9ab5905e05471ce16d5222c89c2caa39f26267ac0747129885fbd44","1bcc7fa84de120a36755daf30a6f47e8c0d4bddc15036ed2a3447dfa7a1d3e88"],["b12fadf52943dfa54943fccb3b7893e796357686c10319e31ead3233444c0448","2e2459599b0f4ace96f8f6677b2a6a71d05e70332fc4df296575e76b369de57"],["b197a2e1e67a44b5afb62de48adde6400b60867487cab5739912513c420924a","a4a03b30f39453e2566f385d67c641fc0f5f54efb8bfb340b9e53b38d1045a5f"],["b6ae3ad5f980c4f9242de74738d53742a8c2aee4e9f3212be86c8ab8842fde52","dd2dde44b184d7940e029053a745a90b5a7daef354da5c2aefca03b203b98f33"]]},naf:{wnd:8,points:[["5ecbe4d1a6330a44c8f7ef951d4bf165e6c6b721efada985fb41661bc6e7fd6c","8734640c4998ff7e374b06ce1a64a2ecd82ab036384fb83d9a79b127a27d5032"],["51590b7a515140d2d784c85608668fdfef8c82fd1f5be52421554a0dc3d033ed","e0c17da8904a727d8ae1bf36bf8a79260d012f00d4d80888d1d0bb44fda16da4"],["8e533b6fa0bf7b4625bb30667c01fb607ef9f8b8a80fef5b300628703187b2a3","73eb1dbde03318366d069f83a6f5900053c73633cb041b21c55e1a86c1f400b4"],["ea68d7b6fedf0b71878938d51d71f8729e0acb8c2c6df8b3d79e8a4b90949ee0","2a2744c972c9fce787014a964a8ea0c84d714feaa4de823fe85a224a4dd048fa"],["3ed113b7883b4c590638379db0c21cda16742ed0255048bf433391d374bc21d1","9099209accc4c8a224c843afa4f4c68a090d04da5e9889dae2f8eefce82a3740"],["177c837ae0ac495a61805df2d85ee2fc792e284b65ead58a98e15d9d46072c01","63bb58cd4ebea558a24091adb40f4e7226ee14c3a1fb4df39c43bbe2efc7bfd8"],["f0454dc6971abae7adfb378999888265ae03af92de3a0ef163668c63e59b9d5f","b5b93ee3592e2d1f4e6594e51f9643e62a3b21ce75b5fa3f47e59cde0d034f36"],["47776904c0f1cc3a9c0984b66f75301a5fa68678f0d64af8ba1abce34738a73e","aa005ee6b5b957286231856577648e8381b2804428d5733f32f787ff71f1fcdc"],["cb6d2861102c0c25ce39b7c17108c507782c452257884895c1fc7b74ab03ed83","58d7614b24d9ef515c35e7100d6d6ce4a496716e30fa3e03e39150752bcecdaa"],["3250fcf686637c7b2e4ac86eb473bca53a582139f42b1523fd76364e67399e83","42e7c342667d359397b3090d1d7eb88c897cd3c33b566a8215de24a071d48c09"],["e91c7239c2640d7d28a3e39d4583fa63c0bc0a5df64a4fe672e573045ca7896","5df65c3b550dba221a22733bb8e0bd6d7e68833575e7a5ae138046543140ad55"],["3a67e2554b0c0bb685f4f52d8c07fa8441652fc5b76f1b2484a4dc45f200d687","27d0f1872f1fcf4326daf267163afb0d8c188af735a7618aa9ed16b302f79324"],["184ffa5819d80d51deba2fac4611f378576355bd683e54abf2e201173b0883d1","c0a66e276688f359a4c6d90826cb999545bdeccc63f0491620d242c260906e6f"],["d6d33adefa195b07a7c36da090853b8cfd8cd1c688b58a41dedd693d1c784def","84aaba16ee195d7e3f78245f558a5dcb09a166ab4b95eded550c124593d1bca6"],["301d9e502dc7e05da85da026a7ae9aa0fac9db7d52a95b3e3e3f9aa0a1b45b8b","6551b6f6b3061223e0d23c026b017d72298d9ae46887ca61d58db6aea17ee267"],["9807d699fcd81356fa9aa25b89d9d34ea03b0a533aa872fd65c100f3cb2cd793","c2a59cdccab11bf286a01a4d1d091b2fffe630b96c5878532f6bf92479634af4"],["d58d4a589ed27d168ffa3ad7326c48ca94e8e1fe92af9700a12d389033bb291a","d45514d102726b8576ea92632dc7fef667271c163b034979a5b0c9c6f586b9d5"],["419a6a646ddb817dd6b0978611a826aae0d21379246bfd4473a92894502b3348","332544cf1102f584545c9fb1954c2fd513c6d072f3dee1e2db1d6c81b09214b2"],["22a682f7c3996d4d42014976a179046e547b942dd2d138d4a0c199ddfb2776c4","4f4606b0102223eeb918c9835a54356c979dcc310265b0685347f649cbaa285d"],["67a6bec240dee0651cf258d2e6cfe8aa6067c5c3d4175a593a7de694995d2fa2","de692b7022d131586c249b49464d44991542c7ee209aca6c49c24ce1441feed5"],["986ae2506f1ff104d04230861d8f4b498f4bc4c6d009b30f7544dc129b82d28d","3cccc0a6460e0ae328a4d97d3c7b61d86fc6289c189f2525110c441bb07e97"],["a891d06670bde99b3ecd0f5ddff0672e0f5f609edd29d6d979c78080fae0ba03","b596cd922cbfa1c1419a88c4033c1ce71c6b38f0feb0f2ccefc3edc8166934ae"],["42c315cc48958708595361ea83071bbcdd5b31583e19066d51d689227b1c0d7c","649a61ce571b95852914d1dfbb7a799074f1a1e1eb87f164d6c4a72bb2f9b1b9"],["f785b0e098068875bb22b146866e6c0528fb7ea9758fd4fd7d228ce6a5674455","73fdb0bf6080da6ee15c767f0d9f5b414b04b6fd5f3aa60ae7bc490c10d62408"],["672c4a514d9de43eaadee6863c1d68bc95f7eb56e81008ff044360f0018e22b1","548c7e9196a25bfe611de5a4ace203f7136246589704d9419935399191f37104"],["6f01bd49c9d952455a47802254b88039982b1ca78de9b983f126ec9f7449d036","1562080ff1d5deab11a0f21a608776cea78551bfc3749b08360233dd989e17db"],["79dba7ba068c9267571a109fe7fea2cc2a595b762c1eadadec1dff7df6e60a0","dc1e19b743d4d1811d223f9d2a9588ab83eb2df35751a397fb0da5aeb4824dea"],["c116e30ebb4d2865126d45a8ea907f86289d406e2d6c6bd88abd97b1d0f56077","e9478823c35b30c2b8b16d9bb13b87657d5bd5e89e59c8c5313fd7fda410c206"],["665f1a6ffe0c6437765b2784fca9bdf7e50941119e8dc8eca2b6ea0e0faa4b45","490e2ca49ffd18c26e8cca29f7eac37f7dede5bf81e215bc6e25a6602b7f4ccf"],["59ccb19edd3da9a2d3a6b3d8d9900013e7910a08b724fd55939ac380d32af0e","bb6ad7eccad49159da65281b9345638e1621f7a33956cecd928e1e3c97fe91d1"],["6a9501d85bf5dc802a1f28a08acc7d8fdf53c8af01a7cd3832a290825d8bdac1","ca640ad19347374381c6c6e44a3c56a3f8461b5c697a6f3530aff53d5f1ef1a3"],["34325dcb458d8e5b343d0535537dd5e09c7046afcbf39f6611aa2ec254ea3410","8568d1dc5029554796cd238c49676718794deb3ead76feb86f3b1601f3c869c9"],["2d27033cb622fa8ceaef897b52466883a46a6529ce596ff8d916cd0b10a6483c","ea177493148e92a4d0123f6d098326882a05d594ab147bf9599a4bf4edc331b2"],["52910a011565810be90d03a299cb55851bab33236b7459b21db82b9f5c1874fe","e3d03339f660528d511c2b1865bcdfd105490ffc4c597233dd2b2504ca42a562"],["6e4b20574af29f6aaa5d897cf601dc0a9fae27b0bff2a1da8b49bb9d9260e969","61d496eea86c4f2646d7eaad0896b1d23e937c54efd04659c0ac3c58afa16213"],["392c4bba3e6106244457d51dbb46a198d62b953bef294a1336920e63cc4940cd","e50c821ad6af849db3c3d7bf6b594c91fcfd8679568822095fded58287146bd2"],["8d435a0fdd81431f3e1cd4eed443240561a043cd71bbd4fc6cd5ed29e021934b","bcd8433681b32c85532912cb2a67107608f9ce9475feeb9b968f1ceceaa1d1ac"],["5821b002dba277251a9d18eb72d5c720f4efe021b38029c017d871340893be7b","23ec12d67a538534df9b62f63fff5866869c04f125ded1c31bbe9540e59f2363"],["dbd2f3d34beebf77121ef296d3aea625624289e1dcb58b8bd4dbc74df0222957","94a16bbe7e5762d0eb3e890abc26ed34587e52133edb809e3e344b3b3838fb9f"],["d829ab2d2eed358c8464c3093dc72e911e2a1b96700bb9b12cdcf0c2a8a3b072","3ec1bbe459cae899e1f6c7be2a598059166273e2d406aaf7cf3bc0b0b543775e"],["8ff01da682fdda5761e3fe0285630a57631e6eddfe1aa0bd28b945c867e045e8","3be3b91ef709bc92645291e2e58038b472565cec7b0f557f5e039b1b1b7d52d8"],["84d067191caffc0e3fbea9cf65bdd242a942f1f95dab91751f97fea1c9f64e8b","d8c9d818f5b6ea38c68bfd91caf3f8b361304a7c351ef683c46fbcd4b30900d9"],["d2b3ef863cbff9c5f49d996faee486879433543b9d296f1c672fc426889334fc","566d7e001025a8ee5b046629035cf83c921ba797f1b1baebd4511c8e8e2f4f0e"],["fc8b9e62fd84b49a3e70b728e31a34fa21b5fa95141f580fc96a49751f461042","d5b4287a2a5816f78bfc86cb0b63b6086da77b7c5a014ab0f51db6524f3d820d"],["7a1e7e2c7de6ba130c619436dd3f71ef240907ebc70710189c4cc1d387738ca","9cfc4945aa3fd5ffb2828204cb47806d03123fe158e45dd241a8d7714d3c7049"],["d73fc6300614a355414994e1dc29a3c6e55acd833679e294291d9c0ab90a4a9d","3ed6f0e2cd69c0db1b71c30ce01e631c0d43d8000c8879231dd941178e83eb1"],["dabd62029b4d0d1329f9e1eba1a2b0c0edf5380bdd4388c88aa17c957d462774","9ac784cdc8ad3fcd31cb988965424681cc263496d577e42eed0cc412a77ea93f"],["20668209714547d0b6bd8a416b9faa62b067b13cd17fe6d3bf1949e634bf9a19","113ca8c80168fe5dde5738a8930de06da1fd67f8aa682fbd076a4965a9d1fd83"],["21508b35b4afe0f01ad0857e7e1dbcc749688dc911e3a74c8a0e83174c8c609c","e2f8f5d3f58be2cd83681e414ad64ae98ccd53fc446fe12d9408df4140f7fcb5"],["cfc746589e4a140785b3bf94c7269ad1b17ad259fbe717c276ae0b0e749833af","9ee25d020b5be979be4f9367e271322ce8a1006aef0e41f611e7bb1930978ef8"],["99f888ff112b3f5d6033c6114f7232d6f379987131d5ed297f3fb1c1fc2aabf6","5d6cb14380271b234f3531d93f8b3a2de4bfa2b0706ac282fc983789dfce6f67"],["d4cf299b52904a6770a8313e6db1fe12fff59bdc9abbc3aa496bbc6162ab6cc2","fc494ce7a52a4c83e4d8a1135f292428ffed4546c22d751ef9346544e51769f9"],["f9c1c90b9aac1fc3e77a915d28dedac2d897e7a5fc7d75bbd4ea99cfe649ce7f","7c7deb67a844cd3842429ee2ef2f1a7f144bec235d38d3dcab113c2dfa54a06b"],["5949c0407257fa172399f899019993b5700d21eb9a176240432191239585f43","bdf1d7ea1dc3975645dff17312db17599bf0d4e8dc71f1d907401e7bf7233606"],["3fc424067a1f679b0fe2c0ae1093724f6233002be8063cb1cad2cccdb85b089e","5bb243009e581be52aedbb47eda98d26cf9fc800f7934c9466aaaef8c6629ecf"],["95e3476b96a9454d467d26bf88c13fd78e4100d7f5b4bfe1a73c1a3004d85e13","4676645ea10f7550a88dcbf9f340e0ec4043f9d4c830228e9bfd92a132b7bcca"],["49efa5f0a3978fe38f6e6637ecb67bba03cbb8d52209b18df4bc4671406b50e4","8551c53605e934529148ff2bac153b350bd2e06acb555371b7210c6a6deef872"],["f9d9f00c0c3d104845bd77200497c5b072850383b2b91283a697ef313de16f2d","ddee1f404154e79473f886a537b8fcd4d99ef6db92b6cba85f8e9d1a4c34e09"],["50f1973f020476859f33217266fa0af41af2eae2ba4b223d19c9b1d4d5a20c5","e3a723ef8d64df2ad1fea9a5a272feaf13d0e0a9b6b540aeb02b3a1092e16df0"],["e78e6b2aff0e7073d9aa4cfc8af6741bbec04e4db26cd86eada7e96300cb7a69","14442eb0e6c87bde9e36a299addaeea8c3042b42b0496b7d3b68ea73311638c8"],["811a6c2bd2a547d0dd84747297fec47719e7c3f9b0024f027c2b237be99aac39","a9230acbd163d0cb1524a0f5ea4bfed6058cec6f18368f72a12aa0c4d083ff64"],["8ac7e1b94ed385ded83b1b497c1538c6e827db6eec05db6dec9b2d3732248956","2bc15c273913ccb57067cfd8e2448a486444f1bfc89743d801754c4aadb1e63c"],["534d45db6baca8e2d2a5d0a765f16013a8d4eb58c6aaad3567cebdfac42d623c","fad669c89a2a54e44154357f992ccec8eef093e0f23a631d17fdf664419e500c"],["fdc2915e626931b17b6bffc90fa47257dfabf0fb6beb8ddcc529a23391a2a4d4","69875848075da770bab37fc34f539c5a80a0e5f98f01182fbe3fb01680399178"],["7e0cfeda14e8b9707e5f375fa07dbc3cb8ba4d0d1790aedede7797c8fc9b7887","5b7dde8cfa56c66423eb43d634b21950cb9b812a276eb8005a268f1e216620b8"],["29ee3680c3c5ce19c7eca26dda1062fab3b1d0476a62272fbc972f0641b22527","b8dad1a3eed7c275b810a4ae830f0454a44da4c5782a4a18029c6401ef0090d1"],["2023686920fefc109d95e34a75e878fda4d46b1f5497f89a9e609f5bff4fbbb2","5baefda0e85eb74998853a2959f7ff9c9464f775af1207489efc13e5cf9d135e"],["39daf267869de081f789324098661a15bb89d0874dde29ddba88c0c08a6329d2","9933f25abc0170dff9e7544c57f59ff0599b8653163ea8dcac923a1c5b00759d"],["7abc32442d5aa6a9a79118d04c517a43eae0e6f483a434972a92100feb43969b","8bcdc69779391e2eae3278106155192d6a159e69660f09a33dc8681a4073e799"],["f7757a5c2b39a294eec055714a2dc218e0b2c192f21151d550bd7cbbf8b24a38","32bc6817f54c0999ce0e7a9b4f7583fbc4ac7e2e59f2540a71f5b899beaca052"],["4dc9b2c29cf6728b86b93a5c8c6d6607960d267f03d3ba5b3934e6230be3606d","d15bde1925796247478dfd16228446ee272c319b856d4281ac1a58225ea13453"],["abab69bf2ebe50004d7872aea45872b1efda21434ff5f61c15f40602f8fc8120","dfe1e05fe426e0ee018b6f6801f925e30f3e6c399b681755a12df4146163cdaf"],["4a35ceb32f4216444af6ae386dc39ca14e43378baebf48004e26152aa34b81bf","7fd18e766ec74e3ebfa0bca551778d8140806a48f82ef1b8fb91d4cd47af6056"],["ea99361bd54af4ba49f817be75e9c516f1828ceef3e486474b8eb97cf2e65389","517a964b7058f85636e883ec00d36b2674253ab5f3447f70fd87a97750e2e296"],["c694838789835cffffca3a007dbff6f342f233210d16668fc3445660878d8b13","23d4752d1130f10135faa62387e2c84d64fd341810eff9c05dc14904098c2daa"],["5aec2275d0429ad4262437934d269e3aa387bf05cb1dfc0718edc1feafd8479e","f3fb88720eda74b204760ab21e9d309bcdfefce13037d3899da37e8e374f87c1"],["43ef1232fad346c280d297baa16f0ed4d953686b095d0bfd007a3666d908d16f","b6e3a1bbe2a64c290a1bbad1cc984bbfb91c146cc3f83c012929092e8376fd3d"],["5432c277580eb3cc101496fdb5d1544ef535cf725fbe8733b83809b055d2d396","50230a8108329bede4db187b4ba8d35bb73d25b7659ec7fa1f1a8477d4083055"],["59d24eed2de01fb147b5a0ba1aea605b9ce5edde383a825b2588bb28f34c5a52","f4701fe20340384ce5034f0b3bc5af8ae9cf94b51e29120aa2f531243ac629a9"],["33722147e2b1ac751bcda5630b9799c3323a5d85dfe902183bce4640e52ae125","3d7566a889ae6b64bcebd5e74c61458ce9cd27a640e4fc7df67cbacfb5eebf4"],["a772dc29ae49985bf0452405ab30905fd55f684ca272d90dcad07416aa79ea48","73f8dc82f0838a53524e16c05ec267f6b7ebcfbfa229203cf588bfdfd66f7fb7"],["370073d2888a1e92d7822a04e1a0d263fe7465db62674feda800f64c64a737b","e33c943f3159c4fb0066acd9c0fe773eac621a01a39ab066b91308948d7c58a3"],["2b093ee1533ded6d1a704c9852304402f733afc4c731f04d498aa25174da7342","524bd3b4859dff8fca1e1e2e65f4cf7f0bb55520d228960bcafd7adbb600224d"],["a7a6b9102398b4e38dd5e471062c976fbcc5f9e520feb5e98aa75663b7a231ca","389216e456ed70c689ae461ff48ff2f657a0d42ab2330814fe587520b205271"],["c68816f3869f7772f30718001ae4e73711e3713aae558097f6ec84aea3c040ff","383d9e85d9a72b778c1cad16a51f8ab6796d97f06dbee21d8f89fd215bbd194c"],["7e5c1f020a8b9ff2ffda0ff12f91ab2ce7c4e993a254d0b4fae4dc0299cfcc03","2606beb61e2181b15d958422ac91e4bbabf472ad28036ff96baf36ed532641e1"],["391b95a861772b39fd494e652cb5c90ef97718eda666d1f320caca80066df09b","ad00d332bcc3a0b86a800e91b2a5e650372a734d32a2739a0f71414c694fe844"],["83f93d3c7f8b2e78496afe16772e8d54dcecbdd3502313f0f33630dac9406eca","9fcdc295adb190199aa606f9059d75ad57776cf89f80aeef6ea67c71f562d4c6"],["e004562ae423e396098d1361fbd9756a6d0d4a9ab5f7c7b8e137b472f6c30a5a","390d4929f8e54009f295ed86e9fa88eb0526e8a9cf9e699493d222c70a6e8876"],["e2353719b5fa306eeb2cb325a51023dc1b2e6a19ce943db99ef6b1f8b27ca270","2cb05dc35cf21e3ce0f2e84868ee0d6ae0b7968e2cbbfcc4b038cbb31549af0b"],["30133afec328d71b3dc3ad671ca9434dc3b7f34e4f11cd841953da5d88041f86","b341b402446ff46d4d46c5bf86c6014d85c0065224f264324174a26df8e8f5e6"],["442e86e7085a748ca6cf4dd3d381c7b1b2bdd9b135f4aff12e404075f726882b","152cf994536d82bac4e526321e5bab11a4c2edb03d8cbfb51b5c59218812d56d"],["6ab19199df4cf0af4a7cb71bd71d900db22e4b3fcd1bdf4f6a5496f27ebba613","1442a8079326d05159b9eb9ce27aee73fcca77d36d4a47a1587b7ca1f5cd346b"],["9df0841a8e8e10c6d6ed3442ee20ae2a8f8377f2ee835159481d47e7c5b195fd","765799dce45f150b658fc9513cef0c860fc7fc44197aff60a3943eb2ad1db29a"],["d6683d044a03ab980d640236e8d001c110ff5ba35d7c8ac2d6d5ba069e2067f0","d3d3f62958358a79d1167cc4fa4e1f96dd98211c4cc978193f483c215991b32b"],["84ca3a785aba0643c465bc70a3022832703d9318ddd9413b7c96108d1bf8054c","cdef3a6f1c28f8419f19c2f99e1c4515af47a2692e65d9ca1b5d9db100caebab"],["6bd7fc66a64d87e3885a97e8e0e267ede294686fbadbe82c659a678cc78c45b0","7104d23d245aa0ce230738d56c8fd588d195f3492827ceacdcec47e09517bd2d"],["82eb86d2c4f2334abbfb341a12c80fdd53203ff529185476d352cf280d824288","5407cca0d34d7545db1823059f53890d44354128e1323061b13a2466f04ca03f"],["c24112a8951da8625edd78cb9c72818df76ac8bb712094e8069d2240a17e714a","ed78a62ebf7310e54109f6f10f95ed5b455726bfdc28b7409d98de88b2ddfb05"],["f7120a01ae3d274253718f6f38336046965793cbea40661f7bbfa0421cd4c0c7","bfb7e83e496595804f07b0985bc52625f4dd90e654efde43c4454d3a2b176ba6"],["6488ea04dd82064b5bbb0f1357d880f4b89b2d6cb7fd1be777f78c99e3707f11","1181cdc08848aadb7419ebf823b444e11a5957701a7cad964fc743d6f102e467"],["ba93530c9525681ab96329dfcb8fcd5dccaaa53c207c6b3c58a920407989120c","3153f325ab69a9f3cdb791403d35ac018ddfdfd6575ff60af023aa232cdfb49f"],["94c444b1bd21d51f4ee0f427b8255b1124354489ca6ee7f40c7937d682c38318","36186a57c187c054f3bf924a53f6fbba506693eb46b6ca36e6533dd9f99a51e5"],["45c2ee3dd988a86efc603698a3f4f171ce81b6ccb2b6a4117e5746dde4d1a5d5","98c52a60673237d8ec84c4ec48e00e908e3e43ae864e6d2cfed57b3a075eb4d2"],["ed075c81ea7bc42e78260ccb5e70d0686ce15d168d1ad45ceed04b2ee3fdb85a","14f38433f3c4c0da5c5f415364a736b4c7d7c098dc558560d59e072f1e256d3c"],["c7899c4a56d327e079df708bc586a2f19829911a1e3c68b8a80337fc251e5551","5bb779655edef171147925bb81372791104cfb9cc53260f22fcb453633780a5a"],["f30e74eca216fff39517307711e37c16d45f5e43e1c5a17d8312bf4741f0d9b","e5f134099e1682aa9e0fc39a305e9519a4c5404e28ab094fec28e0ad2363f028"],["78dc4b569e94791d3f06caefd0dc894297954ced85dc68e199f375720b426c4b","a3b76c7600edde5dd0c8fe9776ac00831fc6f9070b5149e43cb97c4267e06b37"],["e2af917f95c8030e9dba3c2f9bd0cebdd88be16d0db8417b60a18166a99d3bcf","43934188194b4307f2a1f134d843eeefe25bd851251778fdc46856dfd2ebf205"],["9b52f160f0183fe566b442b3c024d639ef93e21b4178252f6ac1fb27f9cb7379","846070fe8cec1d53a9e0d3a47c597e87860108c78a3549bcc4f3c2f9128c816c"],["321e3f620f59e0b50e4e930e4b383113c19b32479ae622b670c5d667325a1569","cff22dece9d236444ea0ba10a5e2fa0fec5e3856b9f5724a842e1bef5adf00de"],["f2df102bc0521a1663042ba5c4747355c210031dc4caab97e92194d162c1bada","cd8dfdff95cb2a9d928b422351f8dad76857380c17a83126823ec5e87ad5724"],["7610e1ee92fefc0936d4d215228dcca900ef8d025d5042662e13ffd4c6871d03","da78accd08960f152cb7e7639d86c2a26aa8c6c298640fc1d721ac2a2f89252a"],["3ae9f8abb1d1199d42771bd5370fd08c5494cec58dac69f29d1750527f518fbc","a8ca7351c70279dd50155a5a564a3e1c01ef599599bbc3a92c9f2a33c041a7be"],["5bdd9c1d00d92f1beb844f01603e8e62b98bfb0e4b4822a82e7c0343affe262f","409ed87d603c7c0a8b07654f213b7aeda5f1004efabfbea0d84437788fd91b2b"],["6aa688b448c11d72db6bdd672af441f2ce37cebe1866b649be55cbbffd335a9a","7a18f01f5c3e0beac7dd7089d384e1aa9aa8cfae9caffef13432405230a844b4"],["7b9d8810429c294300a5c38afcf238d07d5a7da6a236edde45b493d80cf6ad1a","f17ff74a46e377b583a5fb3ea9f4e412d81b79ffa4dc95c96862c09887765184"],["a59ccd6c9125a27195ea3c470521338a768a6eda9e227d58e70dcd8e25c25f80","e2b6e9efe344a4e7dd080354dedbdf5a8265778cde26d8674ca52678a923a6b2"],["94b0683dc19114c5ea32fff5905066bd417e8f226af10a4d43d391e60ca9e968","2a5eb4394947be9f9eb65927a09462b6055f498b3c90948359e6b47ac25dd5c1"],["559a141238dd6a51ce41c8a692430af4b81d78a04b90290afb173b97eeb6bad1","caa72fd43d0d3092d6e08724e3843af19abc985351a20b3f055cd7b495bc96b0"],["a392b26b0503a71f0ce1e02acadf19d72a84d6211b21c914ee8bc58dfea92529","90bb3c9f9f1b598b6f97aed2c48f4c59f12194d8eb011465ff88e7560d1c5493"],["5a679ccf2d4319b480cf0ff2f665404ff5fd09ced9dc3987b01f7549a9ffa0b3","519c8de12efa76da15399a4682ba3355b00d7867b8bc084bb849805e030e94fe"],["43e9f8900f5e8170defc2559396acf5d1606903fa8ab4a4779f2ed7d9b85440a","d35df8428586f02e6edc79505e51d9c2f1ee452b6e1df51dd57d4e9f433f65be"],["c13dcf15ade2a7383c3558922c9f13c37678e51e8d8193ccbdca9c816a15004f","64a986d49f5f679e1faf7ff42a2c8a936443e678db2bebec7760906cccd0ef0d"],["3871f2ff13be671e3740d5191dff99af196b11382b5e1a7fc9d803668e3303bb","58e722b723cd286e02e635abb961a27d63261e598e4a0418e2760696ce5aed62"],["3ab5707837c2e80cda96b1567b9cb305a2410b9b3783a3ff29048e7b7b2103cf","278f7c097a9bba62a5e1eb2c0ca0026b3f8fb29631480ba78a8f7db00f11b0b9"],["f44b39759a2e6db723a6f90249972dfd08e95380f1fca470eacd1d03e5edf214","befafccf223ca065f0a0db4eea93ff06a2116fca81f7a4a9436a8d917a02dede"],["d9dd8e22e2ffae0ae09e2c8ae944c4b583122032dda1669dd506cbf9e65492de","26d2fbee7e9f713b0eb192fe94512178c16a9046c31b7594116567353c34d9a2"],["3b12f048d6222c9e7d2ce9126f434a2da720f75f6c832fddfb849e271eabca38","5e56e10e47ba51512e3e53b62bab68d9b2030a937c6d88ba890b4a7159f8215b"],["233288b79b72f33fefa0490349d2e2eefdfbf5cd81e1864d362d1fef94f586fd","72118af2e72db1cb4a714fb6b199926c73680acacaa1fd024a7c5d7008223769"],["775332333f2e5d8f641a39ff8b8f4353856e9e0db3b167b158e9cd348f99fa4a","f921be4d9677d2b7e34633676047021264ce6d662cc44d0a4441644c7182a65d"],["1906a34ff532826a96149158799e8d4a33ebf8a3878347b168321bc7e2ad4c66","dcf20c27ccb0caf42e95037960274f3cb4ae1cc43bdcec77ecbea573e2e93c1f"],["7789dec464dc45a7117f0c56bd6b33ce4f4a3dfb6f1885bb7889989fb1eadd82","6aec6236fbe5be579c3c060fa77c09692ffdf141b8ba3173af110f980860c448"],["f66c3919379549fe1fb9c96622161c45cace6fc81a5f18a467d31bb1eb678e17","cbb7bf343aa57a3f055826e71569423132d8666cd7ab16037e2d32888c458d20"],["55572ec3a2fc3bab911ef94abb3a43d742d00a32ce5c487d2b7363997e92f185","4d23fae36437c6d8652d5be524470e4c2c098866ae465bb8d2097a6bae870d79"],["700ac63d3db3d61fc9c356d79ba829fdc9b234a6b05379e2c76a103ea6fc8800","396725f25d957734df5eb06f724527f84dd92d705f5c996bad36cf8ef72e6a32"],["65835d2d9240143f435e5d2fcd9ef1322827eba58ae37ee6bae2cbcb36a82909","14d2d3952dee39065f6bfa836bb721e1270bfb2f8de428efc7fd19e781dc82f3"],["c01981542a09258a9e43cf5443d050feb6ed04de2b5e871617715a9069df1c40","8d3c24204157577929ed3dcd738f065ed64cbe7f366acc999b3e91862a14f1df"],["ab391f790c8164cf716fa8f19c2860596e677c0c66db71bf15147b2a42f4901b","2f8a8c1e25f25f0e6f8766b2cae47baa73f1edee853121ba7eca5bec24c9b59f"],["a1c0bdc61bfc2c081acfea73dd2d5f962a6c595d579ad1a18c11792a8672a9ed","b597e441f7e149df3f28efae662b11f22559783c144da8251c0d77ca3889c777"],["ac9e5a5d2b009d78387012895a8b01b15d9ea65df13e971aab1960a835fd3794","70ae21a18d3fc629c9fbe87116a9cc90f6fe8feafc878cb6b76712a02634d41c"],["19f84e74e424988ce59d3e0065b630afd0ce56316dd6e6a72a1b57728fda85f8","f9a8ed7793b8028acd853d65ff19ca2c9320cb4f47e7a74bde30c875fa8338a7"],["532346e77c4b09e11d0caa694f7c4e590b2a5dd9537a0a976d23e2c45d8f7bdb","249310b464f271cb120c2f4dac10939a116139d804a6217b1c90dd169a7639ac"],["2eef2226b69095d25006f492046fdd7e6d6b44d9d7adb8eca39be59485d0b7b2","802ef7a7ce003cc2694780dd5ee356c9008cf0b5b305ff8d9401eaad6097e45f"],["b29ddf7aece9e6768e2bfbf145855fd8eb1689c22e113faf2ec35ac426ceb960","3a8014ff99a13181bb4a60baa6b66972a122cee0d190e9c3ab29b64b8fe975d8"],["ff229b98c9e2fbdc6b5b80a7aa28f671d6ffc7444f069bb1c9f4c3a13b0610f9","e6593b7734faaa4aa0db2934b3df4a91bfb3f221c986b4add02665720b321023"],["67e7dd6e536b03850bfcc9304d4c1eaf65e1ac47b9d8deee85dc24ace9c64b77","bc1a96d7916d9f0638a8b754665a44edb72bfdbf35d506282ea395cb3803ee30"],["a9225fe9dd9949402b8e8ff79452050c6c3899061bf5dc0faf7db5dbf3cac138","1957f763591e18c7d5234332bc5cb3b3aff462be5c7c3fd419f416e6213c682b"],["415cf6ab4d718f83033a10352e34f2a9c510488945ce45481f906cd9bb1db3c5","adc883a55da017f241fa84b352326039730d2891c4f05cbe43b8a0389a99b42e"],["5cf3066c0f4dcccaa42d00a702c2e0cece742ffe67f6e0cc0d431b4055783e9d","f56c002bdf0ac979368927ba63e480ec48e2504fb74204394716d8cbbda3cca1"],["3464391fade61eaa660d8366bba0e9fe0e37726b045f3cfe0e5871836c8d58a7","1c5c5df95d718360f86299a4d7b1ac00c9a4a9f96395fbc6230463e84836906b"],["d0e2356ea6f822c1731e440710b4cf11bf79296b62fd8e8f93a2a58236969e9d","79bb27154b00c0e1bb3ea1b4282af57f404e60835702e5a65596e63e0eebdbde"],["999c9fcbed288e3624a3e8121fa64e804fd9b594a4d8a9df2ab2d763e41368a","2d1565f1a4db6c6d7a7c239914ca76af0fad8f9669372a30d7bbff5c381e7fb8"],["d0ef0d9c1e333378211d09c0ee630d51fb1f8df53814ca869c527611615bc4fb","19cd34e76bd171143fc683dfd3e8031ef6cb25cca059520882bf993792499463"],["b27173911c0025f9cae5391a2bae96c4e77de6dfa8c487f44f5f7b8944247ecf","52cbbc5ed3b99d62dc4fd6939384e2806aedc4606e8f899990d017c909870c48"],["bdbf58c174e93d60255e49912dfeba6c106c0ba6e1f2203317874e2bafd4233a","d23d3139f6da02e15a082a4b6ae5ce5674b194d9b4cfdb69f18e0e4822853dd3"],["7bd80de069f8011d45874d02de76e77ec7fa645f029fe3e6db66f23271f0ed34","c7d9bd7c0ff87805aa807c49278d970499a7b0a0c37b6e893ac1a5c6a97c7519"],["aa3dfecc53851bcfe8e817db9962b026fd63bb2e5d9448057db0c22e4e5c56f2","c02fd371477287783a6d014e920c510e467a8aa15a36cce25dc142096ee820fe"],["3ddfb4487ddc736672950e8e07b8d1bdd30330115e8707a2aab6d81768447283","ae89c5974be8fff9ea3a8a66fef1a4175a54690092187e3a3d302144f3380cb6"],["f57d4a680c2e97a6fd2e290ae440fc2c503cbb26f751f00a20974a2553c6981a","334cfbdb316dadb84c83028691a4adf2a87ba5e099e5d61a56b53188e64eb1ed"],["a9e574a7c3053fedff6f4a2417010a07bf5a8c0757dee1fc8d05ad40598e503d","cb8f14fbaa20ef1cdcd15ef8ea6b35bddccedcdb71dce8f0c23195012cbce52d"],["6ac43677ba27d2f4c2c2eca32ef25d92d1fa765c47a4571849270779c04f7fbd","6405cfb89f7a79babe858190df08857de2b57731eda13df59504c9a0f45ab0ba"],["878b29a64ab18385e132fda6c2a88714978308801001b6050f61a5ef940ad98e","b966df245f257d07fa27f91568c5869df846d41b54f56b109c87b4b66923df19"],["5277b40fed0377c011548edc1d0f57532ea048863b8ae06ca77de4fba670b3b","c1d15edca7e94f43eddea130f13925988ca269fd3d4deb2e7c7deaac5456f574"],["cb9e35a283fa42f235889cc263d4a35acba488ab877a0d0ffe08238779058ee8","8f319d64ddbec56fb8bcbef397411aea9f4b650217ba13eb7c97c13102f51e36"],["2225098e90ef30f7eef5bd88b3f2518cbc45c4c7e816f03579426408279e4771","1f5da87bb6e1f03f642d4ac5d8ec69f9c8a36b64e53fed094ad5cd43e270f4ff"],["3573e87f7d44e5affc4a11e58c5ba9e4bff7dc8d2aa7b50f2deae4cc624fc56","8730d90c993d249c759b76e377dbc7ae56c2d28d1d9e43e0cbfd0c79760f0d30"],["d1a103985c6225b10115344516d747014f45bfec501aa98aceb995d87699743a","5cff24c15beb0c4765046b243aeeab93e8f419dadcd71518b04679ea0adce4bc"],["ad6856dfcf8048debe7af290281628045f2a99df491c6f5f099650ed840c4fd6","f6df379892e9adfc0ede290b17a6d7eb2441629aa962bd142a8362572b95faf5"],["3937fc8c9060bb6ba1f241d1574942fa91762be3a3ef0988a210ae728eca8770","8b8c2e835e9afdc96fc17e08d894925e3d8e280422983075a3882820b3be4a65"],["16ca2931061678873535c8af7dd3ffae5519eb3743f0bbdfa5c52745d6b0dd2e","ecc999868431ca521d76109894df376596a8937aae374e926c81fdaad923bfbc"],["d9de69cc40924fe62bcce527f279d2282175f63ea254cc0a4ff7022ae8a797e9","4dbfe8d2e4ad14273b3eaeb8d31a20724b05e8478d719706835082729e7b21b4"],["e1a723c7aa6acfb66e6c05e60c485460cc9275a6dcfef292a58bdacbcfbafc1e","552577940dfc79f6ecdba1455cfb424948fd187158e3f02775eeeecb5ab852d4"],["273817af2ad3a4784fae99508ad1e9827b5385ccb5e11fa5060add87450d17b0","494a1183e7af4f58f197dab433a60830f5f2c177b43018c8ddf8f6838704cce"],["96e04ff14ace80d760475bbb6a8db5c9958b6d5ea3c645e1809227a8c726cda2","d6acd58f53ccd13c6d0cb0ba4a485d02c0ebe11545b1ac9a10c72735aac8a1bd"],["689ba1efb706498ea36c26f5a25af8d56c55def82966401e6b43eae3375ea3f4","af8a79c1fba37bd6ea7f887807b5e14e4e354199295a16ed057ba39f232c290b"],["ea003867de138c44f4d550c1f881b66ada7753693335c6f0adc00b950fd9810c","375c17b222f42b89c5107c4dc0a2d2eac43e8b3f7e8ed6466e6af1b2707dbf20"],["449abd4a28a1f44ae49fcfd37c5aa78e16237ffaa9b283b70a2727afd5d3675e","d9b2741154c2a1fb79edadaf3600397538b38fe1d2e18a205f02509c8bc7d823"],["aef9f30a9ace86f9bd6dec61621039f7b947c02c679f8fdef578287501a6ad9a","22061cdbdf91bcd4d7be81566e0431042ce10870597ee4f17d6b31a1cc150057"],["b2327b22d7369e8443ca7c534715eec175497ab4201f09f93a9c443e70f3c8ec","bf40ab3f52f15386c4986403344e7c8fbf276093e97edcd59853ffd3dd6c4f72"],["dd39de3f862f49db85f848a5cf952807f7af5025f5ab5f27d2e965bc0e978ad8","a127a38e083588643e3d8b3ac652386d8a77b438aa1c532c74f9d5dfac7e4710"],["a51078213fe23fa799d16328b612890013bb1e033c0e4ada237bfc294621951e","c3db877a06dbf4c12e0161ca89edf0496d9b3b6d7af923f64e86d9a93d81563e"],["8d7e253c423b82a15c3fca18c585c8db24533cf1a2718c1b6998de57fb1a627","23f4f3f8a2ceff32ecab83f70cb69a124201e2ba529692570113a2c90e1630f7"],["915a89859799f6066c761faf3e74d684e2e736de2b45248a1a7ea92df0f2a659","7ea1fcde3c0e363007e16261427b0c4902364222be981f1b4d1a6d153bf70980"],["c293180b56b7d967ce98dadd60b64720de458e555650a93d43e575a061297f03","e2f879119bca9b5659e7f8c7014fc2a55459611de469f8ff59d30212e0d9673f"],["406a366b6771786a10b0c35723218bffe9c0dab89824752952f20cbe76b2a987","5df9ec6f3a68a4cba54deb19256cd0376fc29ac33f2582e50408fcbc263a65c9"],["7702fafe772d6905ab74cc79bf0580fd381fd7e24113f331e59158166749cf8c","f9e05df17a917e1a6d65a191c985806b7a181bd2cbeba5b5891c5851e19bfa46"],["6a12a3020ef4030cccb3684f25b97037b3a0e732318cd50eb92723375ccfe80f","d5a304a8e519c90e56135e2d04b8f6b551284f864a4d53bb4370e221d11fcdf3"],["5543894af3d00ed7d740abdbd75c96b06877b787db5f70eea78b90a8d7c00a","bb4c85a3d8ea29efaafa24406912dd84d5b14dc32bf656ef6c6bd58a5d943f92"],["d12597c5da8d20c572b6f4313f4dce0ae62f4c911f40dff500ecb03708d55bb","359e47f4a64015f9745893bfe97d3ea8f5f11eccb7b4ca19d60bbee96e82c8aa"],["4394a88ce99eb037f42936315c5b44be8be38e2fd2d8c00d237d6e5c840c15d6","131d3d913e9690cd9477ea1ff1d959c8156334ccf244e8da2ced68e206e3793a"],["90791f516a778529220e3c30b07f575f5eba4824d4be2ef45b257d1adc763666","2a852dbe82a401fdd6a71cdc3d0634a559ae7ac1df117c4bd3e84905f6fb89ef"],["be5b2b75fa651b8f42b29638eeb7bc59e2928991405ba968723c0f90afa4cda4","1fcaea6a655c4d31d301edd565dd9d8f7fc6879f63d2a1d23e6f4e5f355b17f9"],["5c19227cab1572a07099e6f41e715afbe74e126a34d26586501edda4ac0cd272","c7d878d165f0e1aebdb252dec883770b3b550959977b68c07fad6e6b8f066765"],["230c5b4ef455d0d218264852b67f384c2e9f866d2d438d9968d3941c6f95f8eb","7b76406e2b2edbc5732e463f116586e0249540c2e58b594a213dcaf9de0bb931"],["52855ac01ec47862dfdc9c71be6ffe6f489f17537013d439811359cea92a153b","7cdbc3084686928ee30daf83ba25d723cab9310d848890f44e222a136800bd23"],["143bd74fd2fcfdab061daa305ce52491c7cea30fb1f9ef992a5fd6cabed718b9","ab39188da86c46661b2d422a1a953cfd696efa0744dfe2a65d715734d47b4638"],["859aac027f4abbeee213fb864608d018c3ab6a41a974484d8c8d455400d68ccf","1a2b2115541338dc2474683bdbf76ed3415f08dbf9759809d53f5918cbe48e7c"],["bb393d8a0246397bb12b1970e985848181c4f930c5dd3817293fd0b52c975ae2","e1c03545eef2d2c47917505f9274eff2329fc77d7ee9d22dde3dd66ccb4b26d4"],["577ed7ad714c39bcd3834ff61567225ceb804e7da93d06fbe5d5482bc27bf322","608a20787e5b827753e27f0d76ce02a472d90c3b8a3b2477ad8d1d41229f6cdd"],["42184307a30b94158f6c5fa62bda46ffccc7e5ca6f4a3eaa80aa28e5ff1db101","86664ae7978294223c75da487cd348e347cc1f5ff1c0a5d498ac0112965ee748"],["7dcba84fa341e2150061acbcfd0ba33b9246f60dbb064df94fa1a3061e24c182","ae3bafe2eee4ba5a8c121e442736929a565051bae18a349454e2879c6cbd2530"],["e80a5d5b3668e0a6dab37fe1a30ad73e85c320411338106671b75be6d9d77742","ebd0bce07ee2f5a94f009998943474541f6a19cf97f79297ea0ba097f9f6f251"],["62b321cf253f3ef358da7f7dfdfaa40e8c731dfe37246d71bda1d78bdd7e40b0","aae7d387582abaa01abfde18ece5bde1d2d52f6c15136570eb06f3759cc30698"],["47398e0904aeea9c2937739d238efd7b04a35c6c86afbb7a444db2e10839bfe6","707cc6ce22cdf3f7623f09175dd4a1aa27b77776ec3d49851a25145391dcf9d1"],["4bd44c6e96c742d9cd293d5b771681bab7f610bb80eb1634fb2561339044506","6cb980d0a78a7e5a19b8122242f2edc49494fee4973f88cbac3cb1b526d977f9"],["5f77af26d68ebefd8d6d7729848be190c620984fd4103e0601013d4d72f72140","5b12c7f815cf21f429df122b9d79f4fca183c0c6c08a17970c75b70041b7ba73"],["7952b4e48f5cdd52016b79d07218d9d7850f2e94b0040e15b650c3a5cd704069","f29d06016494259c1a9cf56fa922c0a3a50d1a867c5d1b7497a2971e3f098126"],["ed25b526180c78c3268382915364a8d885db737d2e6912f880417926a2d4d328","3c406d54f3e4c725ddead096eb35b0f409f1b1029685b6d9f5225ebc95a85069"],["9fe734361fdc74f5c1b8535199ea8b964a495e1b4977146932c35cbff3909ef1","6079800cd5392cd27038f6e4ab1a4e10aa68b5bd2d06342cb7d5ed39e95d57fc"],["12259ba7fccba9ee35354c3cc854860379854bdb70db3c3e5848fa019666476a","771943cd4014272a2630e2b1f5bc01f1de1108322accfebf160fa464709440b7"],["b1c200a42635265dcb8e9a0f2b3333e83ea1e9970b38c9fd16a6aa1896791eda","910da053281a5874e713500b8ac15bf00b89195f00d00295b08dc19b0a62d82f"],["cf1134e8b2ce55403bb098b718286d7ea80ae6103e195b673bae78c5dbbecc11","5f4ea514465f3f964257b9025ad95e062857c23ffb006732aef0a04505a3a868"],["875ed4adce032f39795e1ff56050799761b558c4b90dc9b7f6f359a1c3901858","ef7674aec325bc8f5885b4527949b00e48598cb6ff10e1733d0217ed5957e401"],["efffc5c6c573e0a1805c3b7c9af1ddd103b314b367582fcc2a9473ce16dfcd3c","c4b0bfed83e7ed45b023c6ba7a6bede96870eaa01c931ec2e936edc2dbe4cefc"],["550e17001d4366674459eea132fba2f2e49e07544bad1fc47ae0305bae1ee06b","940c682bdfa37972d5cf0b739ca0a9af6ae9bad74f51bfe35945204b6a421ad"],["b55972bac57b26565f64a7150a306615cfe3abfc3ef1ebe343bc93fbf6f2936f","39d10c6864ece97cdd62c3fe5b32c14c9e77231835d12159a9d1166a1efadedb"],["bb001f899b8672e3122eac3c5f266f3a116cadb3152caacaa6abfc8a301f1784","518b6bdeb256b3bea0c4185f8808c1527cf375668091fa2560ced46c2bdf1bd4"],["69e33b1bfa56635c390a5355abd2710ae684e98fe364d503bd121c4ca9aaa80f","af96a747be8a8d05a156df100be2f8272478f6660cbc4daba0d233b010fb8d0c"],["ded811d79d41d97e5b0a0538ce2b59a39047e9b6c1bb0eec07f770ac43d7c280","5162ce6989b64df2d80941e5c8fb16ad7af679a2d50b8d76667d0198cc10559"],["40a7f3928444efacca57a27d3d0400f8b16abe2cf572ce356d1a752a6e87005c","9b1aa49fa30d33873c0ce5da198358b59dec8bd239795b7887ca8de62ce4b380"],["9e8f66827420ae63625e4b199e814e6a71fc8947c82e5ef5ac7ec6e8dc3521be","833fb31cd8b7fb8c520cbcee1c391962bf3cab119f0b1fb7a3ce5900885dfd70"],["d0b678534bb47e1b7452cf6451e0453c61b78f7537bd2feba5c77cca0553072b","b20bb3c1b7d85472b2ea3e92db3dcb1df6f1c2a4669949701b69c1fcc94a211c"],["b05e600fca161628458bf444a14b29b57c679c88fb13712f35e067ca5025ad4f","7e3e5e1038267ff0131367660d37feb3d468163c149af4aa304ac9aa23aa0e6c"],["d996f0efca59993c0db7c7d46a70e017d6e1ea889b9fd79a120654fbe55f2e1b","4b43f76448e60c116e78931b021a4435f1ea0f1389608a2c3a02e484dae4714a"],["e70b718ec0dd6cb4da308b4412c65ad76f72db78aa21eac2e39b2d2ce0eaff36","9592acb8f18e11965bcbed08fbc0e39dbffc96de70ce9296d7adc20a7b6f2700"],["fae2f26e7ced7542bd5db9ce1297a9a420d45f6a084aff468eb954fc1504a332","47673baa5bfcfa46c04dfc84ed9b023ba86329aab74d27b76951016dffafb4d3"],["48017e15e6317d4b1b7567638a5b30bdd3c316c6330039e3228d9c25c5a41b58","237d5791c965c96797a00d6435940f3b976f742c7df43179a56f1a0fec23363d"],["e80d6f9d0fb2ddaa1ea08ac6e9535c90fa6605658459e7bb0dffa5466f76580","d95d3ebe000427ea5bfa5b06d7715454a3eaf22d31673f0d3cb2226a6e931d16"],["54541f075fbd75fe977fd2eb88c93a6d18ae28273b9ba16a306ba4552bcc1939","85c50f8148bff67632a5e113ea1fc25916f31a1562a436be31f2b5426f525f20"],["ae428e2a7a73ba4a541ba20ba41e5b5c32209e3c16a36b04c09dcaf805072ce2","594c34a1d3022386420bb75f6c20b88f43afc27418939e12092fa58335dfa252"],["4766be7ee55cfa78578f3d2dba2486de57a614844cebcf8bfffcd789221e38f4","880730daf7f32d9c6a3af5f82856f8efa307a3e9e9695c93a8f6466fb6ef3a0"],["c64aee4bbea9da282e0aea9745dcdd80d5504b2398e5f1b1e3eb7eb4789ff85e","d47bba6d4039391a64f8573322562b9e6aad1d3aadf19cd627d3929b015961cd"],["487065b603bac9a1558ce3b5e173a174e38e25e78c832c46406941083ef079e0","932aab54695d9ad34d4315c2d13ebd2a8f5ebe866401dc944877dda5b810f3d7"],["2c1b3b1c599790f967bd4d951ffc181f507d7d16396c0d1dceb0a36e0018afc9","51bd3daf8d150f3458b393f5c0e42d7f3b483a7dd6857af971cabaf782ab9905"],["7bf067b5a0fae2ed13c9a7050c58e3c0d63bd1cc96eb619190156b83fb4ef655","52cc3cd3a5af8b065392eb84110696944ca3fd105def9d3721603b6335466d2b"],["682ff33b27c10b80f9598ea14a1852ac48634044bb07d9e3790a9a48c028c5c8","5e6a14fc36d8c5664a2c13c376551abe8197ae6af928f261d3176e6128763ea2"],["f52b50efc5c8068cef968a35cfce93cab0dbd1eb371de786e562aa90bc059fc5","660896517be150ad8d1308a56dc479e27e5a313b1aa43c71c9acda0b4269259b"],["ec42909fa266d4aa1f83a1ab92952cc2f2d110677b0fe099c7a3d354bbf5751b","80d3cc9b18106b50a9192ae737312ee63105ea7dd3f720c8c5d2c73e99e2961c"],["cf2ac419fb542c212e9378783b0d739afe3c421e2356593ec4f12498e7ea4dfd","550392c1106a33fb4fbc875589836806c1970a29ae4f27d9fecef182a8a52347"],["16b3f501e354f33110be0bc9d0cb5aabc01ac8102cbba33a26f2317788306a2","e29875ccebb1753ba249ef8a6899e2b8ca3f5da3a9bf1598f45d1e89bdb38b4"],["828bb85076230f1b9c96530e38aa1a29cb3dfe868708b8127ac81968f2b68ac8","685a3a5d1018351602adc360dcaa5fba02434270c693afd63402dc1636af46af"],["8f625459e2a5f83c8a66a00e3fd78ea2bacfa0a951245c74bd6b94cc6f8d0838","318ef5ef4cba1bcc81814dc8d4c05502ef7b94d3bc726fe107cf76578dac5010"],["1245401394147c30c1584cd9a14da8de1141dfb66500bdb245f432cacaa47532","f102cb981f8a8a28cc1e7fd1a847a073abc45445a0ed264c040004f760fc9cef"],["4d7c73eebd492614ffa55365a122efabb908f7e6e7501152f0f42fb288998988","adc3825f822addd4782d129f584c72154649387310e9e59ca13443660d36fe90"],["ffc90fc464a293f9730d9246bc005b2b4494732dfc3eaefaa9a7388fa60926fd","10a4dd3c7df6450dbc4f36c69d37f3c8b5e8a3a52f0174de53997a042d383336"],["c216ac7b6833e40eab554531a1accacecce2d0963ce1f23545ba19439cd86cdf","1430f8df8688204043ed242e7c9149cb3d9c4e85a02991e57a60463d73949714"],["dd11519fed69c92ce95c07b20e4a0324470dea9ba07cfa1191ff4d57b6397dee","712f03f9d0faf60393d8e2f7a746501f703e8c94f89f37cb3ff2961afe9cb6ba"],["43d7469712952e0fcd21cf7ec89d23c90da01d6921c23bc54a7571d5829ed9c7","b7d32348d903c95bd803794c678c0628a81dc41adfb59be979874276abd98d78"],["4fbc3f7269d8dc803ad1d04dc96294d03736f0f481eb0c1c4a24c610591560f9","b8fba8d4b83c692caf2c6fa85bf4bfd97f6908b36dbdffb948d23f4ef5bb263e"],["244881fe7f4f8db056edbcd73c8363134e1dc223fbdee196eb9e5a9a49930ef6","80a16d9c5d093255b3ddec9a7821b15dd85d30fb1b8f987167e22b0bbf2a5de9"],["969dc4d3d35ba6f1c980f2ad8bc7c9b3f107332d82e35b33a23194f8ccc0b5de","eae8da34a07031d340517c973fc3b4c16bacab58284fd9a523a033364c909408"],["ddafcb1ade01a9d9a5e4d1aa0534dbc0767910d70885ea1176434effd90c5d1b","456da40e7cee7dab2f9a35a44ec6060584a3ca98c6470c2f4a92b9f0d2de9a24"],["b04f042ed5e126ac7bd7eb61a87d83c9e0b3b8459dd18fae35f7e57de7f4904a","9a3126ae085c7134def4200a707d74ca59c7f858cc20d1c0a19acb6d6fc77cdb"]]}}]}},388:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return c});a(85);var n=a(125),s=a(159),r=a(763),i=a(129),o=a(128);class c extends i.a{constructor(e){super(),this.value=e}asBigInteger(){return this.value?n.a.ONE:n.a.ZERO}asBoolean(){return this.value}asBuffer(){return this.value?c.TRUE:c.FALSE}toContractParameter(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return new r.a(this.value)}serializeInternal(){const e=new s.a;return e.writeUInt8(o.a.Boolean),e.writeBoolean(this.value),e.toBuffer()}}c.TRUE=e.from([1]),c.FALSE=e.from([])}).call(this,a(92).Buffer)},389:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(85);var n=a(125),s=a(159),r=a(765),i=a(165),o=a(140),c=a(129),d=a(128),u=a(390);class l extends c.a{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(super(),this.value=e,t&&this.asBuffer().length>i.j)throw new o.b}asBigInteger(){return this.value}asBoolean(){return!this.value.isZero()}asBuffer(){return n.a.toSignedBuffer(this.value)}asStorageContextStackItem(e){let{currentBlockIndex:t,vm:a,scriptHash:n,callingScriptHash:s,entryScriptHash:r}=e;if(t<=a.storageContext.v0.index){let e;switch(this.asBigInteger().toNumber()){case 1:e=n;break;case 2:e=s;break;case 4:e=r}if(void 0!==e)return new u.a(e)}throw new o.u}toContractParameter(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return new r.a(this.value)}serializeInternal(){const e=new s.a;return e.writeUInt8(d.a.Integer),e.writeVarBytesLE(n.a.toSignedBuffer(this.value)),e.toBuffer()}}},390:function(e,t,a){"use strict";a.d(t,"a",function(){return i});a(85);var n=a(107),s=a(764),r=a(129);class i extends r.a{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.value=e,this.isReadOnly=t}asUInt160(){return this.value}asBoolean(){return void 0!==this.value}asBuffer(){return n.b.uInt160ToBuffer(this.value)}asStorageContextStackItem(e){return this}asReadOnly(){return new i(this.value,!0)}toContractParameter(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return new s.a(this.value)}}},391:function(e,t,a){"use strict";a.d(t,"a",function(){return i});a(85);var n=a(728),s=a(252),r=a(128);class i extends s.a{clone(){return new i(this.value.map(e=>e instanceof i?e.clone():e))}toStructuralKey(){return JSON.stringify(this.value.map(e=>e.toStructuralKey()))}equals(e){return void 0!==e&&(this===e||(e instanceof i?this.value.length===e.value.length&&n.a.zip(this.value,e.value).every(e=>{let[t,a]=e;return t.equals(a)}):this===e))}}i.type=r.a.Struct},392:function(e,t,a){"use strict";a.d(t,"a",function(){return f});a(85);var n=a(146),s=a.n(n),r=a(159),i=a(767),o=a(728),c=a(251),d=a(140),u=a(207),l=a(129),h=a(128);class f extends l.a{constructor(){let{referenceKeys:e=new Map,referenceValues:t=new Map}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.referenceID=Object(u.a)(),this.referenceKeys=e,this.referenceValues=t}toStructuralKey(){return"".concat(this.referenceID)}equals(e){return this===e}isMap(){return!1}asBoolean(){return!0}asBuffer(){throw new d.m}toContractParameter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;if(e.has(this))throw new d.a;const t=new Set([...e]);return t.add(this),new i.a(this.keysArray().map(e=>[e.toContractParameter(t),this.get(e).toContractParameter(t)]))}get size(){return this.referenceKeys.size}has(e){const t=e.toStructuralKey();return void 0!==this.referenceKeys.get(t)}get(e){const t=e.toStructuralKey(),a=this.referenceValues.get(t);if(void 0===a)throw new d.y;return a}set(e,t){const a=e.toStructuralKey();return this.referenceKeys.set(a,e),this.referenceValues.set(a,t),this}delete(e){const t=e.toStructuralKey();return this.referenceKeys.delete(t),this.referenceValues.delete(t),this}keys(){return new c.a(this.keysArray())}keysArray(){return[...this.referenceKeys.values()]}valuesArray(){return[...this.referenceValues.values()]}asMapStackItem(){return this}incrementInternal(e){return this.incrementInternalArray(this.keysArray(),e)+this.incrementInternalArray(this.valuesArray(),e)}decrementInternal(e){return this.decrementInternalArray(this.keysArray(),e)+this.decrementInternalArray(this.valuesArray(),e)}convertJSONInternal(e){return s()(o.a.zip(this.keysArray(),this.valuesArray()).map(t=>{let[a,n]=t;return[JSON.stringify(a.convertJSON(e)),n.convertJSON(e)]}))}serializeInternal(e){const t=new r.a;t.writeUInt8(h.a.Map);const a=this.keysArray();return t.writeVarUIntLE(a.length),a.forEach(a=>{t.writeBytes(a.serialize(e)),t.writeBytes(this.get(a).serialize(e))}),t.toBuffer()}}},393:function(e,t,a){"use strict";a.d(t,"a",function(){return n});class n{constructor(e){let{version:t}=e;this.version=void 0===t?this.constructor.VERSION:t}}n.VERSION=0},394:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"d",function(){return r}),a.d(t,"b",function(){return i}),a.d(t,"c",function(){return o}),a.d(t,"e",function(){return c}),a.d(t,"f",function(){return d});a(85);var n,s=a(254);!function(e){e[e.NoProperty=0]="NoProperty",e[e.HasStorage=1]="HasStorage",e[e.HasDynamicInvoke=2]="HasDynamicInvoke",e[e.Payable=4]="Payable",e[e.HasStorageDynamicInvoke=3]="HasStorageDynamicInvoke",e[e.HasStoragePayable=5]="HasStoragePayable",e[e.HasDynamicInvokePayable=6]="HasDynamicInvokePayable",e[e.HasStorageDynamicInvokePayable=7]="HasStorageDynamicInvokePayable"}(n||(n={}));const r=new Set([n.HasStorage,n.HasStorageDynamicInvoke,n.HasStoragePayable,n.HasStorageDynamicInvokePayable]),i=new Set([n.HasDynamicInvoke,n.HasStorageDynamicInvoke,n.HasDynamicInvokePayable,n.HasStorageDynamicInvokePayable]),o=new Set([n.Payable,n.HasStoragePayable,n.HasDynamicInvokePayable,n.HasStorageDynamicInvokePayable]),c=e=>{if((e=>void 0!==n[e])(e))return e;throw new s.a(e)},d=e=>{let{hasStorage:t,hasDynamicInvoke:a,payable:s}=e;return t&&a&&s?n.HasStorageDynamicInvokePayable:t&&a?n.HasStorageDynamicInvoke:t&&s?n.HasStoragePayable:a&&s?n.HasDynamicInvokePayable:a?n.HasDynamicInvoke:t?n.HasStorage:s?n.Payable:n.NoProperty}},709:function(e,t,a){"use strict";a.d(t,"a",function(){return c});a(94),a(85);var n=a(90),s=a(162),r=a(199),i=a(859),o=a(860);class c extends n.WitnessModel{constructor(){super(...arguments),this.equals=i.a.equals(c,this,e=>this.invocation.equals(e.invocation)&&this.verification.equals(e.verification)),this.toKeyString=i.a.toKeyString(c,()=>"".concat(this.invocation.toString("hex"),":").concat(this.verification.toString("hex"))),this.sizeInternal=i.a.lazy(()=>s.a.sizeOfVarBytesLE(this.invocation)+s.a.sizeOfVarBytesLE(this.verification))}static deserializeWireBase(e){let{reader:t}=e;return new this({invocation:t.readVarBytesLE(i.a.USHORT_MAX_NUMBER_PLUS_ONE),verification:t.readVarBytesLE(i.a.USHORT_MAX_NUMBER_PLUS_ONE)})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new o.a(e.buffer)})}static fromModel(e){return new this({invocation:e.invocation,verification:e.verification})}get size(){return this.sizeInternal()}serializeJSON(e){return{invocation:r.a.writeBuffer(this.invocation),verification:r.a.writeBuffer(this.verification)}}}},710:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n;a(184);!function(e){e[e.Transaction=0]="Transaction",e[e.Block=1]="Block",e[e.Consensus=2]="Consensus"}(n||(n={}))},711:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n,s=a(184);!function(e){e[e.Add=0]="Add",e[e.Modify=1]="Modify",e[e.Delete=2]="Delete"}(n||(n={}));const r=e=>{if((e=>void 0!==n[e])(e))return e;throw new s.d(e)}},714:function(e,t,a){"use strict";a.d(t,"h",function(){return v}),a.d(t,"g",function(){return S}),a.d(t,"e",function(){return I}),a.d(t,"c",function(){return T}),a.d(t,"i",function(){return x}),a.d(t,"b",function(){return E}),a.d(t,"f",function(){return k}),a.d(t,"d",function(){return B}),a.d(t,"a",function(){return A});a(36),a(85);var n=a(151),s=a.n(n),r=a(2007),i=a.n(r),o=a(107),c=a(152),d=a(2324),u=a(1980),l=a(709),h=a(1981),f=a(1983),b=a(728),p=a(2009),g=a(2010),y=a(2334),m=a(2335);const v=e=>{let{node:t,privateKey:a,context:n,consensusMessage:s}=e;const r=d.a.sign(new u.a({version:n.version,previousHash:n.previousHash,blockIndex:n.blockIndex,validatorIndex:n.myIndex,consensusMessage:s}),a);t.relayConsensusPayload(r)};function w(e){let{context:t,blockchain:a,consensusContext:n}=e;if(t.myIndex<0)return{context:t};if("primary"===t.type)return{context:t,timerSeconds:Math.max(0,a.settings.secondsPerBlock-(n.nowSeconds()-t.blockReceivedTimeSeconds))};const{secondsPerBlock:s}=a.settings;return{context:t,timerSeconds:s<<t.viewNumber+1}}const S=async e=>{let{blockchain:t,publicKey:a,consensusContext:n}=e;const r=await t.getValidators([]),c=t.currentBlock.timestamp,d=t.currentBlock.index+1,u=d%r.length,l=i()(r,e=>o.b.ecPointEqual(e,a));return w({context:new p.a({type:u===l?"primary":"backup",previousHash:t.currentBlock.hash,blockIndex:d,viewNumber:0,myIndex:l,primaryIndex:u,expectedView:s()(0,r.length).map(()=>0),validators:r,blockReceivedTimeSeconds:c}),blockchain:t,consensusContext:n})},I=e=>{let{node:t,context:a,viewNumber:n,consensusContext:s}=e;if(n<=0)throw new Error("Programming error");const{blockchain:r}=t;let i=a,o=(i.blockIndex-n)%i.validators.length;o<0&&(o+=i.validators.length);const c=o===i.myIndex?"primary":"backup";return w({blockchain:r,context:i="primary"===c&&i instanceof g.a?i.clone({type:c,primaryIndex:o,viewNumber:n}):Object(y.a)(i,{type:c,primaryIndex:o,viewNumber:n}),consensusContext:s})};async function T(e){let{node:t,context:a}=e;if(a.signatures.filter(e=>void 0!==e).length>=a.M&&a.transactionHashes.every(e=>void 0!==a.transactions[e])){const e={};for(let t=0,n=0;t<a.validators.length&&n<a.M;t+=1){const s=a.validators[t],r=a.signatures[t];void 0!==r&&(e[o.b.ecPointToHex(s)]=r,n+=1)}const n=c.a.createMultiSignatureWitness(a.M,a.validators,e,l.a),s=a.header.clone({transactions:a.transactionHashes.map(e=>a.transactions[e]).filter(b.a.notNull),script:n});return await t.relayBlock(s),{context:Object(m.a)(a)}}return{context:a}}const x=e=>{let{node:t,privateKey:a,context:n}=e;v({node:t,privateKey:a,context:n,consensusMessage:new h.a({viewNumber:n.viewNumber,newViewNumber:n.expectedView[n.myIndex]})})},E=e=>{let{context:t,viewNumber:a}=e;return t.viewNumber!==a&&t.expectedView.filter(e=>e===a).length>=t.M},k=e=>{let{blockchain:t,context:a,viewNumber:n,consensusContext:s}=e;const{primaryIndex:r,type:i}=(e=>{let{context:t,viewNumber:a}=e,n=(t.blockIndex-a)%t.validators.length;return n<0&&(n+=t.validators.length),{type:n===t.myIndex?"primary":"backup",primaryIndex:n}})({context:a,viewNumber:n});return w({blockchain:t,context:Object(y.a)(a,{type:i,primaryIndex:r,viewNumber:n}),consensusContext:s})},B=e=>{const t=[...e.expectedView];return t[e.myIndex]+=1,t},A=async e=>{let{context:t,node:a,privateKey:n,transaction:s,verify:r,consensusContext:i}=e,d=t;const{blockchain:u}=a;if(void 0!==await u.transaction.tryGet({hash:s.hash}))return{context:d};if(r){let e=!0;try{const{verifications:t}=await u.verifyTransaction({transaction:s,memPool:Object.values(d.transactions).filter(b.a.notNull)});e=t.every(e=>{let{failureMessage:t}=e;return void 0===t})}catch(t){e=!1}if(!e)return{context:d}}d=d.clone({transactions:Object.assign({},d.transactions,{[s.hashHex]:s})});const l=Object.values(d.transactions).length;if(d.transactionHashes.length===l){const e=await u.getValidators(Object.values(d.transactions).filter(b.a.notNull)),t=c.a.getConsensusAddress(e);if(o.b.uInt160Equal(t,d.header.nextConsensus)){const e=[...d.signatures];e[d.myIndex]=c.a.sign({message:d.header.message,privateKey:n});const t=d.cloneSignatureSent({signatures:e});return v({node:a,context:t,privateKey:n,consensusMessage:new f.a({viewNumber:t.viewNumber,signature:b.a.nullthrows(e[t.myIndex])})}),T({node:a,context:t})}return(e=>{let{context:t,node:a,privateKey:n,consensusContext:s}=e;const r=t.cloneViewChanging({expectedView:B(t)});x({context:r,node:a,privateKey:n});const i=r.expectedView[r.myIndex];return E({context:r,viewNumber:i})?k({blockchain:a.blockchain,context:r,viewNumber:i,consensusContext:s}):{context:r}})({context:d,node:a,privateKey:n,consensusContext:i})}return{context:d}}},728:function(e,t,a){"use strict";a.d(t,"a",function(){return r});a(85);var n=a(216),s=a.n(n);const r={nowSeconds:()=>Math.round(Date.now()/1e3),nullthrows:function(e){if(null==e)throw new Error("Unexpected null");return e},assertNever:function(e){},notNull:function(e){return null!=e},isPromise:function(e){return null!=e&&null!=e.then&&"function"==typeof e.then},zip:function(){return s()(...arguments)}}},733:function(e,t){},734:function(e,t){},737:function(e,t){},738:function(e,t){},760:function(e,t,a){"use strict";a.d(t,"a",function(){return m});a(85);var n=a(151),s=a.n(n),r=a(859),i=a(860),o=a(728),c=a(165),d=a(251),u=a(388),l=a(344),h=a(140),f=a(389),b=a(392),p=a(128),g=a(391);const y=e=>{const t=Object(p.b)(e.readUInt8());switch(t){case p.a.ByteArray:return new l.a(e.readVarBytesLE());case p.a.Boolean:return new u.a(e.readBoolean());case p.a.Integer:return new f.a(r.a.fromSignedBuffer(e.readVarBytesLE()));case p.a.InteropInterface:throw new h.z;case p.a.Array:case p.a.Struct:{const a=e.readVarUIntLE(c.f).toNumber(),n=s()(a).map(()=>y(e));return 128===t?new d.a(n):new g.a(n)}case p.a.Map:{const t=e.readVarUIntLE(c.f).toNumber(),a=new Map,n=new Map;return s()(t).forEach(()=>{const t=y(e),s=y(e),r=t.toStructuralKey();a.set(r,t),n.set(r,s)}),new b.a({referenceKeys:a,referenceValues:n})}default:throw o.a.assertNever(t),new Error("For TS")}},m=e=>y(new i.a(e))},761:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(125),s=a(162),r=a(199),i=a(126),o=a(90);class c extends i.a{constructor(e){super(),this.type=o.ContractParameterTypeModel.ByteArray,this.value=e,this.sizeInternal=n.a.lazy(()=>s.a.sizeOfVarBytesLE(this.value))}static deserializeWireBase(e){const{reader:t}=e;return super.deserializeContractParameterBaseWireBase(e),new this(t.readVarBytesLE())}get size(){return this.sizeInternal()}asBuffer(){return this.value}serializeWireBase(e){super.serializeWireBase(e),e.writeVarBytesLE(this.value)}serializeJSON(e){return{type:"ByteArray",value:r.a.writeBuffer(this.value)}}}},763:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return o});var n=a(125),s=a(162),r=a(126),i=a(90);class o extends r.a{constructor(e){super(),this.type=i.ContractParameterTypeModel.Boolean,this.value=e,this.sizeInternal=n.a.lazy(()=>s.a.sizeOfBoolean)}static deserializeWireBase(e){const{reader:t}=e;return super.deserializeContractParameterBaseWireBase(e),new this(t.readBoolean())}get size(){return this.sizeInternal()}asBuffer(){return this.value?o.TRUE:o.FALSE}asBoolean(){return this.value}serializeWireBase(e){super.serializeWireBase(e),e.writeBoolean(this.value)}serializeJSON(e){return{type:"Boolean",value:this.value}}}o.TRUE=e.from([1]),o.FALSE=e.from([0])}).call(this,a(92).Buffer)},764:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(125),s=a(162),r=a(107),i=a(199),o=a(126),c=a(90);class d extends o.a{constructor(e){super(),this.type=c.ContractParameterTypeModel.Hash160,this.value=e,this.sizeInternal=n.a.lazy(()=>s.a.sizeOfUInt160)}static deserializeWireBase(e){const{reader:t}=e;return super.deserializeContractParameterBaseWireBase(e),new this(t.readUInt160())}get size(){return this.sizeInternal()}asBuffer(){return r.b.uInt160ToBuffer(this.value)}serializeWireBase(e){super.serializeWireBase(e),e.writeUInt160(this.value)}serializeJSON(e){return{type:"Hash160",value:i.a.writeUInt160(this.value)}}}},765:function(e,t,a){"use strict";a.d(t,"a",function(){return o});a(94);var n=a(125),s=a(162),r=a(126),i=a(90);class o extends r.a{constructor(e){super(),this.type=i.ContractParameterTypeModel.Integer,this.value=e,this.sizeInternal=n.a.lazy(()=>s.a.sizeOfVarBytesLE(n.a.toSignedBuffer(this.value)))}static deserializeWireBase(e){const{reader:t}=e;return super.deserializeContractParameterBaseWireBase(e),new this(n.a.fromSignedBuffer(t.readVarBytesLE()))}get size(){return this.sizeInternal()}asBoolean(){return!this.value.isZero()}asBuffer(){return n.a.toSignedBuffer(this.value)}serializeWireBase(e){super.serializeWireBase(e),e.writeVarBytesLE(n.a.toSignedBuffer(this.value))}serializeJSON(e){return{type:"Integer",value:this.value.toString(10)}}}},766:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(125),s=a(162),r=a(126),i=a(90);class o extends r.a{constructor(e){super(),this.type=i.ContractParameterTypeModel.Array,this.value=e,this.sizeInternal=n.a.lazy(()=>s.a.sizeOfArray(this.value,e=>e.size))}get size(){return this.sizeInternal()}asBoolean(){return this.value.length>0}serializeWireBase(e){super.serializeWireBase(e),e.writeArray(this.value,t=>t.serializeWireBase(e))}serializeJSON(e){return{type:"Array",value:this.value.map(t=>t.serializeJSON(e))}}}},767:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(125),s=a(162),r=a(126),i=a(90);class o extends r.a{constructor(e){super(),this.type=i.ContractParameterTypeModel.Map,this.value=e,this.sizeInternal=n.a.lazy(()=>s.a.sizeOfArray(this.value,e=>e[0].size+e[1].size))}get size(){return this.sizeInternal()}asBoolean(){return this.value.length>0}serializeWireBase(e){super.serializeWireBase(e),e.writeArray(this.value,t=>e.writeArray(t,t=>t.serializeWireBase(e)))}serializeJSON(e){return{type:"Map",value:this.value.map(t=>[t[0].serializeJSON(e),t[1].serializeJSON(e)])}}}},770:function(e,t,a){"use strict";a.d(t,"a",function(){return s});a(94),a(85);var n=a(859);function s(e){class t extends e{constructor(){super(...arguments),this.equals=n.a.equals(t,this,e=>this.usage===e.usage&&this.value.equals(e.value)),this.toKeyString=()=>"".concat(t.name,":").concat(this.usage,":").concat(this.value.toString("hex"))}static deserializeAttributeWireBase(e){let{reader:t}=e;return{usage:t.readUInt8()}}serializeJSON(e){throw new Error("Not Implemented")}}return t}},771:function(e,t,a){"use strict";a.d(t,"a",function(){return l});a(36),a(85);var n=a(107),s=a(152),r=a(162),i=a(199),o=a(184),c=a(90),d=a(859),u=a(709);class l{constructor(e){let{version:t=0,previousHash:a,merkleRoot:i,timestamp:o,index:u,consensusData:h,nextConsensus:f,script:b,hash:p}=e;this.equals=d.a.equals(this.constructor,this,e=>n.b.uInt256Equal(this.hash,e.hash)),this.toKeyString=d.a.toKeyString(l,()=>this.hashHex),this.getScriptHashesForVerifying=d.a.lazyAsync(async e=>{let{getHeader:t}=e;if(0===this.index)return new Set([n.b.uInt160ToHex(s.a.toScriptHash(this.script.verification))]);const a=await t({hashOrIndex:this.previousHash});return new Set([n.b.uInt160ToHex(a.nextConsensus)])}),this.serializeUnsigned=Object(c.createSerializeWire)(this.serializeUnsignedBase.bind(this)),this.serializeWire=Object(c.createSerializeWire)(this.serializeWireBase.bind(this)),this.hashHexInternal=d.a.lazy(()=>n.b.uInt256ToHex(this.hash)),this.messageInternal=d.a.lazy(()=>this.serializeUnsigned()),this.sizeInternal=d.a.lazy(()=>r.a.sizeOfUInt32LE+r.a.sizeOfUInt256+r.a.sizeOfUInt256+r.a.sizeOfUInt32LE+r.a.sizeOfUInt32LE+r.a.sizeOfUInt64LE+r.a.sizeOfUInt160+r.a.sizeOfUInt8+this.script.size+this.sizeExclusive()),this.sizeExclusive=()=>0,this.version=t,this.previousHash=a,this.merkleRoot=i,this.timestamp=o,this.index=u,this.consensusData=h,this.nextConsensus=f,this.scriptInternal=b;const g=p;this.hashInternal=void 0===g?d.a.lazy(()=>s.a.hash256(this.message)):()=>g}static deserializeBlockBaseWireBase(e){const{reader:t}=e,a=t.readUInt32LE(),s=t.readUInt256(),r=t.readUInt256(),i=t.readUInt32LE(),o=t.readUInt32LE(),c=t.readUInt64LE(),d=t.readUInt160();if(1!==t.readUInt8())throw new n.a("Expected BinaryReader's readUInt8(0) to be 1. Received: ".concat(t.readUInt8()));return{version:a,previousHash:s,merkleRoot:r,timestamp:i,index:o,consensusData:c,nextConsensus:d,script:u.a.deserializeWireBase(e)}}get hash(){return this.hashInternal()}get hashHex(){return this.hashHexInternal()}get message(){return this.messageInternal()}get size(){return this.sizeInternal()}get script(){if(void 0===this.scriptInternal)throw new o.e(n.b.uInt256ToString(this.hash));return this.scriptInternal}serializeUnsignedBase(e){e.writeUInt32LE(this.version),e.writeUInt256(this.previousHash),e.writeUInt256(this.merkleRoot),e.writeUInt32LE(this.timestamp),e.writeUInt32LE(this.index),e.writeUInt64LE(this.consensusData),e.writeUInt160(this.nextConsensus)}serializeWireBase(e){this.serializeUnsignedBase(e),e.writeUInt8(1),this.script.serializeWireBase(e)}serializeBlockBaseJSON(e){return{version:this.version,hash:i.a.writeUInt256(this.hash),size:this.size,previousblockhash:i.a.writeUInt256(this.previousHash),merkleroot:i.a.writeUInt256(this.merkleRoot),time:this.timestamp,index:this.index,nonce:i.a.writeUInt64LE(this.consensusData),nextconsensus:s.a.scriptHashToAddress({addressVersion:e.addressVersion,scriptHash:this.nextConsensus}),script:this.script.serializeJSON(e),confirmations:0}}}},772:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(107),s=a(90),r=a(162),i=a(1402),o=a(859),c=a(860);class d{constructor(e){let{hash:t,input:a}=e;this.equals=o.a.equals(d,this,e=>n.b.uInt160Equal(this.hash,e.hash)&&this.input.equals(e.input)),this.serializeWire=Object(s.createSerializeWire)(this.serializeWireBase.bind(this)),this.hash=t,this.hashHex=n.b.uInt160ToHex(t),this.input=a,this.sizeInternal=o.a.lazy(()=>r.a.sizeOfUInt160+this.input.size)}static deserializeWireBase(e){const{reader:t}=e,a=t.readUInt160(),n=i.a.deserializeWireBase(e);return new d({hash:a,input:n})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new c.a(e.buffer)})}get size(){return this.sizeInternal()}serializeWireBase(e){e.writeUInt160(this.hash),this.input.serializeWireBase(e)}}},775:function(e,t,a){"use strict";a.d(t,"a",function(){return n});const n={executeScripts:a(1947).a}},776:function(e,t,a){"use strict";a.d(t,"O",function(){return o}),a.d(t,"I",function(){return c}),a.d(t,"f",function(){return d}),a.d(t,"y",function(){return u}),a.d(t,"R",function(){return l}),a.d(t,"K",function(){return h}),a.d(t,"B",function(){return f}),a.d(t,"b",function(){return b}),a.d(t,"J",function(){return p}),a.d(t,"x",function(){return g}),a.d(t,"C",function(){return y}),a.d(t,"d",function(){return m}),a.d(t,"S",function(){return v}),a.d(t,"Q",function(){return w}),a.d(t,"W",function(){return S}),a.d(t,"V",function(){return I}),a.d(t,"T",function(){return T}),a.d(t,"U",function(){return x}),a.d(t,"D",function(){return E}),a.d(t,"H",function(){return k}),a.d(t,"L",function(){return B}),a.d(t,"M",function(){return A}),a.d(t,"z",function(){return O}),a.d(t,"G",function(){return N}),a.d(t,"F",function(){return U}),a.d(t,"j",function(){return C}),a.d(t,"k",function(){return H}),a.d(t,"r",function(){return z}),a.d(t,"s",function(){return P}),a.d(t,"t",function(){return R}),a.d(t,"o",function(){return M}),a.d(t,"u",function(){return V}),a.d(t,"n",function(){return _}),a.d(t,"m",function(){return D}),a.d(t,"p",function(){return L}),a.d(t,"q",function(){return K}),a.d(t,"h",function(){return G}),a.d(t,"g",function(){return W}),a.d(t,"a",function(){return F}),a.d(t,"A",function(){return j}),a.d(t,"c",function(){return Y}),a.d(t,"P",function(){return J}),a.d(t,"l",function(){return q}),a.d(t,"E",function(){return Z}),a.d(t,"i",function(){return X}),a.d(t,"v",function(){return $}),a.d(t,"N",function(){return Q}),a.d(t,"e",function(){return ee}),a.d(t,"w",function(){return te});a(94),a(85);var n=a(107),s=a(1429),r=a(831);const i=(e,t)=>{const{pc:a}=e,r=e.stack.map(e=>e.toString()).join("\n");return"".concat(t,"\nPC:").concat(a,"\nStack:\n").concat(r,"\nLine:").concat((e=>{try{const t=[...Object(s.a)(e.code).entries()].find(t=>{let[a,{pc:n}]=t;return e.pc===n});return void 0===t?1:t[0]}catch(e){return 1}})(e),"\nScript Hash:").concat(n.b.uInt160ToString(e.scriptHash))},o=Object(r.a)("VM_ERROR",e=>i(e,"Script execution threw an Error")),c=Object(r.a)("VM_ERROR",e=>i(e,"Shift value too large")),d=Object(r.a)("VM_ERROR",e=>i(e,"Container too large")),u=Object(r.a)("VM_ERROR",e=>i(e,"Item too large")),l=Object(r.a)("VM_ERROR",(e,t)=>i(e,"Unknown op: ".concat(t))),h=Object(r.a)("VM_ERROR",(e,t,a,n)=>i(e,"Stack Underflow. Op: ".concat(t,". Stack Length: ").concat(a,". ")+"Expected: ".concat(n))),f=Object(r.a)("VM_ERROR",(e,t)=>i(e,"Number too large to be represented in Javascript: ".concat(t.toString(10)))),b=Object(r.a)("VM_ERROR",e=>i(e,"Stack Underflow.")),p=Object(r.a)("VM_ERROR",e=>i(e,"Stack Overflow")),g=Object(r.a)("VM_ERROR",e=>i(e,"Invocation Stack Overflow")),y=Object(r.a)("VM_ERROR",e=>i(e,"Out of GAS")),m=Object(r.a)("VM_ERROR",e=>i(e,"Code Overflow")),v=Object(r.a)("VM_ERROR",(e,t)=>i(e,"Unknown SysCall: ".concat(t))),w=(Object(r.a)("VM_ERROR",e=>i(e,"Unnown Op")),Object(r.a)("VM_ERROR",e=>i(e,"Unknown Error"))),S=Object(r.a)("VM_ERROR",e=>i(e,"XTUCK Negative Index")),I=Object(r.a)("VM_ERROR",e=>i(e,"XSWAP Negative Index")),T=Object(r.a)("VM_ERROR",e=>i(e,"XDROP Negative Index")),x=Object(r.a)("VM_ERROR",e=>i(e,"XDROP Underflow")),E=Object(r.a)("VM_ERROR",e=>i(e,"PICK Negative Index")),k=Object(r.a)("VM_ERROR",e=>i(e,"ROLL Negative Index")),B=Object(r.a)("VM_ERROR",e=>i(e,"SUBSTR Negative End")),A=Object(r.a)("VM_ERROR",e=>i(e,"SUBSTR Negative Start")),O=Object(r.a)("VM_ERROR",e=>i(e,"LEFT Negative Index")),N=Object(r.a)("VM_ERROR",e=>i(e,"RIGHT Negative Index")),U=Object(r.a)("VM_ERROR",e=>i(e,"RIGHT Length Less Than Index")),C=Object(r.a)("VM_ERROR",e=>i(e,"Invalid Asset Type.")),H=Object(r.a)("VM_ERROR",e=>i(e,"Invalid CHECKMULTISIG Arguments")),z=Object(r.a)("VM_ERROR",e=>i(e,"Invalid PACK Count")),P=Object(r.a)("VM_ERROR",(e,t,a)=>i(e,"Invalid PICKITEM Index: ".concat(t,". Value: ").concat(a))),R=Object(r.a)("VM_ERROR",(e,t)=>i(e,"Invalid REMOVE Index: ".concat(t))),M=Object(r.a)("VM_ERROR",e=>i(e,"Invalid HASKEY Index")),V=Object(r.a)("VM_ERROR",e=>i(e,"Invalid SETITEM Index")),_=(Object(r.a)("VM_ERROR",e=>i(e,"Invalid CheckWitness Arguments")),Object(r.a)("VM_ERROR",e=>i(e,"Invalid GETHEADER Arguments"))),D=Object(r.a)("VM_ERROR",(e,t)=>i(e,"Invalid GETBLOCK Argument: "+"".concat(void 0===t?"null":t.toString("hex")))),L=Object(r.a)("VM_ERROR",e=>i(e,"Invalid Index.")),K=Object(r.a)("VM_ERROR",e=>i(e,"Expected InvocationTransaction.")),G=(Object(r.a)("VM_ERROR",e=>i(e,"Expected ClaimTransaction.")),Object(r.a)("VM_ERROR",(e,t)=>i(e,"Contract Does Not Have Storage: ".concat(t)))),W=Object(r.a)("VM_ERROR",(e,t)=>i(e,"Contract Does Not Have Dynamic Invoke: ".concat(t))),F=(Object(r.a)("VM_ERROR",e=>i(e,"Too Many Votes")),Object(r.a)("VM_ERROR",e=>i(e,"Account Frozen"))),j=Object(r.a)("VM_ERROR",e=>i(e,"Ineligible To Vote")),Y=Object(r.a)("VM_ERROR",e=>i(e,"Bad Witness")),J=Object(r.a)("VM_ERROR",e=>i(e,"Unexpected Script Container")),q=(Object(r.a)("VM_ERROR",e=>i(e,"Invalid Get Storage Context")),Object(r.a)("VM_ERROR",e=>i(e,"Invalid Contract.GetStorageContext context"))),Z=Object(r.a)("VM_ERROR",e=>i(e,"StorageContext is read only")),X=Object(r.a)("VM_ERROR",(e,t,a)=>i(e,"Insufficient return values. Found ".concat(t,", expected ").concat(a))),$=Object(r.a)("VM_ERROR",(e,t,a)=>i(e,"Invalid tail call return value count. Found ".concat(t,", expected ").concat(a))),Q=Object(r.a)("VM_ERROR",i),ee=Object(r.a)("VM_ERROR",(e,t)=>i(e,"Storage at ".concat(t.toString("hex")," is read only"))),te=Object(r.a)("INVALID_VERIFY_SYSCALL_ERROR",(e,t)=>i(e,"Syscall ".concat(t," is not allowed during verification")))},778:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n,s=a(184);!function(e){e[e.ChangeView=0]="ChangeView",e[e.PrepareRequest=32]="PrepareRequest",e[e.PrepareResponse=33]="PrepareResponse"}(n||(n={}));const r=e=>{if((e=>void 0!==n[e])(e))return e;throw new s.b(e)}},780:function(e,t,a){"use strict";a.d(t,"a",function(){return s});a(85);var n=a(107);class s{constructor(e){let{type:t,previousHash:a,blockIndex:n,viewNumber:s,myIndex:r,primaryIndex:i,expectedView:o,validators:c,blockReceivedTimeSeconds:d}=e;this.version=0,this.type=t,this.previousHash=a,this.blockIndex=n,this.viewNumber=s,this.myIndex=r,this.primaryIndex=i,this.expectedView=o,this.validators=c,this.blockReceivedTimeSeconds=d}get M(){return Math.floor(this.validators.length-(this.validators.length-1)/3)}cloneExpectedView(e){throw new Error("Not Implemented")}toJSON(){return{class:this.constructor.name,version:this.version,type:this.type,previousHash:n.b.uInt256ToString(this.previousHash),blockIndex:this.blockIndex,viewNumber:this.viewNumber,myIndex:this.myIndex,primaryIndex:this.primaryIndex,expectedView:[...this.expectedView],validators:this.validators.map(e=>n.b.ecPointToString(e)),blockReceivedTimeSeconds:this.blockReceivedTimeSeconds}}}},80:function(e,t,a){"use strict";a.r(t);var n=a(2289);a(191).a.expose(n.a,self)},831:function(e,t,a){"use strict";a.d(t,"a",function(){return n});a(85);const n=(e,t)=>(class extends Error{constructor(){super(t(...arguments))}get name(){return"".concat(super.name," [").concat(e,"]")}get code(){return e}})},845:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s});var n;a(143);!function(e){e.SERVICE="service",e.COMPONENT="component",e.DB_INSTANCE="db.instance",e.DB_STATEMENT="db.statement",e.DB_TYPE="db.type",e.DB_USER="db.user",e.ERROR="error",e.ERROR_KIND="error.kind",e.ERROR_OBJECT="error.object",e.ERROR_STACK="stack",e.HTTP_METHOD="http.method",e.HTTP_STATUS_CODE="http.status_code",e.HTTP_URL="http.url",e.MESSAGE_BUS_DESTINATION="message_bus.destination",e.PEER_ADDRESS="peer.address",e.PEER_HOSTNAME="peer.hostname",e.PEER_IPV4="peer.ipv4",e.PEER_IPV6="peer.ipv6",e.PEER_PORT="peer.port",e.PEER_SERVICE="peer.service",e.SAMPLING_PRIORITY="sampling.priority",e.SPAN_KIND="span.kind",e.DB_STATEMENT_SUMMARY="db.statement.summary",e.HTTP_PATH="http.path",e.HTTP_FULLPATH="http.full_path",e.HTTP_USER_AGENT="http.user_agent",e.HTTP_REQUEST_SIZE="http.request.size",e.HTTP_HEADERS="http.headers",e.HTTP_REQUEST_PROTOCOL="http.request.protocol",e.HTTP_REQUEST_QUERY="http.request.query",e.RPC_METHOD="rpc.method",e.RPC_TYPE="rpc.type",e.PLUGIN_NAME="plugin.name",e.RESOURCETYPE_NAME="resource_type.name",e.NODE_NAME="node.name",e.OP_CODE="neo.op.code",e.NEO_ADDRESS="neo.address",e.NODE_OPTIONSPATH="node.options_path",e.NEO_TRANSACTION_HASH="neo.transaction.hash",e.NEO_TRANSACTION_TYPE="neo.transaction.type",e.NEO_TRANSACTION_FOUND="neo.transaction.found",e.NEO_CONSENSUS_HASH="neo.consensus.hash",e.NEO_BLOCK_INDEX="neo.block.index",e.CALL_METHOD="call.method",e.INVOKE_METHOD="invoke.method",e.INVOKE_RAW_METHOD="invoke_raw.method",e.JSONRPC_TYPE="jsonrpc.type",e.COMMAND_NAME="command.name"}(n||(n={}));const s=e=>({name:e.replace(/\./g,"_")})},846:function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return i});var n=a(588);a(752);const s=n.a.tracer,r=function(){},i={createView:r,registerView:r,createMeasureDouble:r,createMeasureInt64:r,record:r,clear:r,getMetrics:r,registerExporter:r,unregisterExporter:r,withTagContext:r,getCurrentTagContext:r}},851:function(e,t,a){"use strict";a.d(t,"a",function(){return n});const n={PRIVATE_NET_PRIVATE_KEY:"L4qhHtwbiAMu1nrSmsTP5a3dJbxA3SNS6oheKnKd8E7KTJyCLcUv",PRIVATE_NET_PUBLIC_KEY:"0248be3c070df745a60f3b8b494efcc6caf90244d803a9a72fe95d9bae2120ec70"}},859:function(e,t,a){"use strict";a.d(t,"a",function(){return h});a(36),a(94),a(85);var n=a(280),s=a.n(n),r=a(151),i=a.n(r),o=a(125),c=a(122),d=a.n(c),u=a(101),l=a(194);const h=Object.assign({},o.a,{toASCII:e=>{let t="";return i()(e.length).forEach(a=>{t+=String.fromCharCode(e.readUInt8(a))}),t},toUTF8:e=>e.toString("utf8"),calculateClaimAmount:async e=>{let{coins:t,decrementInterval:a,generationAmount:n,getSystemFee:r}=e;const i=Object.values(s()(t,e=>"".concat(e.startHeight,":").concat(e.endHeight)));return(await Promise.all(i.map(async e=>{const{startHeight:t,endHeight:s}=e[0];let i=o.a.ZERO,c=Math.floor(t/a);if(c<n.length){let e=t%a,r=Math.floor(s/a),o=s%a;for(r>=n.length&&(r=n.length,o=0),0===o&&(r-=1,o=a);c<r;)i=i.addn((a-e)*n[c]),c+=1,e=0;i=i.addn((o-e)*n[c])}const[d,u]=await Promise.all([r(s-1),0===t?Promise.resolve(o.a.ZERO):r(t-1)]);return i=i.add(d.sub(u).div(o.a.ONE_HUNDRED_MILLION)),[e.reduce((e,t)=>{let{value:a}=t;return e.add(a)},o.a.ZERO),i]}))).reduce((e,t)=>{let[a,n]=t;return e.add(a.div(o.a.ONE_HUNDRED_MILLION).mul(n))},o.a.ZERO)},randomUInt64:()=>new u.BN(Object(l.randomBytes)(8).toString("hex"),16),toKeyString:(e,t)=>()=>"".concat(e.name,":").concat(t()),equals:function(e,t,a){return n=>null!=n&&(t===n||n instanceof e&&a(n))},lazyAsync:function(e){let t;return async a=>(void 0===t&&(t=e(a)),t)},lazyOrValue:function(e){let t="function"==typeof e?{type:"lazy",getValue:e}:{type:"evaluated",value:e};return()=>("lazy"===t.type&&(t={type:"evaluated",value:t.getValue()}),t.value)},weightedAverage:function(e){let t=new d.a(0),a=new d.a(0);return e.forEach(e=>{t=t.plus(e.weight),a=a.plus(e.weight.times(e.value))}),a.isEqualTo(0)||t.isEqualTo(0)?0:a.div(t).integerValue(d.a.ROUND_FLOOR).toNumber()},weightedFilter:function(e,t,a,n){const s=new d.a(t),r=new d.a(a),i=e=>new d.a(n(e).toString(10)),o=e.reduce((e,t)=>e.plus(i(t)),new d.a(0));let c=new d.a(0),u=new d.a(0);const l=[];for(const t of e){if(u.gte(r))break;let e=i(t);const a=u;(u=(c=c.plus(e)).div(o)).lte(s)||(a.lt(s)?e=u.gt(r)?r.minus(s).times(o):u.minus(s).times(o):u.gt(r)&&(e=r.minus(a).times(o)),l.push([t,e.gte(0)?e.integerValue(d.a.ROUND_FLOOR):e.integerValue(d.a.ROUND_CEIL)]))}return l}})},860:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return d});a(94),a(85);var n=a(151),s=a.n(n),r=a(762),i=a.n(r),o=a(107),c=a(101);class d{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.buffer=e,this.mutableIndex=t}get index(){return this.mutableIndex}get remaining(){return this.buffer.length-this.mutableIndex}get remainingBuffer(){return this.buffer.slice(this.mutableIndex)}hasMore(){return this.mutableIndex<this.buffer.byteLength}clone(){return new d(this.buffer,this.mutableIndex)}readBytes(e){this.checkRead(e);const t=this.buffer.slice(this.mutableIndex,this.mutableIndex+e);return this.mutableIndex+=e,t}readInt8(){this.checkRead(1);const e=this.buffer.readInt8(this.mutableIndex);return this.mutableIndex+=1,e}readUInt8(){this.checkRead(1);const e=this.buffer.readUInt8(this.mutableIndex);return this.mutableIndex+=1,e}readBoolean(){return 0!==this.readBytes(1)[0]}readInt16LE(){this.checkRead(2);const e=this.buffer.readInt16LE(this.mutableIndex);return this.mutableIndex+=2,e}readUInt16LE(){this.checkRead(2);const e=this.buffer.readUInt16LE(this.mutableIndex);return this.mutableIndex+=2,e}readUInt16BE(){this.checkRead(2);const e=this.buffer.readUInt16BE(this.mutableIndex);return this.mutableIndex+=2,e}readInt32LE(){this.checkRead(4);const e=this.buffer.readInt32LE(this.mutableIndex);return this.mutableIndex+=4,e}readUInt32LE(){this.checkRead(4);const e=this.buffer.readUInt32LE(this.mutableIndex);return this.mutableIndex+=4,e}readUInt64LE(){return new c.BN(this.readBytes(8),"le")}readInt64LE(){const e=this.readBytes(8);return new c.BN(e,"le").fromTwos(8*e.length)}readUInt160(){return o.b.bufferToUInt160(this.readBytes(o.b.UINT160_BUFFER_BYTES))}readUInt256(){return o.b.bufferToUInt256(this.readBytes(o.b.UINT256_BUFFER_BYTES))}readFixed8(){return this.readInt64LE()}readFixedString(t){const a=i()([...this.readBytes(t)],e=>0!==e);return e.from(a).toString("utf8")}readArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777216;const a=this.readVarUIntLE(new c.BN(t)).toNumber();return s()(a).map(e)}readObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777216;const a=this.readVarUIntLE(new c.BN(t)).toNumber();return s()(a).reduce(t=>{const{key:a,value:n}=e();return Object.assign({},t,{[a]:n})},{})}readVarBytesLE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16777216;return this.readBytes(this.readVarUIntLE(new c.BN(e)).toNumber())}readVarUIntLE(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c.BN("18446744073709551615",10);const t=this.readUInt8();let a;switch(t){case 253:a=new c.BN(this.readUInt16LE());break;case 254:a=new c.BN(this.readUInt32LE());break;case 255:a=this.readUInt64LE();break;default:a=new c.BN(t)}if(a.gt(e))throw new o.a("Integer too large: ".concat(a.toString(10)," > ").concat(e.toString(10)));return a}readVarString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16777216;return this.readVarBytesLE(e).toString("utf8")}readECPoint(){const t=this.readBytes(1);return t[0]===o.b.ECPOINT_INFINITY_BYTE?o.b.ECPOINT_INFINITY:o.b.bufferToECPoint(e.concat([t,this.readBytes(o.b.ECPOINT_BUFFER_BYTES-1)]))}checkRead(e){if(this.remaining<e)throw new o.a("Insufficient bytes remaining (".concat(this.remaining,"): ").concat(e))}}}).call(this,a(92).Buffer)},861:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(90),s=a(254);class r extends n.TransactionBaseModel{constructor(e){let{version:t,attributes:a,inputs:r,outputs:i,scripts:o,hash:c}=e;if(super({version:t,type:n.TransactionTypeModel.Issue,attributes:a,inputs:r,outputs:i,scripts:o,hash:c}),0!==this.version)throw new s.b(0,this.version)}clone(e){let{scripts:t=this.scripts,attributes:a=this.attributes,inputs:n=this.inputs,outputs:s=this.outputs}=e;return new this.constructor({version:this.version,attributes:a,inputs:n,outputs:s,scripts:t})}}},862:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return d}),a.d(t,"b",function(){return u});a(123);var n=a(90),s=a(125),r=a(152),i=a(107),o=a(393),c=a(394);class d extends o.a{constructor(e){let{version:t,script:a,parameterList:o,returnType:d,name:u,codeVersion:l,author:h,email:f,description:b,contractProperties:p}=e;super({version:t}),this.serializeWire=Object(n.createSerializeWire)(this.serializeWireBase.bind(this)),this.hashInternal=s.a.lazy(()=>r.a.toScriptHash(this.script)),this.hashHexInternal=s.a.lazy(()=>i.b.uInt160ToHex(this.hash)),this.script=a,this.parameterList=o,this.returnType=d,this.name=u,this.codeVersion=l,this.author=h,this.email=f,this.description=b,this.contractProperties=p,this.hasStorage=c.d.has(this.contractProperties),this.hasDynamicInvoke=c.b.has(this.contractProperties),this.payable=c.c.has(this.contractProperties)}get hash(){return this.hashInternal()}get hashHex(){return this.hashHexInternal()}serializeWireBase(e){u({writer:e,contract:this})}}const u=t=>{let{writer:a,contract:n,publishVersion:s}=t;a.writeVarBytesLE(n.script),a.writeVarBytesLE(e.from(n.parameterList)),a.writeUInt8(n.returnType),(void 0===s||s>=1)&&a.writeUInt8(n.contractProperties),a.writeVarString(n.name),a.writeVarString(n.codeVersion),a.writeVarString(n.author),a.writeVarString(n.email),a.writeVarString(n.description)}}).call(this,a(92).Buffer)},870:function(e,t,a){"use strict";a.d(t,"a",function(){return c});a(36),a(85);var n=a(162),s=a(107),r=a(771),i=a(859),o=a(860);class c extends r.a{constructor(){super(...arguments),this.sizeExclusive=i.a.lazy(()=>n.a.sizeOfUInt8)}static deserializeWireBase(e){const{reader:t}=e,a=super.deserializeBlockBaseWireBase(e);if(0!==t.readUInt8())throw new s.a("Expected Header BinaryReader readUInt8(0) to be 0. Received: ".concat(t.readUInt8()));return new this({version:a.version,previousHash:a.previousHash,merkleRoot:a.merkleRoot,timestamp:a.timestamp,index:a.index,consensusData:a.consensusData,nextConsensus:a.nextConsensus,script:a.script})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new o.a(e.buffer)})}serializeWireBase(e){super.serializeWireBase(e),e.writeUInt8(0)}async serializeJSON(e){return super.serializeBlockBaseJSON(e)}}},871:function(e,t,a){"use strict";(function(e){a.d(t,"a",function(){return l}),a.d(t,"c",function(){return h}),a.d(t,"b",function(){return f});a(123),a(85);var n=a(107),s=a(199),r=a(90),i=a(162),o=a(862),c=a(394),d=a(859),u=a(860);class l extends o.a{constructor(){super(...arguments),this.equals=d.a.equals(l,this,e=>n.b.uInt160Equal(this.hash,e.hash)),this.toKeyString=d.a.toKeyString(l,()=>this.hashHex),this.contractSizeInternal=d.a.lazy(()=>h({script:this.script,parameterList:this.parameterList,name:this.name,codeVersion:this.codeVersion,author:this.author,email:this.email,description:this.description}))}static deserializeWireBase(e){return f({context:e.context,reader:e.reader})}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new u.a(e.buffer)})}get size(){return this.contractSizeInternal()}serializeJSON(e){return{version:this.version,hash:s.a.writeUInt160(this.hash),script:s.a.writeBuffer(this.script),parameters:this.parameterList.map(r.toJSONContractParameterType),returntype:Object(r.toJSONContractParameterType)(this.returnType),name:this.name,code_version:this.codeVersion,author:this.author,email:this.email,description:this.description,properties:{storage:this.hasStorage,dynamic_invoke:this.hasDynamicInvoke,payable:this.payable}}}}const h=t=>{let{script:a,parameterList:n,name:s,codeVersion:r,author:o,email:c,description:d,publishVersion:u}=t;return i.a.sizeOfVarBytesLE(a)+i.a.sizeOfVarBytesLE(e.from(n))+i.a.sizeOfUInt8+(void 0===u?i.a.sizeOfBoolean:0)+i.a.sizeOfVarString(s)+i.a.sizeOfVarString(r)+i.a.sizeOfVarString(o)+i.a.sizeOfVarString(c)+i.a.sizeOfVarString(d)},f=e=>{let{reader:t,publishVersion:a}=e;const n=t.readVarBytesLE(),s=[...t.readVarBytesLE()].map(r.assertContractParameterType),i=Object(r.assertContractParameterType)(t.readUInt8()),o=void 0===a||a>=1?Object(c.e)(t.readUInt8()):c.a.NoProperty,d=t.readVarString(252),u=t.readVarString(252),h=t.readVarString(252),f=t.readVarString(252),b=t.readVarString(65536);return new l({script:n,parameterList:s,returnType:i,contractProperties:o,name:d,codeVersion:u,author:h,email:f,description:b})}}).call(this,a(92).Buffer)},872:function(e,t,a){"use strict";a.d(t,"c",function(){return s}),a.d(t,"a",function(){return r}),a.d(t,"b",function(){return i});var n=a(831);Object(n.a)("NOT_FOUND",()=>"Not found.");const s=Object(n.a)("UNKNOWN_TYPE",e=>"Unknown type".concat(void 0===e?".":", found: ".concat(e))),r=Object(n.a)("KEY_NOT_FOUND",e=>"Key ".concat(e," not found in database.")),i=Object(n.a)("UNKNOWN_CHANGE_TYPE",()=>"Unknown change type.")},873:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n,s=a(184);!function(e){e[e.Log=0]="Log",e[e.Notification=1]="Notification"}(n||(n={}));const r=e=>{if((e=>void 0!==n[e])(e))return e;throw new s.a(e)}},881:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(90),s=a(860);class r{constructor(e){let{type:t,viewNumber:a}=e;this.serializeWire=Object(n.createSerializeWire)(this.serializeWireBase.bind(this)),this.type=t,this.viewNumber=a}static deserializeWireBase(e){throw new Error("Not Implemented")}static deserializeWire(e){return this.deserializeWireBase({context:e.context,reader:new s.a(e.buffer)})}serializeWireBase(e){e.writeUInt8(this.type),e.writeUInt8(this.viewNumber)}}r.VERSION=0,r.deserializeConsensusMessageBaseWireBase=e=>{let{reader:t}=e;return{type:t.readUInt8(),viewNumber:t.readUInt8()}}},885:function(e,t,a){"use strict";a.d(t,"a",function(){return o});a(94),a(85),a(383);var n=a(107),s=a(1404),r=a(2293),i=a(780);class o extends i.a{constructor(e){let{type:t,viewNumber:a,myIndex:i,primaryIndex:o,expectedView:c,validators:d,blockReceivedTimeSeconds:u,transactions:l,signatures:h,header:f}=e;const b="existing"===f.type?f.block.previousHash:f.previousHash,p=f.transactionHashes,g="existing"===f.type?f.block.index:f.blockIndex,y="existing"===f.type?f.block.consensusData:f.nonce,m="existing"===f.type?f.block.timestamp:f.timestamp,v="existing"===f.type?f.block.nextConsensus:f.nextConsensus;super({type:t,previousHash:b,blockIndex:g,viewNumber:a,myIndex:i,primaryIndex:o,expectedView:c,validators:d,blockReceivedTimeSeconds:u}),this.transactions=l,this.transactionHashes=p,this.transactionHashesSet=new Set(p),this.signatures=h,"existing"===f.type?this.header=f.block:this.header=new s.a({version:this.version,previousHash:this.previousHash,merkleRoot:r.a.computeRoot(this.transactionHashes.map(e=>n.b.hexToUInt256(e))),timestamp:m,index:this.blockIndex,consensusData:y,nextConsensus:v,transactions:[]})}cloneSignatures(e){throw new Error("Not Implemented")}toJSON(){return Object.assign({},super.toJSON(),{transactionHashes:this.transactionHashes.map(e=>n.b.uInt256ToString(e)),signatures:this.signatures.map(e=>void 0===e?"undefined":e.toString("hex"))})}}},90:function(e,t,a){"use strict";var n=a(187);a.o(n,"AssetTypeModel")&&a.d(t,"AssetTypeModel",function(){return n.AssetTypeModel}),a.o(n,"AttributeUsageModel")&&a.d(t,"AttributeUsageModel",function(){return n.AttributeUsageModel}),a.o(n,"BufferAttributeModel")&&a.d(t,"BufferAttributeModel",function(){return n.BufferAttributeModel}),a.o(n,"Byte")&&a.d(t,"Byte",function(){return n.Byte}),a.o(n,"ByteBuffer")&&a.d(t,"ByteBuffer",function(){return n.ByteBuffer}),a.o(n,"ClaimTransactionModel")&&a.d(t,"ClaimTransactionModel",function(){return n.ClaimTransactionModel}),a.o(n,"ContractParameterTypeModel")&&a.d(t,"ContractParameterTypeModel",function(){return n.ContractParameterTypeModel}),a.o(n,"ECPointAttributeModel")&&a.d(t,"ECPointAttributeModel",function(){return n.ECPointAttributeModel}),a.o(n,"InputModel")&&a.d(t,"InputModel",function(){return n.InputModel}),a.o(n,"InvocationTransactionModel")&&a.d(t,"InvocationTransactionModel",function(){return n.InvocationTransactionModel}),a.o(n,"MAX_TRANSACTION_ATTRIBUTES")&&a.d(t,"MAX_TRANSACTION_ATTRIBUTES",function(){return n.MAX_TRANSACTION_ATTRIBUTES}),a.o(n,"Op")&&a.d(t,"Op",function(){return n.Op}),a.o(n,"OutputModel")&&a.d(t,"OutputModel",function(){return n.OutputModel}),a.o(n,"StateDescriptorTypeModel")&&a.d(t,"StateDescriptorTypeModel",function(){return n.StateDescriptorTypeModel}),a.o(n,"StorageFlagsModel")&&a.d(t,"StorageFlagsModel",function(){return n.StorageFlagsModel}),a.o(n,"TransactionBaseModel")&&a.d(t,"TransactionBaseModel",function(){return n.TransactionBaseModel}),a.o(n,"TransactionTypeModel")&&a.d(t,"TransactionTypeModel",function(){return n.TransactionTypeModel}),a.o(n,"UInt160AttributeModel")&&a.d(t,"UInt160AttributeModel",function(){return n.UInt160AttributeModel}),a.o(n,"UInt256AttributeModel")&&a.d(t,"UInt256AttributeModel",function(){return n.UInt256AttributeModel}),a.o(n,"VMState")&&a.d(t,"VMState",function(){return n.VMState}),a.o(n,"WitnessModel")&&a.d(t,"WitnessModel",function(){return n.WitnessModel}),a.o(n,"assertAssetType")&&a.d(t,"assertAssetType",function(){return n.assertAssetType}),a.o(n,"assertAttributeUsage")&&a.d(t,"assertAttributeUsage",function(){return n.assertAttributeUsage}),a.o(n,"assertAttributeUsageJSON")&&a.d(t,"assertAttributeUsageJSON",function(){return n.assertAttributeUsageJSON}),a.o(n,"assertContractParameterType")&&a.d(t,"assertContractParameterType",function(){return n.assertContractParameterType}),a.o(n,"assertStateDescriptorType")&&a.d(t,"assertStateDescriptorType",function(){return n.assertStateDescriptorType}),a.o(n,"assertStorageFlags")&&a.d(t,"assertStorageFlags",function(){return n.assertStorageFlags}),a.o(n,"assertSysCall")&&a.d(t,"assertSysCall",function(){return n.assertSysCall}),a.o(n,"assertTransactionType")&&a.d(t,"assertTransactionType",function(){return n.assertTransactionType}),a.o(n,"assertVMState")&&a.d(t,"assertVMState",function(){return n.assertVMState}),a.o(n,"createSerializeWire")&&a.d(t,"createSerializeWire",function(){return n.createSerializeWire}),a.o(n,"hasFlag")&&a.d(t,"hasFlag",function(){return n.hasFlag}),a.o(n,"hasStorageFlag")&&a.d(t,"hasStorageFlag",function(){return n.hasStorageFlag}),a.o(n,"isByteCode")&&a.d(t,"isByteCode",function(){return n.isByteCode}),a.o(n,"isContractParameterType")&&a.d(t,"isContractParameterType",function(){return n.isContractParameterType}),a.o(n,"toAttributeUsage")&&a.d(t,"toAttributeUsage",function(){return n.toAttributeUsage}),a.o(n,"toJSONAssetType")&&a.d(t,"toJSONAssetType",function(){return n.toJSONAssetType}),a.o(n,"toJSONAttributeUsage")&&a.d(t,"toJSONAttributeUsage",function(){return n.toJSONAttributeUsage}),a.o(n,"toJSONContractParameterType")&&a.d(t,"toJSONContractParameterType",function(){return n.toJSONContractParameterType}),a.o(n,"toJSONStorageFlags")&&a.d(t,"toJSONStorageFlags",function(){return n.toJSONStorageFlags}),a.o(n,"toSysCallHash")&&a.d(t,"toSysCallHash",function(){return n.toSysCallHash});var s=a(247);a.o(s,"AssetTypeModel")&&a.d(t,"AssetTypeModel",function(){return s.AssetTypeModel}),a.o(s,"AttributeUsageModel")&&a.d(t,"AttributeUsageModel",function(){return s.AttributeUsageModel}),a.o(s,"BufferAttributeModel")&&a.d(t,"BufferAttributeModel",function(){return s.BufferAttributeModel}),a.o(s,"Byte")&&a.d(t,"Byte",function(){return s.Byte}),a.o(s,"ByteBuffer")&&a.d(t,"ByteBuffer",function(){return s.ByteBuffer}),a.o(s,"ClaimTransactionModel")&&a.d(t,"ClaimTransactionModel",function(){return s.ClaimTransactionModel}),a.o(s,"ContractParameterTypeModel")&&a.d(t,"ContractParameterTypeModel",function(){return s.ContractParameterTypeModel}),a.o(s,"ECPointAttributeModel")&&a.d(t,"ECPointAttributeModel",function(){return s.ECPointAttributeModel}),a.o(s,"InputModel")&&a.d(t,"InputModel",function(){return s.InputModel}),a.o(s,"InvocationTransactionModel")&&a.d(t,"InvocationTransactionModel",function(){return s.InvocationTransactionModel}),a.o(s,"MAX_TRANSACTION_ATTRIBUTES")&&a.d(t,"MAX_TRANSACTION_ATTRIBUTES",function(){return s.MAX_TRANSACTION_ATTRIBUTES}),a.o(s,"Op")&&a.d(t,"Op",function(){return s.Op}),a.o(s,"OutputModel")&&a.d(t,"OutputModel",function(){return s.OutputModel}),a.o(s,"StateDescriptorTypeModel")&&a.d(t,"StateDescriptorTypeModel",function(){return s.StateDescriptorTypeModel}),a.o(s,"StorageFlagsModel")&&a.d(t,"StorageFlagsModel",function(){return s.StorageFlagsModel}),a.o(s,"TransactionBaseModel")&&a.d(t,"TransactionBaseModel",function(){return s.TransactionBaseModel}),a.o(s,"TransactionTypeModel")&&a.d(t,"TransactionTypeModel",function(){return s.TransactionTypeModel}),a.o(s,"UInt160AttributeModel")&&a.d(t,"UInt160AttributeModel",function(){return s.UInt160AttributeModel}),a.o(s,"UInt256AttributeModel")&&a.d(t,"UInt256AttributeModel",function(){return s.UInt256AttributeModel}),a.o(s,"VMState")&&a.d(t,"VMState",function(){return s.VMState}),a.o(s,"WitnessModel")&&a.d(t,"WitnessModel",function(){return s.WitnessModel}),a.o(s,"assertAssetType")&&a.d(t,"assertAssetType",function(){return s.assertAssetType}),a.o(s,"assertAttributeUsage")&&a.d(t,"assertAttributeUsage",function(){return s.assertAttributeUsage}),a.o(s,"assertAttributeUsageJSON")&&a.d(t,"assertAttributeUsageJSON",function(){return s.assertAttributeUsageJSON}),a.o(s,"assertContractParameterType")&&a.d(t,"assertContractParameterType",function(){return s.assertContractParameterType}),a.o(s,"assertStateDescriptorType")&&a.d(t,"assertStateDescriptorType",function(){return s.assertStateDescriptorType}),a.o(s,"assertStorageFlags")&&a.d(t,"assertStorageFlags",function(){return s.assertStorageFlags}),a.o(s,"assertSysCall")&&a.d(t,"assertSysCall",function(){return s.assertSysCall}),a.o(s,"assertTransactionType")&&a.d(t,"assertTransactionType",function(){return s.assertTransactionType}),a.o(s,"assertVMState")&&a.d(t,"assertVMState",function(){return s.assertVMState}),a.o(s,"createSerializeWire")&&a.d(t,"createSerializeWire",function(){return s.createSerializeWire}),a.o(s,"hasFlag")&&a.d(t,"hasFlag",function(){return s.hasFlag}),a.o(s,"hasStorageFlag")&&a.d(t,"hasStorageFlag",function(){return s.hasStorageFlag}),a.o(s,"isByteCode")&&a.d(t,"isByteCode",function(){return s.isByteCode}),a.o(s,"isContractParameterType")&&a.d(t,"isContractParameterType",function(){return s.isContractParameterType}),a.o(s,"toAttributeUsage")&&a.d(t,"toAttributeUsage",function(){return s.toAttributeUsage}),a.o(s,"toJSONAssetType")&&a.d(t,"toJSONAssetType",function(){return s.toJSONAssetType}),a.o(s,"toJSONAttributeUsage")&&a.d(t,"toJSONAttributeUsage",function(){return s.toJSONAttributeUsage}),a.o(s,"toJSONContractParameterType")&&a.d(t,"toJSONContractParameterType",function(){return s.toJSONContractParameterType}),a.o(s,"toJSONStorageFlags")&&a.d(t,"toJSONStorageFlags",function(){return s.toJSONStorageFlags}),a.o(s,"toSysCallHash")&&a.d(t,"toSysCallHash",function(){return s.toSysCallHash})}});
//# sourceMappingURL=workers.17.c144d707.js.map